!function(){var e={6415:function(e){e.exports=function(e){if("function"!=typeof e)throw TypeError(String(e)+" is not a function");return e}},2231:function(e,t,n){var i=n(3283);e.exports=function(e){if(!i(e)&&null!==e)throw TypeError("Can't set "+String(e)+" as a prototype");return e}},7343:function(e,t,n){var i=n(3459),a=n(8211),r=n(1778),s=i("unscopables"),o=Array.prototype;null==o[s]&&r.f(o,s,{configurable:!0,value:a(null)}),e.exports=function(e){o[s][e]=!0}},9429:function(e,t,n){"use strict";var i=n(7010).charAt;e.exports=function(e,t,n){return t+(n?i(e,t).length:1)}},1370:function(e){e.exports=function(e,t,n){if(!(e instanceof t))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation");return e}},8:function(e,t,n){var i=n(3283);e.exports=function(e){if(!i(e))throw TypeError(String(e)+" is not an object");return e}},2304:function(e){e.exports="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView},9645:function(e,t,n){"use strict";var i,a=n(2304),r=n(294),s=n(3123),o=n(3283),l=n(8887),c=n(262),u=n(3326),d=n(1203),f=n(1778).f,p=n(4153),g=n(4007),v=n(3459),h=n(2959),y=s.Int8Array,m=y&&y.prototype,k=s.Uint8ClampedArray,_=k&&k.prototype,b=y&&p(y),S=m&&p(m),E=Object.prototype,x=E.isPrototypeOf,w=v("toStringTag"),I=h("TYPED_ARRAY_TAG"),P=a&&!!g&&"Opera"!==c(s.opera),T=!1,C={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},A={BigInt64Array:8,BigUint64Array:8},R=function(e){if(!o(e))return!1;var t=c(e);return l(C,t)||l(A,t)};for(i in C)s[i]||(P=!1);if((!P||"function"!=typeof b||b===Function.prototype)&&(b=function(){throw TypeError("Incorrect invocation")},P))for(i in C)s[i]&&g(s[i],b);if((!P||!S||S===E)&&(S=b.prototype,P))for(i in C)s[i]&&g(s[i].prototype,S);if(P&&p(_)!==S&&g(_,S),r&&!l(S,w))for(i in T=!0,f(S,w,{get:function(){return o(this)?this[I]:void 0}}),C)s[i]&&u(s[i],I,i);e.exports={NATIVE_ARRAY_BUFFER_VIEWS:P,TYPED_ARRAY_TAG:T&&I,aTypedArray:function(e){if(R(e))return e;throw TypeError("Target is not a typed array")},aTypedArrayConstructor:function(e){if(g){if(x.call(b,e))return e}else for(var t in C)if(l(C,i)){var n=s[t];if(n&&(e===n||x.call(n,e)))return e}throw TypeError("Target is not a typed array constructor")},exportTypedArrayMethod:function(e,t,n){if(r){if(n)for(var i in C){var a=s[i];a&&l(a.prototype,e)&&delete a.prototype[e]}S[e]&&!n||d(S,e,n?t:P&&m[e]||t)}},exportTypedArrayStaticMethod:function(e,t,n){var i,a;if(r){if(g){if(n)for(i in C)(a=s[i])&&l(a,e)&&delete a[e];if(b[e]&&!n)return;try{return d(b,e,n?t:P&&y[e]||t)}catch(e){}}for(i in C)!(a=s[i])||a[e]&&!n||d(a,e,t)}},isView:function(e){if(!o(e))return!1;var t=c(e);return"DataView"===t||l(C,t)||l(A,t)},isTypedArray:R,TypedArray:b,TypedArrayPrototype:S}},5351:function(e,t,n){"use strict";var i=n(3123),a=n(294),r=n(2304),s=n(3326),o=n(1837),l=n(6006),c=n(1370),u=n(2195),d=n(4807),f=n(5784),p=n(7067),g=n(4153),v=n(4007),h=n(4717).f,y=n(1778).f,m=n(3402),k=n(8456),_=n(6174),b=_.get,S=_.set,E="ArrayBuffer",x="DataView",w="Wrong index",I=i.ArrayBuffer,P=I,T=i.DataView,C=T&&T.prototype,A=Object.prototype,R=i.RangeError,O=p.pack,L=p.unpack,D=function(e){return[255&e]},N=function(e){return[255&e,e>>8&255]},M=function(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]},V=function(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]},U=function(e){return O(e,23,4)},q=function(e){return O(e,52,8)},B=function(e,t){y(e.prototype,t,{get:function(){return b(this)[t]}})},J=function(e,t,n,i){var a=f(n),r=b(e);if(a+t>r.byteLength)throw R(w);var s=b(r.buffer).bytes,o=a+r.byteOffset,l=s.slice(o,o+t);return i?l:l.reverse()},j=function(e,t,n,i,a,r){var s=f(n),o=b(e);if(s+t>o.byteLength)throw R(w);for(var l=b(o.buffer).bytes,c=s+o.byteOffset,u=i(+a),d=0;d<t;d++)l[c+d]=u[r?d:t-d-1]};if(r){if(!l((function(){I(1)}))||!l((function(){new I(-1)}))||l((function(){return new I,new I(1.5),new I(NaN),I.name!=E}))){for(var H,F=(P=function(e){return c(this,P),new I(f(e))}).prototype=I.prototype,G=h(I),W=0;G.length>W;)(H=G[W++])in P||s(P,H,I[H]);F.constructor=P}v&&g(C)!==A&&v(C,A);var z=new T(new P(2)),Y=C.setInt8;z.setInt8(0,2147483648),z.setInt8(1,2147483649),!z.getInt8(0)&&z.getInt8(1)||o(C,{setInt8:function(e,t){Y.call(this,e,t<<24>>24)},setUint8:function(e,t){Y.call(this,e,t<<24>>24)}},{unsafe:!0})}else P=function(e){c(this,P,E);var t=f(e);S(this,{bytes:m.call(new Array(t),0),byteLength:t}),a||(this.byteLength=t)},T=function(e,t,n){c(this,T,x),c(e,P,x);var i=b(e).byteLength,r=u(t);if(r<0||r>i)throw R("Wrong offset");if(r+(n=void 0===n?i-r:d(n))>i)throw R("Wrong length");S(this,{buffer:e,byteLength:n,byteOffset:r}),a||(this.buffer=e,this.byteLength=n,this.byteOffset=r)},a&&(B(P,"byteLength"),B(T,"buffer"),B(T,"byteLength"),B(T,"byteOffset")),o(T.prototype,{getInt8:function(e){return J(this,1,e)[0]<<24>>24},getUint8:function(e){return J(this,1,e)[0]},getInt16:function(e){var t=J(this,2,e,arguments.length>1?arguments[1]:void 0);return(t[1]<<8|t[0])<<16>>16},getUint16:function(e){var t=J(this,2,e,arguments.length>1?arguments[1]:void 0);return t[1]<<8|t[0]},getInt32:function(e){return V(J(this,4,e,arguments.length>1?arguments[1]:void 0))},getUint32:function(e){return V(J(this,4,e,arguments.length>1?arguments[1]:void 0))>>>0},getFloat32:function(e){return L(J(this,4,e,arguments.length>1?arguments[1]:void 0),23)},getFloat64:function(e){return L(J(this,8,e,arguments.length>1?arguments[1]:void 0),52)},setInt8:function(e,t){j(this,1,e,D,t)},setUint8:function(e,t){j(this,1,e,D,t)},setInt16:function(e,t){j(this,2,e,N,t,arguments.length>2?arguments[2]:void 0)},setUint16:function(e,t){j(this,2,e,N,t,arguments.length>2?arguments[2]:void 0)},setInt32:function(e,t){j(this,4,e,M,t,arguments.length>2?arguments[2]:void 0)},setUint32:function(e,t){j(this,4,e,M,t,arguments.length>2?arguments[2]:void 0)},setFloat32:function(e,t){j(this,4,e,U,t,arguments.length>2?arguments[2]:void 0)},setFloat64:function(e,t){j(this,8,e,q,t,arguments.length>2?arguments[2]:void 0)}});k(P,E),k(T,x),e.exports={ArrayBuffer:P,DataView:T}},4382:function(e,t,n){"use strict";var i=n(4119),a=n(4951),r=n(4807),s=Math.min;e.exports=[].copyWithin||function(e,t){var n=i(this),o=r(n.length),l=a(e,o),c=a(t,o),u=arguments.length>2?arguments[2]:void 0,d=s((void 0===u?o:a(u,o))-c,o-l),f=1;for(c<l&&l<c+d&&(f=-1,c+=d-1,l+=d-1);d-- >0;)c in n?n[l]=n[c]:delete n[l],l+=f,c+=f;return n}},3402:function(e,t,n){"use strict";var i=n(4119),a=n(4951),r=n(4807);e.exports=function(e){for(var t=i(this),n=r(t.length),s=arguments.length,o=a(s>1?arguments[1]:void 0,n),l=s>2?arguments[2]:void 0,c=void 0===l?n:a(l,n);c>o;)t[o++]=e;return t}},6447:function(e,t,n){"use strict";var i=n(5626).forEach,a=n(1204),r=n(4508),s=a("forEach"),o=r("forEach");e.exports=s&&o?[].forEach:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}},7149:function(e,t,n){var i=n(3817),a=n(4807),r=n(4951),s=function(e){return function(t,n,s){var o,l=i(t),c=a(l.length),u=r(s,c);if(e&&n!=n){for(;c>u;)if((o=l[u++])!=o)return!0}else for(;c>u;u++)if((e||u in l)&&l[u]===n)return e||u||0;return!e&&-1}};e.exports={includes:s(!0),indexOf:s(!1)}},5626:function(e,t,n){var i=n(2700),a=n(8387),r=n(4119),s=n(4807),o=n(7639),l=[].push,c=function(e){var t=1==e,n=2==e,c=3==e,u=4==e,d=6==e,f=7==e,p=5==e||d;return function(g,v,h,y){for(var m,k,_=r(g),b=a(_),S=i(v,h,3),E=s(b.length),x=0,w=y||o,I=t?w(g,E):n||f?w(g,0):void 0;E>x;x++)if((p||x in b)&&(k=S(m=b[x],x,_),e))if(t)I[x]=k;else if(k)switch(e){case 3:return!0;case 5:return m;case 6:return x;case 2:l.call(I,m)}else switch(e){case 4:return!1;case 7:l.call(I,m)}return d?-1:c||u?u:I}};e.exports={forEach:c(0),map:c(1),filter:c(2),some:c(3),every:c(4),find:c(5),findIndex:c(6),filterOut:c(7)}},3505:function(e,t,n){"use strict";var i=n(3817),a=n(2195),r=n(4807),s=n(1204),o=n(4508),l=Math.min,c=[].lastIndexOf,u=!!c&&1/[1].lastIndexOf(1,-0)<0,d=s("lastIndexOf"),f=o("indexOf",{ACCESSORS:!0,1:0}),p=u||!d||!f;e.exports=p?function(e){if(u)return c.apply(this,arguments)||0;var t=i(this),n=r(t.length),s=n-1;for(arguments.length>1&&(s=l(s,a(arguments[1]))),s<0&&(s=n+s);s>=0;s--)if(s in t&&t[s]===e)return s||0;return-1}:c},302:function(e,t,n){var i=n(6006),a=n(3459),r=n(4819),s=a("species");e.exports=function(e){return r>=51||!i((function(){var t=[];return(t.constructor={})[s]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},1204:function(e,t,n){"use strict";var i=n(6006);e.exports=function(e,t){var n=[][e];return!!n&&i((function(){n.call(null,t||function(){throw 1},1)}))}},4508:function(e,t,n){var i=n(294),a=n(6006),r=n(8887),s=Object.defineProperty,o={},l=function(e){throw e};e.exports=function(e,t){if(r(o,e))return o[e];t||(t={});var n=[][e],c=!!r(t,"ACCESSORS")&&t.ACCESSORS,u=r(t,0)?t[0]:l,d=r(t,1)?t[1]:void 0;return o[e]=!!n&&!a((function(){if(c&&!i)return!0;var e={length:-1};c?s(e,1,{enumerable:!0,get:l}):e[1]=1,n.call(e,u,d)}))}},1189:function(e,t,n){var i=n(6415),a=n(4119),r=n(8387),s=n(4807),o=function(e){return function(t,n,o,l){i(n);var c=a(t),u=r(c),d=s(c.length),f=e?d-1:0,p=e?-1:1;if(o<2)for(;;){if(f in u){l=u[f],f+=p;break}if(f+=p,e?f<0:d<=f)throw TypeError("Reduce of empty array with no initial value")}for(;e?f>=0:d>f;f+=p)f in u&&(l=n(l,u[f],f,c));return l}};e.exports={left:o(!1),right:o(!0)}},7639:function(e,t,n){var i=n(3283),a=n(3493),r=n(3459)("species");e.exports=function(e,t){var n;return a(e)&&("function"!=typeof(n=e.constructor)||n!==Array&&!a(n.prototype)?i(n)&&null===(n=n[r])&&(n=void 0):n=void 0),new(void 0===n?Array:n)(0===t?0:t)}},2730:function(e,t,n){var i=n(3459)("iterator"),a=!1;try{var r=0,s={next:function(){return{done:!!r++}},return:function(){a=!0}};s[i]=function(){return this},Array.from(s,(function(){throw 2}))}catch(e){}e.exports=function(e,t){if(!t&&!a)return!1;var n=!1;try{var r={};r[i]=function(){return{next:function(){return{done:n=!0}}}},e(r)}catch(e){}return n}},5891:function(e){var t={}.toString;e.exports=function(e){return t.call(e).slice(8,-1)}},262:function(e,t,n){var i=n(1094),a=n(5891),r=n(3459)("toStringTag"),s="Arguments"==a(function(){return arguments}());e.exports=i?a:function(e){var t,n,i;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),r))?n:s?a(t):"Object"==(i=a(t))&&"function"==typeof t.callee?"Arguments":i}},6667:function(e,t,n){var i=n(8887),a=n(9852),r=n(662),s=n(1778);e.exports=function(e,t){for(var n=a(t),o=s.f,l=r.f,c=0;c<n.length;c++){var u=n[c];i(e,u)||o(e,u,l(t,u))}}},8121:function(e,t,n){var i=n(3459)("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[i]=!1,"/./"[e](t)}catch(e){}}return!1}},9692:function(e,t,n){var i=n(6006);e.exports=!i((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}))},1247:function(e,t,n){"use strict";var i=n(3218).IteratorPrototype,a=n(8211),r=n(7464),s=n(8456),o=n(8445),l=function(){return this};e.exports=function(e,t,n){var c=t+" Iterator";return e.prototype=a(i,{next:r(1,n)}),s(e,c,!1,!0),o[c]=l,e}},3326:function(e,t,n){var i=n(294),a=n(1778),r=n(7464);e.exports=i?function(e,t,n){return a.f(e,t,r(1,n))}:function(e,t,n){return e[t]=n,e}},7464:function(e){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},7323:function(e,t,n){"use strict";var i=n(963),a=n(1778),r=n(7464);e.exports=function(e,t,n){var s=i(t);s in e?a.f(e,s,r(0,n)):e[s]=n}},9026:function(e,t,n){"use strict";var i=n(4059),a=n(1247),r=n(4153),s=n(4007),o=n(8456),l=n(3326),c=n(1203),u=n(3459),d=n(9261),f=n(8445),p=n(3218),g=p.IteratorPrototype,v=p.BUGGY_SAFARI_ITERATORS,h=u("iterator"),y="keys",m="values",k="entries",_=function(){return this};e.exports=function(e,t,n,u,p,b,S){a(n,t,u);var E,x,w,I=function(e){if(e===p&&R)return R;if(!v&&e in C)return C[e];switch(e){case y:case m:case k:return function(){return new n(this,e)}}return function(){return new n(this)}},P=t+" Iterator",T=!1,C=e.prototype,A=C[h]||C["@@iterator"]||p&&C[p],R=!v&&A||I(p),O="Array"==t&&C.entries||A;if(O&&(E=r(O.call(new e)),g!==Object.prototype&&E.next&&(d||r(E)===g||(s?s(E,g):"function"!=typeof E[h]&&l(E,h,_)),o(E,P,!0,!0),d&&(f[P]=_))),p==m&&A&&A.name!==m&&(T=!0,R=function(){return A.call(this)}),d&&!S||C[h]===R||l(C,h,R),f[t]=R,p)if(x={values:I(m),keys:b?R:I(y),entries:I(k)},S)for(w in x)(v||T||!(w in C))&&c(C,w,x[w]);else i({target:t,proto:!0,forced:v||T},x);return x}},294:function(e,t,n){var i=n(6006);e.exports=!i((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},7392:function(e,t,n){var i=n(3123),a=n(3283),r=i.document,s=a(r)&&a(r.createElement);e.exports=function(e){return s?r.createElement(e):{}}},7275:function(e){e.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},9178:function(e,t,n){var i=n(8504);e.exports=/(iphone|ipod|ipad).*applewebkit/i.test(i)},7983:function(e,t,n){var i=n(5891),a=n(3123);e.exports="process"==i(a.process)},6492:function(e,t,n){var i=n(8504);e.exports=/web0s(?!.*chrome)/i.test(i)},8504:function(e,t,n){var i=n(8747);e.exports=i("navigator","userAgent")||""},4819:function(e,t,n){var i,a,r=n(3123),s=n(8504),o=r.process,l=o&&o.versions,c=l&&l.v8;c?a=(i=c.split("."))[0]+i[1]:s&&(!(i=s.match(/Edge\/(\d+)/))||i[1]>=74)&&(i=s.match(/Chrome\/(\d+)/))&&(a=i[1]),e.exports=a&&+a},2615:function(e){e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},4059:function(e,t,n){var i=n(3123),a=n(662).f,r=n(3326),s=n(1203),o=n(1605),l=n(6667),c=n(1095);e.exports=function(e,t){var n,u,d,f,p,g=e.target,v=e.global,h=e.stat;if(n=v?i:h?i[g]||o(g,{}):(i[g]||{}).prototype)for(u in t){if(f=t[u],d=e.noTargetGet?(p=a(n,u))&&p.value:n[u],!c(v?u:g+(h?".":"#")+u,e.forced)&&void 0!==d){if(typeof f==typeof d)continue;l(f,d)}(e.sham||d&&d.sham)&&r(f,"sham",!0),s(n,u,f,e)}}},6006:function(e){e.exports=function(e){try{return!!e()}catch(e){return!0}}},5453:function(e,t,n){"use strict";n(3299);var i=n(1203),a=n(6006),r=n(3459),s=n(8324),o=n(3326),l=r("species"),c=!a((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")})),u="$0"==="a".replace(/./,"$0"),d=r("replace"),f=!!/./[d]&&""===/./[d]("a","$0"),p=!a((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n="ab".split(e);return 2!==n.length||"a"!==n[0]||"b"!==n[1]}));e.exports=function(e,t,n,d){var g=r(e),v=!a((function(){var t={};return t[g]=function(){return 7},7!=""[e](t)})),h=v&&!a((function(){var t=!1,n=/a/;return"split"===e&&((n={}).constructor={},n.constructor[l]=function(){return n},n.flags="",n[g]=/./[g]),n.exec=function(){return t=!0,null},n[g](""),!t}));if(!v||!h||"replace"===e&&(!c||!u||f)||"split"===e&&!p){var y=/./[g],m=n(g,""[e],(function(e,t,n,i,a){return t.exec===s?v&&!a?{done:!0,value:y.call(t,n,i)}:{done:!0,value:e.call(n,t,i)}:{done:!1}}),{REPLACE_KEEPS_$0:u,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:f}),k=m[0],_=m[1];i(String.prototype,e,k),i(RegExp.prototype,g,2==t?function(e,t){return _.call(e,this,t)}:function(e){return _.call(e,this)})}d&&o(RegExp.prototype[g],"sham",!0)}},2700:function(e,t,n){var i=n(6415);e.exports=function(e,t,n){if(i(e),void 0===t)return e;switch(n){case 0:return function(){return e.call(t)};case 1:return function(n){return e.call(t,n)};case 2:return function(n,i){return e.call(t,n,i)};case 3:return function(n,i,a){return e.call(t,n,i,a)}}return function(){return e.apply(t,arguments)}}},8747:function(e,t,n){var i=n(7034),a=n(3123),r=function(e){return"function"==typeof e?e:void 0};e.exports=function(e,t){return arguments.length<2?r(i[e])||r(a[e]):i[e]&&i[e][t]||a[e]&&a[e][t]}},8611:function(e,t,n){var i=n(262),a=n(8445),r=n(3459)("iterator");e.exports=function(e){if(null!=e)return e[r]||e["@@iterator"]||a[i(e)]}},595:function(e,t,n){var i=n(4119),a=Math.floor,r="".replace,s=/\$([$&'`]|\d\d?|<[^>]*>)/g,o=/\$([$&'`]|\d\d?)/g;e.exports=function(e,t,n,l,c,u){var d=n+e.length,f=l.length,p=o;return void 0!==c&&(c=i(c),p=s),r.call(u,p,(function(i,r){var s;switch(r.charAt(0)){case"$":return"$";case"&":return e;case"`":return t.slice(0,n);case"'":return t.slice(d);case"<":s=c[r.slice(1,-1)];break;default:var o=+r;if(0===o)return i;if(o>f){var u=a(o/10);return 0===u?i:u<=f?void 0===l[u-1]?r.charAt(1):l[u-1]+r.charAt(1):i}s=l[o-1]}return void 0===s?"":s}))}},3123:function(e){var t=function(e){return e&&e.Math==Math&&e};e.exports=t("object"==typeof globalThis&&globalThis)||t("object"==typeof window&&window)||t("object"==typeof self&&self)||t("object"==typeof global&&global)||function(){return this}()||Function("return this")()},8887:function(e){var t={}.hasOwnProperty;e.exports=function(e,n){return t.call(e,n)}},2863:function(e){e.exports={}},8168:function(e,t,n){var i=n(3123);e.exports=function(e,t){var n=i.console;n&&n.error&&(1===arguments.length?n.error(e):n.error(e,t))}},3707:function(e,t,n){var i=n(8747);e.exports=i("document","documentElement")},9206:function(e,t,n){var i=n(294),a=n(6006),r=n(7392);e.exports=!i&&!a((function(){return 7!=Object.defineProperty(r("div"),"a",{get:function(){return 7}}).a}))},7067:function(e){var t=1/0,n=Math.abs,i=Math.pow,a=Math.floor,r=Math.log,s=Math.LN2;e.exports={pack:function(e,o,l){var c,u,d,f=new Array(l),p=8*l-o-1,g=(1<<p)-1,v=g>>1,h=23===o?i(2,-24)-i(2,-77):0,y=e<0||0===e&&1/e<0?1:0,m=0;for((e=n(e))!=e||e===t?(u=e!=e?1:0,c=g):(c=a(r(e)/s),e*(d=i(2,-c))<1&&(c--,d*=2),(e+=c+v>=1?h/d:h*i(2,1-v))*d>=2&&(c++,d/=2),c+v>=g?(u=0,c=g):c+v>=1?(u=(e*d-1)*i(2,o),c+=v):(u=e*i(2,v-1)*i(2,o),c=0));o>=8;f[m++]=255&u,u/=256,o-=8);for(c=c<<o|u,p+=o;p>0;f[m++]=255&c,c/=256,p-=8);return f[--m]|=128*y,f},unpack:function(e,n){var a,r=e.length,s=8*r-n-1,o=(1<<s)-1,l=o>>1,c=s-7,u=r-1,d=e[u--],f=127&d;for(d>>=7;c>0;f=256*f+e[u],u--,c-=8);for(a=f&(1<<-c)-1,f>>=-c,c+=n;c>0;a=256*a+e[u],u--,c-=8);if(0===f)f=1-l;else{if(f===o)return a?NaN:d?-1/0:t;a+=i(2,n),f-=l}return(d?-1:1)*a*i(2,f-n)}}},8387:function(e,t,n){var i=n(6006),a=n(5891),r="".split;e.exports=i((function(){return!Object("z").propertyIsEnumerable(0)}))?function(e){return"String"==a(e)?r.call(e,""):Object(e)}:Object},1919:function(e,t,n){var i=n(3283),a=n(4007);e.exports=function(e,t,n){var r,s;return a&&"function"==typeof(r=t.constructor)&&r!==n&&i(s=r.prototype)&&s!==n.prototype&&a(e,s),e}},6401:function(e,t,n){var i=n(2419),a=Function.toString;"function"!=typeof i.inspectSource&&(i.inspectSource=function(e){return a.call(e)}),e.exports=i.inspectSource},6174:function(e,t,n){var i,a,r,s=n(3452),o=n(3123),l=n(3283),c=n(3326),u=n(8887),d=n(2419),f=n(713),p=n(2863),g=o.WeakMap;if(s){var v=d.state||(d.state=new g),h=v.get,y=v.has,m=v.set;i=function(e,t){return t.facade=e,m.call(v,e,t),t},a=function(e){return h.call(v,e)||{}},r=function(e){return y.call(v,e)}}else{var k=f("state");p[k]=!0,i=function(e,t){return t.facade=e,c(e,k,t),t},a=function(e){return u(e,k)?e[k]:{}},r=function(e){return u(e,k)}}e.exports={set:i,get:a,has:r,enforce:function(e){return r(e)?a(e):i(e,{})},getterFor:function(e){return function(t){var n;if(!l(t)||(n=a(t)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return n}}}},3118:function(e,t,n){var i=n(3459),a=n(8445),r=i("iterator"),s=Array.prototype;e.exports=function(e){return void 0!==e&&(a.Array===e||s[r]===e)}},3493:function(e,t,n){var i=n(5891);e.exports=Array.isArray||function(e){return"Array"==i(e)}},1095:function(e,t,n){var i=n(6006),a=/#|\.prototype\./,r=function(e,t){var n=o[s(e)];return n==c||n!=l&&("function"==typeof t?i(t):!!t)},s=r.normalize=function(e){return String(e).replace(a,".").toLowerCase()},o=r.data={},l=r.NATIVE="N",c=r.POLYFILL="P";e.exports=r},3283:function(e){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},9261:function(e){e.exports=!1},7306:function(e,t,n){var i=n(3283),a=n(5891),r=n(3459)("match");e.exports=function(e){var t;return i(e)&&(void 0!==(t=e[r])?!!t:"RegExp"==a(e))}},4854:function(e,t,n){var i=n(8),a=n(3118),r=n(4807),s=n(2700),o=n(8611),l=n(5289),c=function(e,t){this.stopped=e,this.result=t};e.exports=function(e,t,n){var u,d,f,p,g,v,h,y=n&&n.that,m=!(!n||!n.AS_ENTRIES),k=!(!n||!n.IS_ITERATOR),_=!(!n||!n.INTERRUPTED),b=s(t,y,1+m+_),S=function(e){return u&&l(u),new c(!0,e)},E=function(e){return m?(i(e),_?b(e[0],e[1],S):b(e[0],e[1])):_?b(e,S):b(e)};if(k)u=e;else{if("function"!=typeof(d=o(e)))throw TypeError("Target is not iterable");if(a(d)){for(f=0,p=r(e.length);p>f;f++)if((g=E(e[f]))&&g instanceof c)return g;return new c(!1)}u=d.call(e)}for(v=u.next;!(h=v.call(u)).done;){try{g=E(h.value)}catch(e){throw l(u),e}if("object"==typeof g&&g&&g instanceof c)return g}return new c(!1)}},5289:function(e,t,n){var i=n(8);e.exports=function(e){var t=e.return;if(void 0!==t)return i(t.call(e)).value}},3218:function(e,t,n){"use strict";var i,a,r,s=n(4153),o=n(3326),l=n(8887),c=n(3459),u=n(9261),d=c("iterator"),f=!1;[].keys&&("next"in(r=[].keys())?(a=s(s(r)))!==Object.prototype&&(i=a):f=!0),null==i&&(i={}),u||l(i,d)||o(i,d,(function(){return this})),e.exports={IteratorPrototype:i,BUGGY_SAFARI_ITERATORS:f}},8445:function(e){e.exports={}},5489:function(e,t,n){var i,a,r,s,o,l,c,u,d=n(3123),f=n(662).f,p=n(852).set,g=n(9178),v=n(6492),h=n(7983),y=d.MutationObserver||d.WebKitMutationObserver,m=d.document,k=d.process,_=d.Promise,b=f(d,"queueMicrotask"),S=b&&b.value;S||(i=function(){var e,t;for(h&&(e=k.domain)&&e.exit();a;){t=a.fn,a=a.next;try{t()}catch(e){throw a?s():r=void 0,e}}r=void 0,e&&e.enter()},g||h||v||!y||!m?_&&_.resolve?(c=_.resolve(void 0),u=c.then,s=function(){u.call(c,i)}):s=h?function(){k.nextTick(i)}:function(){p.call(d,i)}:(o=!0,l=m.createTextNode(""),new y(i).observe(l,{characterData:!0}),s=function(){l.data=o=!o})),e.exports=S||function(e){var t={fn:e,next:void 0};r&&(r.next=t),a||(a=t,s()),r=t}},9357:function(e,t,n){var i=n(3123);e.exports=i.Promise},7224:function(e,t,n){var i=n(6006);e.exports=!!Object.getOwnPropertySymbols&&!i((function(){return!String(Symbol())}))},3452:function(e,t,n){var i=n(3123),a=n(6401),r=i.WeakMap;e.exports="function"==typeof r&&/native code/.test(a(r))},8644:function(e,t,n){"use strict";var i=n(6415),a=function(e){var t,n;this.promise=new e((function(e,i){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=i})),this.resolve=i(t),this.reject=i(n)};e.exports.f=function(e){return new a(e)}},7053:function(e,t,n){var i=n(7306);e.exports=function(e){if(i(e))throw TypeError("The method doesn't accept regular expressions");return e}},8211:function(e,t,n){var i,a=n(8),r=n(9548),s=n(2615),o=n(2863),l=n(3707),c=n(7392),u=n(713)("IE_PROTO"),d=function(){},f=function(e){return"<script>"+e+"<\/script>"},p=function(){try{i=document.domain&&new ActiveXObject("htmlfile")}catch(e){}var e,t;p=i?function(e){e.write(f("")),e.close();var t=e.parentWindow.Object;return e=null,t}(i):((t=c("iframe")).style.display="none",l.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write(f("document.F=Object")),e.close(),e.F);for(var n=s.length;n--;)delete p.prototype[s[n]];return p()};o[u]=!0,e.exports=Object.create||function(e,t){var n;return null!==e?(d.prototype=a(e),n=new d,d.prototype=null,n[u]=e):n=p(),void 0===t?n:r(n,t)}},9548:function(e,t,n){var i=n(294),a=n(1778),r=n(8),s=n(5244);e.exports=i?Object.defineProperties:function(e,t){r(e);for(var n,i=s(t),o=i.length,l=0;o>l;)a.f(e,n=i[l++],t[n]);return e}},1778:function(e,t,n){var i=n(294),a=n(9206),r=n(8),s=n(963),o=Object.defineProperty;t.f=i?o:function(e,t,n){if(r(e),t=s(t,!0),r(n),a)try{return o(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},662:function(e,t,n){var i=n(294),a=n(7613),r=n(7464),s=n(3817),o=n(963),l=n(8887),c=n(9206),u=Object.getOwnPropertyDescriptor;t.f=i?u:function(e,t){if(e=s(e),t=o(t,!0),c)try{return u(e,t)}catch(e){}if(l(e,t))return r(!a.f.call(e,t),e[t])}},4717:function(e,t,n){var i=n(4121),a=n(2615).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return i(e,a)}},7781:function(e,t){t.f=Object.getOwnPropertySymbols},4153:function(e,t,n){var i=n(8887),a=n(4119),r=n(713),s=n(9692),o=r("IE_PROTO"),l=Object.prototype;e.exports=s?Object.getPrototypeOf:function(e){return e=a(e),i(e,o)?e[o]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?l:null}},4121:function(e,t,n){var i=n(8887),a=n(3817),r=n(7149).indexOf,s=n(2863);e.exports=function(e,t){var n,o=a(e),l=0,c=[];for(n in o)!i(s,n)&&i(o,n)&&c.push(n);for(;t.length>l;)i(o,n=t[l++])&&(~r(c,n)||c.push(n));return c}},5244:function(e,t,n){var i=n(4121),a=n(2615);e.exports=Object.keys||function(e){return i(e,a)}},7613:function(e,t){"use strict";var n={}.propertyIsEnumerable,i=Object.getOwnPropertyDescriptor,a=i&&!n.call({1:2},1);t.f=a?function(e){var t=i(this,e);return!!t&&t.enumerable}:n},4007:function(e,t,n){var i=n(8),a=n(2231);e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,n={};try{(e=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(n,[]),t=n instanceof Array}catch(e){}return function(n,r){return i(n),a(r),t?e.call(n,r):n.__proto__=r,n}}():void 0)},350:function(e,t,n){"use strict";var i=n(1094),a=n(262);e.exports=i?{}.toString:function(){return"[object "+a(this)+"]"}},9852:function(e,t,n){var i=n(8747),a=n(4717),r=n(7781),s=n(8);e.exports=i("Reflect","ownKeys")||function(e){var t=a.f(s(e)),n=r.f;return n?t.concat(n(e)):t}},7034:function(e,t,n){var i=n(3123);e.exports=i},9637:function(e){e.exports=function(e){try{return{error:!1,value:e()}}catch(e){return{error:!0,value:e}}}},9986:function(e,t,n){var i=n(8),a=n(3283),r=n(8644);e.exports=function(e,t){if(i(e),a(t)&&t.constructor===e)return t;var n=r.f(e);return(0,n.resolve)(t),n.promise}},1837:function(e,t,n){var i=n(1203);e.exports=function(e,t,n){for(var a in t)i(e,a,t[a],n);return e}},1203:function(e,t,n){var i=n(3123),a=n(3326),r=n(8887),s=n(1605),o=n(6401),l=n(6174),c=l.get,u=l.enforce,d=String(String).split("String");(e.exports=function(e,t,n,o){var l,c=!!o&&!!o.unsafe,f=!!o&&!!o.enumerable,p=!!o&&!!o.noTargetGet;"function"==typeof n&&("string"!=typeof t||r(n,"name")||a(n,"name",t),(l=u(n)).source||(l.source=d.join("string"==typeof t?t:""))),e!==i?(c?!p&&e[t]&&(f=!0):delete e[t],f?e[t]=n:a(e,t,n)):f?e[t]=n:s(t,n)})(Function.prototype,"toString",(function(){return"function"==typeof this&&c(this).source||o(this)}))},4177:function(e,t,n){var i=n(5891),a=n(8324);e.exports=function(e,t){var n=e.exec;if("function"==typeof n){var r=n.call(e,t);if("object"!=typeof r)throw TypeError("RegExp exec method returned something other than an Object or null");return r}if("RegExp"!==i(e))throw TypeError("RegExp#exec called on incompatible receiver");return a.call(e,t)}},8324:function(e,t,n){"use strict";var i,a,r=n(5081),s=n(7425),o=RegExp.prototype.exec,l=String.prototype.replace,c=o,u=(i=/a/,a=/b*/g,o.call(i,"a"),o.call(a,"a"),0!==i.lastIndex||0!==a.lastIndex),d=s.UNSUPPORTED_Y||s.BROKEN_CARET,f=void 0!==/()??/.exec("")[1];(u||f||d)&&(c=function(e){var t,n,i,a,s=this,c=d&&s.sticky,p=r.call(s),g=s.source,v=0,h=e;return c&&(-1===(p=p.replace("y","")).indexOf("g")&&(p+="g"),h=String(e).slice(s.lastIndex),s.lastIndex>0&&(!s.multiline||s.multiline&&"\n"!==e[s.lastIndex-1])&&(g="(?: "+g+")",h=" "+h,v++),n=new RegExp("^(?:"+g+")",p)),f&&(n=new RegExp("^"+g+"$(?!\\s)",p)),u&&(t=s.lastIndex),i=o.call(c?n:s,h),c?i?(i.input=i.input.slice(v),i[0]=i[0].slice(v),i.index=s.lastIndex,s.lastIndex+=i[0].length):s.lastIndex=0:u&&i&&(s.lastIndex=s.global?i.index+i[0].length:t),f&&i&&i.length>1&&l.call(i[0],n,(function(){for(a=1;a<arguments.length-2;a++)void 0===arguments[a]&&(i[a]=void 0)})),i}),e.exports=c},5081:function(e,t,n){"use strict";var i=n(8);e.exports=function(){var e=i(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},7425:function(e,t,n){"use strict";var i=n(6006);function a(e,t){return RegExp(e,t)}t.UNSUPPORTED_Y=i((function(){var e=a("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),t.BROKEN_CARET=i((function(){var e=a("^r","gy");return e.lastIndex=2,null!=e.exec("str")}))},7154:function(e){e.exports=function(e){if(null==e)throw TypeError("Can't call method on "+e);return e}},1605:function(e,t,n){var i=n(3123),a=n(3326);e.exports=function(e,t){try{a(i,e,t)}catch(n){i[e]=t}return t}},5231:function(e,t,n){"use strict";var i=n(8747),a=n(1778),r=n(3459),s=n(294),o=r("species");e.exports=function(e){var t=i(e),n=a.f;s&&t&&!t[o]&&n(t,o,{configurable:!0,get:function(){return this}})}},8456:function(e,t,n){var i=n(1778).f,a=n(8887),r=n(3459)("toStringTag");e.exports=function(e,t,n){e&&!a(e=n?e:e.prototype,r)&&i(e,r,{configurable:!0,value:t})}},713:function(e,t,n){var i=n(7562),a=n(2959),r=i("keys");e.exports=function(e){return r[e]||(r[e]=a(e))}},2419:function(e,t,n){var i=n(3123),a=n(1605),r="__core-js_shared__",s=i[r]||a(r,{});e.exports=s},7562:function(e,t,n){var i=n(9261),a=n(2419);(e.exports=function(e,t){return a[e]||(a[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.8.2",mode:i?"pure":"global",copyright:"© 2021 Denis Pushkarev (zloirock.ru)"})},4062:function(e,t,n){var i=n(8),a=n(6415),r=n(3459)("species");e.exports=function(e,t){var n,s=i(e).constructor;return void 0===s||null==(n=i(s)[r])?t:a(n)}},7010:function(e,t,n){var i=n(2195),a=n(7154),r=function(e){return function(t,n){var r,s,o=String(a(t)),l=i(n),c=o.length;return l<0||l>=c?e?"":void 0:(r=o.charCodeAt(l))<55296||r>56319||l+1===c||(s=o.charCodeAt(l+1))<56320||s>57343?e?o.charAt(l):r:e?o.slice(l,l+2):s-56320+(r-55296<<10)+65536}};e.exports={codeAt:r(!1),charAt:r(!0)}},852:function(e,t,n){var i,a,r,s=n(3123),o=n(6006),l=n(2700),c=n(3707),u=n(7392),d=n(9178),f=n(7983),p=s.location,g=s.setImmediate,v=s.clearImmediate,h=s.process,y=s.MessageChannel,m=s.Dispatch,k=0,_={},b=function(e){if(_.hasOwnProperty(e)){var t=_[e];delete _[e],t()}},S=function(e){return function(){b(e)}},E=function(e){b(e.data)},x=function(e){s.postMessage(e+"",p.protocol+"//"+p.host)};g&&v||(g=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return _[++k]=function(){("function"==typeof e?e:Function(e)).apply(void 0,t)},i(k),k},v=function(e){delete _[e]},f?i=function(e){h.nextTick(S(e))}:m&&m.now?i=function(e){m.now(S(e))}:y&&!d?(r=(a=new y).port2,a.port1.onmessage=E,i=l(r.postMessage,r,1)):s.addEventListener&&"function"==typeof postMessage&&!s.importScripts&&p&&"file:"!==p.protocol&&!o(x)?(i=x,s.addEventListener("message",E,!1)):i="onreadystatechange"in u("script")?function(e){c.appendChild(u("script")).onreadystatechange=function(){c.removeChild(this),b(e)}}:function(e){setTimeout(S(e),0)}),e.exports={set:g,clear:v}},4951:function(e,t,n){var i=n(2195),a=Math.max,r=Math.min;e.exports=function(e,t){var n=i(e);return n<0?a(n+t,0):r(n,t)}},5784:function(e,t,n){var i=n(2195),a=n(4807);e.exports=function(e){if(void 0===e)return 0;var t=i(e),n=a(t);if(t!==n)throw RangeError("Wrong length or index");return n}},3817:function(e,t,n){var i=n(8387),a=n(7154);e.exports=function(e){return i(a(e))}},2195:function(e){var t=Math.ceil,n=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?n:t)(e)}},4807:function(e,t,n){var i=n(2195),a=Math.min;e.exports=function(e){return e>0?a(i(e),9007199254740991):0}},4119:function(e,t,n){var i=n(7154);e.exports=function(e){return Object(i(e))}},6924:function(e,t,n){var i=n(7906);e.exports=function(e,t){var n=i(e);if(n%t)throw RangeError("Wrong offset");return n}},7906:function(e,t,n){var i=n(2195);e.exports=function(e){var t=i(e);if(t<0)throw RangeError("The argument can't be less than 0");return t}},963:function(e,t,n){var i=n(3283);e.exports=function(e,t){if(!i(e))return e;var n,a;if(t&&"function"==typeof(n=e.toString)&&!i(a=n.call(e)))return a;if("function"==typeof(n=e.valueOf)&&!i(a=n.call(e)))return a;if(!t&&"function"==typeof(n=e.toString)&&!i(a=n.call(e)))return a;throw TypeError("Can't convert object to primitive value")}},1094:function(e,t,n){var i={};i[n(3459)("toStringTag")]="z",e.exports="[object z]"===String(i)},9594:function(e,t,n){"use strict";var i=n(4059),a=n(3123),r=n(294),s=n(8422),o=n(9645),l=n(5351),c=n(1370),u=n(7464),d=n(3326),f=n(4807),p=n(5784),g=n(6924),v=n(963),h=n(8887),y=n(262),m=n(3283),k=n(8211),_=n(4007),b=n(4717).f,S=n(2552),E=n(5626).forEach,x=n(5231),w=n(1778),I=n(662),P=n(6174),T=n(1919),C=P.get,A=P.set,R=w.f,O=I.f,L=Math.round,D=a.RangeError,N=l.ArrayBuffer,M=l.DataView,V=o.NATIVE_ARRAY_BUFFER_VIEWS,U=o.TYPED_ARRAY_TAG,q=o.TypedArray,B=o.TypedArrayPrototype,J=o.aTypedArrayConstructor,j=o.isTypedArray,H="BYTES_PER_ELEMENT",F="Wrong length",G=function(e,t){for(var n=0,i=t.length,a=new(J(e))(i);i>n;)a[n]=t[n++];return a},W=function(e,t){R(e,t,{get:function(){return C(this)[t]}})},z=function(e){var t;return e instanceof N||"ArrayBuffer"==(t=y(e))||"SharedArrayBuffer"==t},Y=function(e,t){return j(e)&&"symbol"!=typeof t&&t in e&&String(+t)==String(t)},K=function(e,t){return Y(e,t=v(t,!0))?u(2,e[t]):O(e,t)},$=function(e,t,n){return!(Y(e,t=v(t,!0))&&m(n)&&h(n,"value"))||h(n,"get")||h(n,"set")||n.configurable||h(n,"writable")&&!n.writable||h(n,"enumerable")&&!n.enumerable?R(e,t,n):(e[t]=n.value,e)};r?(V||(I.f=K,w.f=$,W(B,"buffer"),W(B,"byteOffset"),W(B,"byteLength"),W(B,"length")),i({target:"Object",stat:!0,forced:!V},{getOwnPropertyDescriptor:K,defineProperty:$}),e.exports=function(e,t,n){var r=e.match(/\d+$/)[0]/8,o=e+(n?"Clamped":"")+"Array",l="get"+e,u="set"+e,v=a[o],h=v,y=h&&h.prototype,w={},I=function(e,t){R(e,t,{get:function(){return function(e,t){var n=C(e);return n.view[l](t*r+n.byteOffset,!0)}(this,t)},set:function(e){return function(e,t,i){var a=C(e);n&&(i=(i=L(i))<0?0:i>255?255:255&i),a.view[u](t*r+a.byteOffset,i,!0)}(this,t,e)},enumerable:!0})};V?s&&(h=t((function(e,t,n,i){return c(e,h,o),T(m(t)?z(t)?void 0!==i?new v(t,g(n,r),i):void 0!==n?new v(t,g(n,r)):new v(t):j(t)?G(h,t):S.call(h,t):new v(p(t)),e,h)})),_&&_(h,q),E(b(v),(function(e){e in h||d(h,e,v[e])})),h.prototype=y):(h=t((function(e,t,n,i){c(e,h,o);var a,s,l,u=0,d=0;if(m(t)){if(!z(t))return j(t)?G(h,t):S.call(h,t);a=t,d=g(n,r);var v=t.byteLength;if(void 0===i){if(v%r)throw D(F);if((s=v-d)<0)throw D(F)}else if((s=f(i)*r)+d>v)throw D(F);l=s/r}else l=p(t),a=new N(s=l*r);for(A(e,{buffer:a,byteOffset:d,byteLength:s,length:l,view:new M(a)});u<l;)I(e,u++)})),_&&_(h,q),y=h.prototype=k(B)),y.constructor!==h&&d(y,"constructor",h),U&&d(y,U,o),w[o]=h,i({global:!0,forced:h!=v,sham:!V},w),H in h||d(h,H,r),H in y||d(y,H,r),x(o)}):e.exports=function(){}},8422:function(e,t,n){var i=n(3123),a=n(6006),r=n(2730),s=n(9645).NATIVE_ARRAY_BUFFER_VIEWS,o=i.ArrayBuffer,l=i.Int8Array;e.exports=!s||!a((function(){l(1)}))||!a((function(){new l(-1)}))||!r((function(e){new l,new l(null),new l(1.5),new l(e)}),!0)||a((function(){return 1!==new l(new o(2),1,void 0).length}))},2552:function(e,t,n){var i=n(4119),a=n(4807),r=n(8611),s=n(3118),o=n(2700),l=n(9645).aTypedArrayConstructor;e.exports=function(e){var t,n,c,u,d,f,p=i(e),g=arguments.length,v=g>1?arguments[1]:void 0,h=void 0!==v,y=r(p);if(null!=y&&!s(y))for(f=(d=y.call(p)).next,p=[];!(u=f.call(d)).done;)p.push(u.value);for(h&&g>2&&(v=o(v,arguments[2],2)),n=a(p.length),c=new(l(this))(n),t=0;n>t;t++)c[t]=h?v(p[t],t):p[t];return c}},2959:function(e){var t=0,n=Math.random();e.exports=function(e){return"Symbol("+String(void 0===e?"":e)+")_"+(++t+n).toString(36)}},894:function(e,t,n){var i=n(7224);e.exports=i&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},3459:function(e,t,n){var i=n(3123),a=n(7562),r=n(8887),s=n(2959),o=n(7224),l=n(894),c=a("wks"),u=i.Symbol,d=l?u:u&&u.withoutSetter||s;e.exports=function(e){return r(c,e)||(o&&r(u,e)?c[e]=u[e]:c[e]=d("Symbol."+e)),c[e]}},3019:function(e,t,n){"use strict";var i=n(4059),a=n(6006),r=n(5351),s=n(8),o=n(4951),l=n(4807),c=n(4062),u=r.ArrayBuffer,d=r.DataView,f=u.prototype.slice;i({target:"ArrayBuffer",proto:!0,unsafe:!0,forced:a((function(){return!new u(2).slice(1,void 0).byteLength}))},{slice:function(e,t){if(void 0!==f&&void 0===t)return f.call(s(this),e);for(var n=s(this).byteLength,i=o(e,n),a=o(void 0===t?n:t,n),r=new(c(this,u))(l(a-i)),p=new d(this),g=new d(r),v=0;i<a;)g.setUint8(v++,p.getUint8(i++));return r}})},8847:function(e,t,n){"use strict";var i=n(4059),a=n(6447);i({target:"Array",proto:!0,forced:[].forEach!=a},{forEach:a})},4917:function(e,t,n){"use strict";var i=n(4059),a=n(7149).indexOf,r=n(1204),s=n(4508),o=[].indexOf,l=!!o&&1/[1].indexOf(1,-0)<0,c=r("indexOf"),u=s("indexOf",{ACCESSORS:!0,1:0});i({target:"Array",proto:!0,forced:l||!c||!u},{indexOf:function(e){return l?o.apply(this,arguments)||0:a(this,e,arguments.length>1?arguments[1]:void 0)}})},1631:function(e,t,n){"use strict";var i=n(3817),a=n(7343),r=n(8445),s=n(6174),o=n(9026),l="Array Iterator",c=s.set,u=s.getterFor(l);e.exports=o(Array,"Array",(function(e,t){c(this,{type:l,target:i(e),index:0,kind:t})}),(function(){var e=u(this),t=e.target,n=e.kind,i=e.index++;return!t||i>=t.length?(e.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:i,done:!1}:"values"==n?{value:t[i],done:!1}:{value:[i,t[i]],done:!1}}),"values"),r.Arguments=r.Array,a("keys"),a("values"),a("entries")},7699:function(e,t,n){"use strict";var i=n(4059),a=n(4951),r=n(2195),s=n(4807),o=n(4119),l=n(7639),c=n(7323),u=n(302),d=n(4508),f=u("splice"),p=d("splice",{ACCESSORS:!0,0:0,1:2}),g=Math.max,v=Math.min,h=9007199254740991,y="Maximum allowed length exceeded";i({target:"Array",proto:!0,forced:!f||!p},{splice:function(e,t){var n,i,u,d,f,p,m=o(this),k=s(m.length),_=a(e,k),b=arguments.length;if(0===b?n=i=0:1===b?(n=0,i=k-_):(n=b-2,i=v(g(r(t),0),k-_)),k+n-i>h)throw TypeError(y);for(u=l(m,i),d=0;d<i;d++)(f=_+d)in m&&c(u,d,m[f]);if(u.length=i,n<i){for(d=_;d<k-i;d++)p=d+n,(f=d+i)in m?m[p]=m[f]:delete m[p];for(d=k;d>k-i+n;d--)delete m[d-1]}else if(n>i)for(d=k-i;d>_;d--)p=d+n-1,(f=d+i-1)in m?m[p]=m[f]:delete m[p];for(d=0;d<n;d++)m[d+_]=arguments[d+2];return m.length=k-i+n,u}})},9251:function(e,t,n){var i=n(294),a=n(1778).f,r=Function.prototype,s=r.toString,o=/^\s*function ([^ (]*)/,l="name";i&&!(l in r)&&a(r,l,{configurable:!0,get:function(){try{return s.call(this).match(o)[1]}catch(e){return""}}})},9087:function(e,t,n){var i=n(1094),a=n(1203),r=n(350);i||a(Object.prototype,"toString",r,{unsafe:!0})},8228:function(e,t,n){"use strict";var i,a,r,s,o=n(4059),l=n(9261),c=n(3123),u=n(8747),d=n(9357),f=n(1203),p=n(1837),g=n(8456),v=n(5231),h=n(3283),y=n(6415),m=n(1370),k=n(6401),_=n(4854),b=n(2730),S=n(4062),E=n(852).set,x=n(5489),w=n(9986),I=n(8168),P=n(8644),T=n(9637),C=n(6174),A=n(1095),R=n(3459),O=n(7983),L=n(4819),D=R("species"),N="Promise",M=C.get,V=C.set,U=C.getterFor(N),q=d,B=c.TypeError,J=c.document,j=c.process,H=u("fetch"),F=P.f,G=F,W=!!(J&&J.createEvent&&c.dispatchEvent),z="function"==typeof PromiseRejectionEvent,Y="unhandledrejection",K=A(N,(function(){if(k(q)===String(q)){if(66===L)return!0;if(!O&&!z)return!0}if(l&&!q.prototype.finally)return!0;if(L>=51&&/native code/.test(q))return!1;var e=q.resolve(1),t=function(e){e((function(){}),(function(){}))};return(e.constructor={})[D]=t,!(e.then((function(){}))instanceof t)})),$=K||!b((function(e){q.all(e).catch((function(){}))})),Q=function(e){var t;return!(!h(e)||"function"!=typeof(t=e.then))&&t},X=function(e,t){if(!e.notified){e.notified=!0;var n=e.reactions;x((function(){for(var i=e.value,a=1==e.state,r=0;n.length>r;){var s,o,l,c=n[r++],u=a?c.ok:c.fail,d=c.resolve,f=c.reject,p=c.domain;try{u?(a||(2===e.rejection&&ne(e),e.rejection=1),!0===u?s=i:(p&&p.enter(),s=u(i),p&&(p.exit(),l=!0)),s===c.promise?f(B("Promise-chain cycle")):(o=Q(s))?o.call(s,d,f):d(s)):f(i)}catch(e){p&&!l&&p.exit(),f(e)}}e.reactions=[],e.notified=!1,t&&!e.rejection&&ee(e)}))}},Z=function(e,t,n){var i,a;W?((i=J.createEvent("Event")).promise=t,i.reason=n,i.initEvent(e,!1,!0),c.dispatchEvent(i)):i={promise:t,reason:n},!z&&(a=c["on"+e])?a(i):e===Y&&I("Unhandled promise rejection",n)},ee=function(e){E.call(c,(function(){var t,n=e.facade,i=e.value;if(te(e)&&(t=T((function(){O?j.emit("unhandledRejection",i,n):Z(Y,n,i)})),e.rejection=O||te(e)?2:1,t.error))throw t.value}))},te=function(e){return 1!==e.rejection&&!e.parent},ne=function(e){E.call(c,(function(){var t=e.facade;O?j.emit("rejectionHandled",t):Z("rejectionhandled",t,e.value)}))},ie=function(e,t,n){return function(i){e(t,i,n)}},ae=function(e,t,n){e.done||(e.done=!0,n&&(e=n),e.value=t,e.state=2,X(e,!0))},re=function(e,t,n){if(!e.done){e.done=!0,n&&(e=n);try{if(e.facade===t)throw B("Promise can't be resolved itself");var i=Q(t);i?x((function(){var n={done:!1};try{i.call(t,ie(re,n,e),ie(ae,n,e))}catch(t){ae(n,t,e)}})):(e.value=t,e.state=1,X(e,!1))}catch(t){ae({done:!1},t,e)}}};K&&(q=function(e){m(this,q,N),y(e),i.call(this);var t=M(this);try{e(ie(re,t),ie(ae,t))}catch(e){ae(t,e)}},(i=function(e){V(this,{type:N,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=p(q.prototype,{then:function(e,t){var n=U(this),i=F(S(this,q));return i.ok="function"!=typeof e||e,i.fail="function"==typeof t&&t,i.domain=O?j.domain:void 0,n.parent=!0,n.reactions.push(i),0!=n.state&&X(n,!1),i.promise},catch:function(e){return this.then(void 0,e)}}),a=function(){var e=new i,t=M(e);this.promise=e,this.resolve=ie(re,t),this.reject=ie(ae,t)},P.f=F=function(e){return e===q||e===r?new a(e):G(e)},l||"function"!=typeof d||(s=d.prototype.then,f(d.prototype,"then",(function(e,t){var n=this;return new q((function(e,t){s.call(n,e,t)})).then(e,t)}),{unsafe:!0}),"function"==typeof H&&o({global:!0,enumerable:!0,forced:!0},{fetch:function(e){return w(q,H.apply(c,arguments))}}))),o({global:!0,wrap:!0,forced:K},{Promise:q}),g(q,N,!1,!0),v(N),r=u(N),o({target:N,stat:!0,forced:K},{reject:function(e){var t=F(this);return t.reject.call(void 0,e),t.promise}}),o({target:N,stat:!0,forced:l||K},{resolve:function(e){return w(l&&this===r?q:this,e)}}),o({target:N,stat:!0,forced:$},{all:function(e){var t=this,n=F(t),i=n.resolve,a=n.reject,r=T((function(){var n=y(t.resolve),r=[],s=0,o=1;_(e,(function(e){var l=s++,c=!1;r.push(void 0),o++,n.call(t,e).then((function(e){c||(c=!0,r[l]=e,--o||i(r))}),a)})),--o||i(r)}));return r.error&&a(r.value),n.promise},race:function(e){var t=this,n=F(t),i=n.reject,a=T((function(){var a=y(t.resolve);_(e,(function(e){a.call(t,e).then(n.resolve,i)}))}));return a.error&&i(a.value),n.promise}})},6209:function(e,t,n){var i=n(294),a=n(3123),r=n(1095),s=n(1919),o=n(1778).f,l=n(4717).f,c=n(7306),u=n(5081),d=n(7425),f=n(1203),p=n(6006),g=n(6174).set,v=n(5231),h=n(3459)("match"),y=a.RegExp,m=y.prototype,k=/a/g,_=/a/g,b=new y(k)!==k,S=d.UNSUPPORTED_Y;if(i&&r("RegExp",!b||S||p((function(){return _[h]=!1,y(k)!=k||y(_)==_||"/a/i"!=y(k,"i")})))){for(var E=function(e,t){var n,i=this instanceof E,a=c(e),r=void 0===t;if(!i&&a&&e.constructor===E&&r)return e;b?a&&!r&&(e=e.source):e instanceof E&&(r&&(t=u.call(e)),e=e.source),S&&(n=!!t&&t.indexOf("y")>-1)&&(t=t.replace(/y/g,""));var o=s(b?new y(e,t):y(e,t),i?this:m,E);return S&&n&&g(o,{sticky:n}),o},x=function(e){e in E||o(E,e,{configurable:!0,get:function(){return y[e]},set:function(t){y[e]=t}})},w=l(y),I=0;w.length>I;)x(w[I++]);m.constructor=E,E.prototype=m,f(a,"RegExp",E)}v("RegExp")},3299:function(e,t,n){"use strict";var i=n(4059),a=n(8324);i({target:"RegExp",proto:!0,forced:/./.exec!==a},{exec:a})},1206:function(e,t,n){"use strict";var i=n(1203),a=n(8),r=n(6006),s=n(5081),o="toString",l=RegExp.prototype,c=l.toString,u=r((function(){return"/a/b"!=c.call({source:"a",flags:"b"})})),d=c.name!=o;(u||d)&&i(RegExp.prototype,o,(function(){var e=a(this),t=String(e.source),n=e.flags;return"/"+t+"/"+String(void 0===n&&e instanceof RegExp&&!("flags"in l)?s.call(e):n)}),{unsafe:!0})},9676:function(e,t,n){"use strict";var i,a=n(4059),r=n(662).f,s=n(4807),o=n(7053),l=n(7154),c=n(8121),u=n(9261),d="".endsWith,f=Math.min,p=c("endsWith");a({target:"String",proto:!0,forced:!(!u&&!p&&(i=r(String.prototype,"endsWith"),i&&!i.writable)||p)},{endsWith:function(e){var t=String(l(this));o(e);var n=arguments.length>1?arguments[1]:void 0,i=s(t.length),a=void 0===n?i:f(s(n),i),r=String(e);return d?d.call(t,r,a):t.slice(a-r.length,a)===r}})},1636:function(e,t,n){"use strict";var i=n(5453),a=n(8),r=n(4807),s=n(2195),o=n(7154),l=n(9429),c=n(595),u=n(4177),d=Math.max,f=Math.min;i("replace",2,(function(e,t,n,i){var p=i.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,g=i.REPLACE_KEEPS_$0,v=p?"$":"$0";return[function(n,i){var a=o(this),r=null==n?void 0:n[e];return void 0!==r?r.call(n,a,i):t.call(String(a),n,i)},function(e,i){if(!p&&g||"string"==typeof i&&-1===i.indexOf(v)){var o=n(t,e,this,i);if(o.done)return o.value}var h=a(e),y=String(this),m="function"==typeof i;m||(i=String(i));var k=h.global;if(k){var _=h.unicode;h.lastIndex=0}for(var b=[];;){var S=u(h,y);if(null===S)break;if(b.push(S),!k)break;""===String(S[0])&&(h.lastIndex=l(y,r(h.lastIndex),_))}for(var E,x="",w=0,I=0;I<b.length;I++){S=b[I];for(var P=String(S[0]),T=d(f(s(S.index),y.length),0),C=[],A=1;A<S.length;A++)C.push(void 0===(E=S[A])?E:String(E));var R=S.groups;if(m){var O=[P].concat(C,T,y);void 0!==R&&O.push(R);var L=String(i.apply(void 0,O))}else L=c(P,y,T,C,R,i);T>=w&&(x+=y.slice(w,T)+L,w=T+P.length)}return x+y.slice(w)}]}))},7741:function(e,t,n){"use strict";var i=n(5453),a=n(7306),r=n(8),s=n(7154),o=n(4062),l=n(9429),c=n(4807),u=n(4177),d=n(8324),f=n(6006),p=[].push,g=Math.min,v=4294967295,h=!f((function(){return!RegExp(v,"y")}));i("split",2,(function(e,t,n){var i;return i="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,n){var i=String(s(this)),r=void 0===n?v:n>>>0;if(0===r)return[];if(void 0===e)return[i];if(!a(e))return t.call(i,e,r);for(var o,l,c,u=[],f=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),g=0,h=new RegExp(e.source,f+"g");(o=d.call(h,i))&&!((l=h.lastIndex)>g&&(u.push(i.slice(g,o.index)),o.length>1&&o.index<i.length&&p.apply(u,o.slice(1)),c=o[0].length,g=l,u.length>=r));)h.lastIndex===o.index&&h.lastIndex++;return g===i.length?!c&&h.test("")||u.push(""):u.push(i.slice(g)),u.length>r?u.slice(0,r):u}:"0".split(void 0,0).length?function(e,n){return void 0===e&&0===n?[]:t.call(this,e,n)}:t,[function(t,n){var a=s(this),r=null==t?void 0:t[e];return void 0!==r?r.call(t,a,n):i.call(String(a),t,n)},function(e,a){var s=n(i,e,this,a,i!==t);if(s.done)return s.value;var d=r(e),f=String(this),p=o(d,RegExp),y=d.unicode,m=(d.ignoreCase?"i":"")+(d.multiline?"m":"")+(d.unicode?"u":"")+(h?"y":"g"),k=new p(h?d:"^(?:"+d.source+")",m),_=void 0===a?v:a>>>0;if(0===_)return[];if(0===f.length)return null===u(k,f)?[f]:[];for(var b=0,S=0,E=[];S<f.length;){k.lastIndex=h?S:0;var x,w=u(k,h?f:f.slice(S));if(null===w||(x=g(c(k.lastIndex+(h?0:S)),f.length))===b)S=l(f,S,y);else{if(E.push(f.slice(b,S)),E.length===_)return E;for(var I=1;I<=w.length-1;I++)if(E.push(w[I]),E.length===_)return E;S=b=x}}return E.push(f.slice(b)),E}]}),!h)},7681:function(e,t,n){"use strict";var i=n(9645),a=n(4382),r=i.aTypedArray;(0,i.exportTypedArrayMethod)("copyWithin",(function(e,t){return a.call(r(this),e,t,arguments.length>2?arguments[2]:void 0)}))},5756:function(e,t,n){"use strict";var i=n(9645),a=n(5626).every,r=i.aTypedArray;(0,i.exportTypedArrayMethod)("every",(function(e){return a(r(this),e,arguments.length>1?arguments[1]:void 0)}))},4375:function(e,t,n){"use strict";var i=n(9645),a=n(3402),r=i.aTypedArray;(0,i.exportTypedArrayMethod)("fill",(function(e){return a.apply(r(this),arguments)}))},8076:function(e,t,n){"use strict";var i=n(9645),a=n(5626).filter,r=n(4062),s=i.aTypedArray,o=i.aTypedArrayConstructor;(0,i.exportTypedArrayMethod)("filter",(function(e){for(var t=a(s(this),e,arguments.length>1?arguments[1]:void 0),n=r(this,this.constructor),i=0,l=t.length,c=new(o(n))(l);l>i;)c[i]=t[i++];return c}))},8723:function(e,t,n){"use strict";var i=n(9645),a=n(5626).findIndex,r=i.aTypedArray;(0,i.exportTypedArrayMethod)("findIndex",(function(e){return a(r(this),e,arguments.length>1?arguments[1]:void 0)}))},9596:function(e,t,n){"use strict";var i=n(9645),a=n(5626).find,r=i.aTypedArray;(0,i.exportTypedArrayMethod)("find",(function(e){return a(r(this),e,arguments.length>1?arguments[1]:void 0)}))},781:function(e,t,n){"use strict";var i=n(9645),a=n(5626).forEach,r=i.aTypedArray;(0,i.exportTypedArrayMethod)("forEach",(function(e){a(r(this),e,arguments.length>1?arguments[1]:void 0)}))},365:function(e,t,n){"use strict";var i=n(9645),a=n(7149).includes,r=i.aTypedArray;(0,i.exportTypedArrayMethod)("includes",(function(e){return a(r(this),e,arguments.length>1?arguments[1]:void 0)}))},3632:function(e,t,n){"use strict";var i=n(9645),a=n(7149).indexOf,r=i.aTypedArray;(0,i.exportTypedArrayMethod)("indexOf",(function(e){return a(r(this),e,arguments.length>1?arguments[1]:void 0)}))},7454:function(e,t,n){"use strict";var i=n(3123),a=n(9645),r=n(1631),s=n(3459)("iterator"),o=i.Uint8Array,l=r.values,c=r.keys,u=r.entries,d=a.aTypedArray,f=a.exportTypedArrayMethod,p=o&&o.prototype[s],g=!!p&&("values"==p.name||null==p.name),v=function(){return l.call(d(this))};f("entries",(function(){return u.call(d(this))})),f("keys",(function(){return c.call(d(this))})),f("values",v,!g),f(s,v,!g)},5129:function(e,t,n){"use strict";var i=n(9645),a=i.aTypedArray,r=i.exportTypedArrayMethod,s=[].join;r("join",(function(e){return s.apply(a(this),arguments)}))},3496:function(e,t,n){"use strict";var i=n(9645),a=n(3505),r=i.aTypedArray;(0,i.exportTypedArrayMethod)("lastIndexOf",(function(e){return a.apply(r(this),arguments)}))},3158:function(e,t,n){"use strict";var i=n(9645),a=n(5626).map,r=n(4062),s=i.aTypedArray,o=i.aTypedArrayConstructor;(0,i.exportTypedArrayMethod)("map",(function(e){return a(s(this),e,arguments.length>1?arguments[1]:void 0,(function(e,t){return new(o(r(e,e.constructor)))(t)}))}))},362:function(e,t,n){"use strict";var i=n(9645),a=n(1189).right,r=i.aTypedArray;(0,i.exportTypedArrayMethod)("reduceRight",(function(e){return a(r(this),e,arguments.length,arguments.length>1?arguments[1]:void 0)}))},2526:function(e,t,n){"use strict";var i=n(9645),a=n(1189).left,r=i.aTypedArray;(0,i.exportTypedArrayMethod)("reduce",(function(e){return a(r(this),e,arguments.length,arguments.length>1?arguments[1]:void 0)}))},5677:function(e,t,n){"use strict";var i=n(9645),a=i.aTypedArray,r=i.exportTypedArrayMethod,s=Math.floor;r("reverse",(function(){for(var e,t=this,n=a(t).length,i=s(n/2),r=0;r<i;)e=t[r],t[r++]=t[--n],t[n]=e;return t}))},8689:function(e,t,n){"use strict";var i=n(9645),a=n(4807),r=n(6924),s=n(4119),o=n(6006),l=i.aTypedArray;(0,i.exportTypedArrayMethod)("set",(function(e){l(this);var t=r(arguments.length>1?arguments[1]:void 0,1),n=this.length,i=s(e),o=a(i.length),c=0;if(o+t>n)throw RangeError("Wrong length");for(;c<o;)this[t+c]=i[c++]}),o((function(){new Int8Array(1).set({})})))},1926:function(e,t,n){"use strict";var i=n(9645),a=n(4062),r=n(6006),s=i.aTypedArray,o=i.aTypedArrayConstructor,l=i.exportTypedArrayMethod,c=[].slice;l("slice",(function(e,t){for(var n=c.call(s(this),e,t),i=a(this,this.constructor),r=0,l=n.length,u=new(o(i))(l);l>r;)u[r]=n[r++];return u}),r((function(){new Int8Array(1).slice()})))},2072:function(e,t,n){"use strict";var i=n(9645),a=n(5626).some,r=i.aTypedArray;(0,i.exportTypedArrayMethod)("some",(function(e){return a(r(this),e,arguments.length>1?arguments[1]:void 0)}))},3175:function(e,t,n){"use strict";var i=n(9645),a=i.aTypedArray,r=i.exportTypedArrayMethod,s=[].sort;r("sort",(function(e){return s.call(a(this),e)}))},9129:function(e,t,n){"use strict";var i=n(9645),a=n(4807),r=n(4951),s=n(4062),o=i.aTypedArray;(0,i.exportTypedArrayMethod)("subarray",(function(e,t){var n=o(this),i=n.length,l=r(e,i);return new(s(n,n.constructor))(n.buffer,n.byteOffset+l*n.BYTES_PER_ELEMENT,a((void 0===t?i:r(t,i))-l))}))},3809:function(e,t,n){"use strict";var i=n(3123),a=n(9645),r=n(6006),s=i.Int8Array,o=a.aTypedArray,l=a.exportTypedArrayMethod,c=[].toLocaleString,u=[].slice,d=!!s&&r((function(){c.call(new s(1))}));l("toLocaleString",(function(){return c.apply(d?u.call(o(this)):o(this),arguments)}),r((function(){return[1,2].toLocaleString()!=new s([1,2]).toLocaleString()}))||!r((function(){s.prototype.toLocaleString.call([1,2])})))},7842:function(e,t,n){"use strict";var i=n(9645).exportTypedArrayMethod,a=n(6006),r=n(3123).Uint8Array,s=r&&r.prototype||{},o=[].toString,l=[].join;a((function(){o.call({})}))&&(o=function(){return l.call(this)});var c=s.toString!=o;i("toString",o,c)},5443:function(e,t,n){n(9594)("Uint8",(function(e){return function(t,n,i){return e(this,t,n,i)}}))},1491:function(e,t,n){var i=n(3123),a=n(7275),r=n(6447),s=n(3326);for(var o in a){var l=i[o],c=l&&l.prototype;if(c&&c.forEach!==r)try{s(c,"forEach",r)}catch(e){c.forEach=r}}},8304:function(e,t,n){var i=n(4059),a=n(3123),r=n(8504),s=[].slice,o=function(e){return function(t,n){var i=arguments.length>2,a=i?s.call(arguments,2):void 0;return e(i?function(){("function"==typeof t?t:Function(t)).apply(this,a)}:t,n)}};i({global:!0,bind:!0,forced:/MSIE .\./.test(r)},{setTimeout:o(a.setTimeout),setInterval:o(a.setInterval)})},9011:function(e,t){"use strict";function n(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}Object.defineProperty(t,"__esModule",{value:!0}),t.keyLogin=void 0;var i=function(){function e(t,n,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.dialog=i,this.http=n,this.pub=t}var t,i;return t=e,(i=[{key:"mask_begin",value:function(e){this.mask_begin_call=e}},{key:"mask_end",value:function(e){this.mask_end_call=e}},{key:"setHiddenSealAddJson",value:function(e){this.hiddenSealAddJson=e}},{key:"login",value:function(e,t){var n=this;this.http.key_list((function(i,a){i?(n.pub.isType(n.mask_end_call,"function")&&n.mask_end_call(),n.dialog.keyLogin(a,(function(i,a){n.pub.isType(n.mask_begin_call,"function")&&n.mask_begin_call();var r={};r.id=i,r.pwd=a,"2"==t?e(!0,r):n.http.key_login(r,(function(t,n){e(t,n)}))}))):e(!1,a)}))}},{key:"sealList",value:function(e){var t=this;this.http.key_seal_list("1",(function(n,i){if(n){var a=JSON.parse(i),r=a.sealInfos;0==r.length?e(!1,"获取印章列表为空"):(t.pub.isType(t.mask_end_call,"function")&&t.mask_end_call(),t.dialog.keySealList(r,(function(n){t.pub.isType(t.mask_begin_call,"function")&&t.mask_begin_call(),n.certData=a.certData,e(!0,n)}),null,t.hiddenSealAddJson))}else e(!1,i)}))}}])&&n(t.prototype,i),e}();t.keyLogin=i},3920:function(e,t){"use strict";function n(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}Object.defineProperty(t,"__esModule",{value:!0}),t.loginClass=void 0;var i=function(){function e(t,n,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.dialog=i,this.http=n,this.pub=t,this.appId="",this.time=30,this.type="0"}var t,i;return t=e,(i=[{key:"init",value:function(e,t,n){this.appId=e,this.pub.isType(t,"number")&&(t>=0||t<=60)&&(this.time=t),kinsecLog.log(this.time),0==t&&this.delToken(),!n||"1"!=n&&"2"!=n||(this.type=n),kinsecLog.log(this.type)}},{key:"mask_begin",value:function(e){this.mask_begin_call=e}},{key:"mask_end",value:function(e){this.mask_end_call=e}},{key:"getToken",value:function(e){var t="",n=localStorage.getItem("kinsec_token");if(kinsecLog.log(n),!this.pub.isEmpty(n)){var i=JSON.parse(n);e==i.idCard&&(kinsecLog.log(i.time-(new Date).getTime()/1e3),i.time>(new Date).getTime()/1e3&&(t=i.token))}return t}},{key:"setToken",value:function(e,t,n){var i={};i.idCard=e,i.token=t,i.time=n,localStorage.setItem("kinsec_token",JSON.stringify(i))}},{key:"delToken",value:function(){localStorage.removeItem("kinsec_token")}},{key:"_cloud_sign_type",value:function(e,t){var n=this.type;"0"==n?this.http.getType(e,this.appId,(function(e,n){e?t(!0,"2"==n?"2":"1"):t(!1,n)})):t(!0,"1"==n||"2"==n?n:"1")}},{key:"htjc",value:function(e,t){var n=this;this.pub.isType(this.mask_end_call,"function")&&this.mask_end_call(),this.dialog.htjc((function(i){n.pub.isType(n.mask_begin_call,"function")&&n.mask_begin_call(),n.http.htjc(e,i,n.time,n.appId,(function(i,a){if(i){var r=JSON.parse(a);n.time>0&&n.setToken(e,r.token,(new Date).getTime()/1e3+60*n.time-10),t(i,r.token)}else t(i,a)}))}))}},{key:"pwd",value:function(e,t){var n=this;this.pub.isType(this.mask_end_call,"function")&&this.mask_end_call(),this.dialog.pwd((function(i){n.pub.isType(n.mask_begin_call,"function")&&n.mask_begin_call(),n.http.pwd(e,i,n.time,n.appId,(function(i,a){if(i){var r=JSON.parse(a);n.time>0&&n.setToken(e,r.token,(new Date).getTime()/1e3+60*n.time-10),t(i,r.token)}else t(i,a)}))}))}},{key:"loginRun",value:function(e,t){var n=this;this._cloud_sign_type(e,(function(i,a){i?"2"==a?n.pwd(e,(function(e,n){t(e,n)})):n.htjc(e,(function(e,n){t(e,n)})):(n.pub.isType(n.mask_begin_call,"function")&&n.mask_end_call(),t(i,a))}))}},{key:"login",value:function(e,t,n){if(t)this.loginRun(e,n);else{var i=this.getToken(e);this.pub.isEmpty(i)?this.loginRun(e,n):n(!0,i)}}},{key:"htjc_login",value:function(e,t,n){var i=this;this.pub.isType(this.mask_begin_call,"function")&&this.mask_begin_call(),this.htjc(e,(function(e,a){e?i.http.sign(t,a,(function(e,t){n(e,t),i.pub.isType(i.mask_end_call,"function")&&i.mask_end_call()})):(n(e,a),i.pub.isType(i.mask_end_call,"function")&&i.mask_end_call())}))}}])&&n(t.prototype,i),e}();t.loginClass=i},1131:function(e,t,n){"use strict";function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}n(8847),n(9251),n(3299),n(7741),n(1491),n(8304),Object.defineProperty(t,"__esModule",{value:!0}),t.loginDialog=void 0;var a=function(){function e(t,n,i,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.pub=t,this.http=n,this.login=i,this.qrcodeServer=a,this.dialog=null,this.isShow=!1,this.isCall=!1,this.bodyDiv=null,this.titleSpan=null}var t,n;return t=e,(n=[{key:"setDialog",value:function(e){this.dialog=e}},{key:"mask_begin",value:function(e){this.mask_begin_call=e}},{key:"mask_end",value:function(e){this.mask_end_call=e}},{key:"mask_begin_run",value:function(){this.pub.isType(this.mask_begin_call,"function")&&this.mask_begin_call()}},{key:"mask_end_run",value:function(){this.pub.isType(this.mask_end_call,"function")&&this.mask_end_call()}},{key:"open",value:function(e,t,n){var i=this;this.isShow&&this.close(!1),this.isShow=!0,this.isCall=!1;var a=document.createElement("div");a.setAttribute("id","kinsec_msg__wrap_id"),a.setAttribute("class","kinsec_msg__wrap");var r=document.createElement("div");r.setAttribute("class","msg-header");var s=document.createElement("span");this.titleSpan=s,s.innerHTML=e;var o=document.createElement("span");o.setAttribute("class","msg-header-close-button"),o.innerHTML="×",r.appendChild(s),r.appendChild(o);var l=document.createElement("div");this.bodyDiv=l,l.setAttribute("class","msg-body"),l.innerHTML='<div class="msg-body-content">'+t+"</div>";var c=document.createElement("div");c.setAttribute("class","kinsec_msg__overlay"),this.wrap=a,this.overlay=c,o.addEventListener("click",(function(e){i.close(!1),i.pub.isType(n,"function")&&n(!1,"取消操作")})),a.appendChild(r),a.appendChild(l),document.body.appendChild(a),document.body.appendChild(c),setTimeout((function(){a.style.transform="translate(-50%,-50%) scale(1,1)",c.style.opacity="1"}),100)}},{key:"reOpen",value:function(e,t){this.isShow&&null!=this.titleSpan&&document.getElementById("kinsec_msg__wrap_id")?(this.titleSpan.innerHTML=e,this.bodyDiv.innerHTML=t):this.open(e,t)}},{key:"close",value:function(e){this.wrap.remove(),this.overlay.remove(),this.isShow=!1,this.isCall=e,this.pub.isEmpty(this.kinsec_sett)||window.clearInterval(this.kinsec_sett),this.pub.isEmpty(this.recorder)||"recording"!=this.recorder.state||this.recorder.stop(),this.pub.isEmpty(this.stream)||this.stream.getTracks().forEach((function(e){e.stop()}))}},{key:"closeAll",value:function(){try{this.isShow&&this.close(),null!=this.dialog&&this.dialog.isShow&&this.dialog.close()}catch(e){kinsecLog.error(e)}}},{key:"video",value:function(e,t){var n=this;try{navigator.mediaDevices.getUserMedia||navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia?this.getUserMedia({audio:!1,video:!0},(function(i){n.pub.isEmpty(n.stream)||n.stream.getTracks().forEach((function(e){e.stop()})),n.stream=i;var a=2,r=document.getElementById("kinsec_video");r.srcObject=i,r.play(),e&&(n.recorder=new MediaRecorder(i,{videoBitsPerSecond:8e5,mimeType:"video/webm;codecs=vp8"}),n.recorder.ondataavailable=function(e){var i=e.data,a=new FileReader;a.onload=function(e){null==n.kinsec_sett&&t(a.result)},a.readAsDataURL(i)},n.recorder.start(),e.disabled=!0,e.innerHTML="停止录制倒计时3",n.kinsec_sett=window.setInterval((function(){e.innerHTML="停止录制倒计时"+a,0==a&&(e.disabled=!1,e.innerHTML="开始录制",a=2,window.clearInterval(n.kinsec_sett),n.kinsec_sett=null,r.pause(),n.recorder.stop(),i.getTracks().forEach((function(e){e.stop()}))),a--}),1e3))}),(function(e){console.error(e),alert("访问媒体设备失败："+e.message+",请使用谷歌浏览器或者火狐浏览器,并允许打开摄像头")})):(alert("不支持访问用户媒体,请使用谷歌浏览器或者火狐浏览器"),this.close(!0))}catch(e){kinsecLog.error(e),alert("不支持访问用户媒体"),this.close(!0)}}},{key:"getUserMedia",value:function(e,t,n){navigator.mediaDevices.getUserMedia?navigator.mediaDevices.getUserMedia(e).then(t).catch(n):navigator.webkitGetUserMedia?navigator.webkitGetUserMedia(e,t,n):navigator.mozGetUserMedia?navigator.mozGetUserMedia(e,t,n):navigator.getUserMedia&&navigator.getUserMedia(e,t,n)}},{key:"htjc",value:function(e,t,n){var i=this,a='<div class="kinsec_video_content" '+t[0]+">"+e+'<div class="prompt"><div class="prompt-box"><div style="font-size: 20px;">请在对应框中开始录制</div></div><div style="width: 200px; height: 200px; border-radius: 50%; margin: auto; overflow: hidden;margin-top: 20px;"><video  width="270" height="200"  class="kinsec_video_videoel1" id="kinsec_video"></video></div><div style="padding: 30px 30px;"><button id="kinsec_video_lz" style="width: 250px; height: 40px; background: #0073EB;color: white;"  >开始录制</button></div></div></div>';this.reOpen("实人认证",a);var r=document.getElementById("kinsec_video_lz");r.addEventListener("click",(function(e){i.video(r,(function(e){i.close(!0),n(e.split("base64,")[1])}))})),this.video()}},{key:"pwd",value:function(e,t,n){var i=this,a='<div class="kinsec_pwd_content" '+t[0]+">"+e+'<div style="padding: 0 40px 0 40px;"><input type="password" id="kinsec_pwd_val" placeholder="请输入口令"  /></div><div id="kinsec_msg_error" class="msg-error"></div><div class="msg-footer" ><button id="kinsec_pwd_sub" class="msg-footer-btn msg-footer-confirm-button">确认</button><button id="kinsec_pwd_cancel" class="msg-footer-btn msg-footer-cancel-button">取消</button></div></div>';this.reOpen("请输入口令",a);var r=document.getElementById("kinsec_pwd_sub"),s=document.getElementById("kinsec_pwd_cancel");r.addEventListener("click",(function(e){var t=document.getElementById("kinsec_pwd_val").value;i.pub.isEmpty(t)?document.getElementById("kinsec_msg_error").innerHTML="请输入口令":(document.getElementById("kinsec_msg_error").innerHTML="",i.close(!0),n(t))})),s.addEventListener("click",(function(e){i.close(!1)})),document.getElementById("kinsec_pwd_val").focus()}},{key:"qrcode",value:function(e,t,n){var i='<div class="kinsec_mes_content"  '+t[0]+">"+e+'<div id="kinsec_dialog_qrcode" style="width:200px; height:200px;margin-top:-10px;'+t[1]+'"><div></div>';this.reOpen("请扫描二维码",i);var a=document.getElementById("kinsec_dialog_qrcode");new QRCode(a,{width:200,height:200}).makeCode(n)}},{key:"keyLogin",value:function(e,t,n,i){var a=this,r='<div class="kinsec_pwd_content"  '+n[0]+">"+e+'<div  style="padding: 0 40px 0 40px;"><select id="kinsec_key_login_select">';t.forEach((function(e){r+='<option value="'+e.id+'">'+e.name+"</option>"})),r+='</select></div><div style="padding: 0 40px 0 40px;"><input type="password" id="kinsec_key_login_pwd" placeholder="请输入口令"  /></div><div id="kinsec_key_login_msg_error" class="msg-error" style="padding: 0 40px 0 40px;"></div><div class="msg-footer" ><button id="kinsec_key_login_sub" class="msg-footer-btn msg-footer-confirm-button">确认</button><button id="kinsec_key_login_cancel" class="msg-footer-btn msg-footer-cancel-button">取消</button></div></div>',this.reOpen("请输入口令",r);var s=document.getElementById("kinsec_key_login_sub"),o=document.getElementById("kinsec_key_login_cancel");s.addEventListener("click",(function(e){var t=document.getElementById("kinsec_key_login_pwd").value,n=document.getElementById("kinsec_key_login_select").value;a.pub.isEmpty(t)?document.getElementById("kinsec_key_login_msg_error").innerHTML="请输入口令":t.length<2||t.length>16?document.getElementById("kinsec_key_login_msg_error").innerHTML="请输入2到16位的口令":(document.getElementById("kinsec_key_login_msg_error").innerHTML="",a.close(!0),i(n,t))})),o.addEventListener("click",(function(e){a.close(!1)})),document.getElementById("kinsec_key_login_pwd").focus()}},{key:"mes",value:function(e,t,n,i){var a=this,r='<div class="kinsec_mes_content" '+n[0]+">"+e+'<div class="kinsec_mes_content_mes" style="text-align: center;font-size: 17px;">'+t+'</div><div class="msg-footer" style="margin-top:40px;" ><button id="kinsec_mes_retry" class="msg-footer-btn msg-footer-confirm-button">重试</button><button id="kinsec_mes_close" class="msg-footer-btn msg-footer-cancel-button">关闭</button></div></div>';this.reOpen("错误信息",r),document.getElementById("kinsec_mes_close").addEventListener("click",(function(e){a.close()})),document.getElementById("kinsec_mes_retry").addEventListener("click",(function(e){i()}))}},{key:"allLogin",value:function(e,t){var n=this,i=e.type,a=e.idCard,r=e.val,s=e.qrType,o=e.loginType;if(!i||0==i.length||i.length>3||this.pub.judgeArrSame(i))t(!1,"登录类型有误");else{var l=[];l[0]='style="width:350px;"',l[1]="margin-left:75px;",2==i.length&&(l[0]='style="width:300px;"',l[1]="margin-left:50px;");var c=i[0],u="";if(i.length>=2){if(u+='<ul class="kinsec_seal_tab_title">',"1"==c)u+='<li class="kinsec_seal_tab_selected" id="kinsec_seal_tab_key">KEY登录</li>';else if("2"==c)u+='<li class="kinsec_seal_tab_selected" id="kinsec_seal_tab_face">人脸认证</li>';else{if("3"!=c)return void t(!1,"登录类型有误");u+='<li class="kinsec_seal_tab_selected" id="kinsec_seal_tab_qr">扫码认证</li>'}for(var d,f=1;f<i.length;f++)if("1"==(d=i[f]))u+='<li id="kinsec_seal_tab_key">KEY登录</li>';else if("2"==d)u+='<li id="kinsec_seal_tab_face">人脸认证</li>';else{if("3"!=d)return void t(!1,"登录类型有误");u+='<li id="kinsec_seal_tab_qr">扫码认证</li>'}u+="</ul>"}var p=function(){var e={},t=document.getElementById("kinsec_seal_tab_key"),i=document.getElementById("kinsec_seal_tab_face"),a=document.getElementById("kinsec_seal_tab_qr");return e.key=t,e.face=i,e.qr=a,n.pub.isEmpty(t)||t.addEventListener("click",(function(){n.mask_begin_run(),g((function(e){n.pub.isEmpty(e.key)||e.key.setAttribute("class","kinsec_seal_tab_selected"),n.pub.isEmpty(e.face)||e.face.setAttribute("class",""),n.pub.isEmpty(e.qr)||e.qr.setAttribute("class","")}))})),n.pub.isEmpty(i)||i.addEventListener("click",(function(){n.mask_begin_run(),v((function(e){n.pub.isEmpty(e.key)||e.key.setAttribute("class",""),n.pub.isEmpty(e.face)||e.face.setAttribute("class","kinsec_seal_tab_selected"),n.pub.isEmpty(e.qr)||e.qr.setAttribute("class","")}))})),n.pub.isEmpty(a)||a.addEventListener("click",(function(){n.mask_begin_run(),h((function(e){n.pub.isEmpty(e.key)||e.key.setAttribute("class",""),n.pub.isEmpty(e.face)||e.face.setAttribute("class",""),n.pub.isEmpty(e.qr)||e.qr.setAttribute("class","kinsec_seal_tab_selected")}))})),e},g=function e(i){n.http.keySign("111",(function(a,r){if(a){n.closeAll();t(a,{type:"1"})}else{if("NotLoggedIn"!=r){n.mask_end_run(),n.mes(u,r,l,e);var s=p();return void(i&&i(s))}n.http.key_list((function(a,r){if(a){n.mask_end_run(),n.keyLogin(u,r,l,(function(e,i){n.pub.isType(n.mask_begin_call,"function")&&n.mask_begin_call();var a={};a.id=e,a.pwd=i,n.mask_begin_run(),n.http.key_login(a,(function(e,n){if(e){t(e,{type:"1"})}else t(e,n)}))}));var s=p();i&&i(s)}else{n.mask_end_run(),n.mes(u,r,l,e);var o=p();i&&i(o)}}))}}),"2")},v=function e(i){var r=n.login.getToken(a);if(!n.pub.isEmpty(r)){n.closeAll();var s={type:"2"};return s.token=r,void t(!0,s)}n.login._cloud_sign_type(a,(function(r,s){if(r){n.mask_end_run(),"2"==s?n.pwd(u,l,(function(e){n.mask_begin_run(),n.http.pwd(a,e,n.login.time,n.login.appId,(function(e,i){if(e){var r=JSON.parse(i);n.login.time>0&&n.login.setToken(a,r.token,(new Date).getTime()/1e3+60*n.login.time-10);var s={};s.token=r.token,s.type="2",t(e,s)}else t(e,i)}))})):n.htjc(u,l,(function(e){n.mask_begin_run(),n.http.htjc(a,e,n.login.time,n.login.appId,(function(e,i){if(e){var r=JSON.parse(i);n.login.time>0&&n.login.setToken(a,r.token,(new Date).getTime()/1e3+60*n.login.time-10);var s={};s.token=r.token,s.type="2",t(e,s)}else t(e,i)}))}));var o=p();i&&i(o)}else{n.mask_end_run(),n.mes(u,s,l,e);var c=p();i&&i(c)}}))},h=function e(i){if("1"==o){var a={};a.val=r,a.type=s,n.qrcodeServer.qrcode(a,(function(e,i){if(n.mask_begin_run(),e){var a=n.pub.convertJson(i),r={type:"3"};r.data=a,t(e,r)}else t(e,i)}),(function(t,a){if(n.mask_end_run(),t){n.qrcode(u,l,a);var r=p();i&&i(r)}else{n.mask_end_run(),n.mes(u,a,l,e);var s=p();i&&i(s)}}))}else"2"==o?n.qrcodeServer.qrEnc(r,(function(e,i){if(n.mask_begin_run(),e){var a={type:"3"};a.data=i,t(e,a)}else t(e,i)}),(function(t,a){if(n.mask_end_run(),t){n.qrcode(u,l,a);var r=p();i&&i(r)}else{n.mask_end_run(),n.mes(u,a,l,e);var s=p();i&&i(s)}})):"3"==o?n.qrcodeServer.qrSign(r,(function(e,i){if(n.mask_begin_run(),e){var a={type:"3"};a.data=n.pub.convertJson(i),t(e,a)}else t(e,i)}),(function(t,a){if(n.mask_end_run(),t){n.qrcode(u,l,a);var r=p();i&&i(r)}else{n.mask_end_run(),n.mes(u,a,l,e);var s=p();i&&i(s)}})):t(!1,"扫码未知的类型")};if("2"==c)v();else if("1"==c)g();else{if("3"!=c)return void t(!1,"登录类型有误");h()}}}}])&&i(t.prototype,n),e}();t.loginDialog=a},3750:function(e,t,n){"use strict";n(8847),n(4917),n(7699),n(9087),n(8228),n(3299),n(1636),n(1491),n(8304),Object.defineProperty(t,"__esModule",{value:!0}),t.htmlSeal=void 0;var i=n(8543),a=n(1468),r=n(4251),s=n(3920),o=n(1813),l=n(3796),c=n(6395),u=n(4540),d=n(2935),f=n(1131),p=n(3279);function g(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var v=new i.pubClass,h=null,y=null,m=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.path=t,this.initState=!1,this.appId="",this.initTime=0,this.seals=[],this.DelState=!0,this.verifyState=!0,this.dialog=new o.dialog(v),this.md5=new l.md5,this.loading=new c.loading,this.base64=new a.base64,this.callVal=new d.callVal,this.pub=v,this.syncApi=new p.syncApi(v);(h=new r.httpClass(v,this.dialog)).setHiddenSealAddJson({addQf:!0}),this.clientHttp=h,y=new s.loginClass(v,h,this.dialog),this.qrcodeServer=new u.qrcodeServer(v,h),this.loginDialog=new f.loginDialog(v,h,y,this.qrcodeServer),this.loginDialog.setDialog(this.dialog),this.dialog.setLoginDialog(this.loginDialog),this.dialog.setPath(this.path),this.mask_begin_call=function(){n.loading.open()},this.mask_end_call=function(){n.loading.close()},y.mask_begin(this.mask_begin_call),y.mask_end(this.mask_end_call),h.mask_begin(this.mask_begin_call),h.mask_end(this.mask_end_call),this.qrcodeServer.set_mask_begin(this.mask_begin_call),this.qrcodeServer.set_mask_end(this.mask_end_call),this.loginDialog.mask_begin(this.mask_begin_call),this.loginDialog.mask_end(this.mask_end_call)}var t,n;return t=e,(n=[{key:"dataInit",value:function(){this.DelState=!0,this.verifyState=!0}},{key:"setDelState",value:function(e){this.DelState=e}},{key:"setVerifyState",value:function(e){this.verifyState=e}},{key:"init",value:function(){var e=(new Date).getTime();this.initState&&e-this.initTime<=1e3||(this._initDiv(),this.initTime=e)}},{key:"initA",value:function(e,t,n){return y.init(e,t,n),this.init(),this.callVal.str0000Succ()}},{key:"initB",value:function(e,t){return this.qrcodeServer.init(e,"1",this.dialog,t),this.init(),this.callVal.str0000Succ()}},{key:"initC",value:function(e){var t="",n="";if(v.isEmpty(e)||v.isType(e,"string"))v.isEmpty(e)||(t=e);else{var i=v.convertJson(e);v.isEmpty(i.keyShield)||(t=i.keyShield),n=i.areaCode}return h.setShield(t),h.setAreaCode(n),this.init(),this.callVal.str0000Succ()}},{key:"initHtml",value:function(e){var t,n=(t=v.isType(e,"string")?JSON.parse(e):e).type,i=t.appId,a=t.time,r=t.timeout;return h.setTimeout(r),this.qrcodeServer.setTimeout(r),"1"==n?this.initC(t):"2"==n?this.initA(i,a):"3"==n?this.initB(i):(kinsecLog.error("初始化:未知的类型"),this.callVal.str0001("未知的类型"))}},{key:"_initDiv",value:function(){for(var e=this,t=v.getClass("div","kinsec_seal"),n=function(n){var i=t[n];e._initBind(i),setTimeout((function(){e._bindSelect(i)}),10)},i=0;i<t.length;i++)n(i);this.initState=!0,setTimeout((function(){e._initCheck(t,null)}),100)}},{key:"_initBind",value:function(e){var t=this;this.seals.indexOf(e)>=0||("undefined"!=typeof MutationObserver?new MutationObserver((function(e,n){e.forEach((function(e){t._bindSelect(e.target)}))})).observe(e,{attributes:!0,attributeFilter:["value"]}):e.addEventListener("DOMAttrModified",(function(e){"value"==e.attrName&&t._bindSelect(e.target)}),!1),this.seals.push(e))}},{key:"_bindSelect",value:function(e){var t=e.getAttribute("value");if(v.isEmpty(t))return e.innerHTML="",e.style.width="0px",void(e.style.height="0px");JSON.parse(t)instanceof Array?this.moreFresh(e):this.fresh(e)}},{key:"_initCheck",value:function(e,t){for(var n=this,i=function(i){var a=e[i];if(""==a.innerHTML)return"continue";var r=a.getAttribute("value");if(v.isEmpty(r))return"continue";var s=a.getElementsByTagName("canvas")[0],o=JSON.parse(r),l=(o.img,o.type),c=o.seal,u=(o.idCard,o.vs,a.getAttribute("digest"));if(v.isEmpty(u)){if("2"==s.getAttribute("state"))return"continue";s.setAttribute("state","2"),n._check_error(s)}else h.yzSeal(l,u,c,(function(i,a,r){if(i);else if(null==t){if("1"!=r)return void(t=window.setInterval((function(){n._initCheck(e,t)}),1e4));if("2"==s.getAttribute("state"))return;s.setAttribute("state","2"),n._check_error(s)}else if("1"==r){if(window.clearInterval(t),t=null,"2"==s.getAttribute("state"))return;s.setAttribute("state","2"),n._check_error(s)}}))},a=0;a<e.length;a++)i(a)}},{key:"_check_error",value:function(e){var t=e.getAttribute("width"),n=e.getAttribute("height"),i=e.getContext("2d");i.beginPath(),i.lineWidth=parseInt(n/3),i.moveTo(2,parseInt(n/2)),i.lineTo(t,parseInt(n/2)),i.strokeStyle="black",i.globalAlpha=.9,i.stroke(),e.nextSibling.setAttribute("src",e.toDataURL("image/png"))}},{key:"fresh",value:function(e){var t=this,n=e;try{n.innerHTML="",n.style.width="",n.style.height="";var i=n.getAttribute("value");if(v.isEmpty(i))return;var a=JSON.parse(i),r=a.img,s=a.type,o=a.seal,l=a.idCard,c=1.25*a.sealPicW,u=1.25*a.sealPicH,d=v.isEmpty(a.vs)?1:parseInt(a.vs),f=a.valArr,p=a.sealId,g=a.txt;if(v.isEmpty(r)||v.isEmpty(s)||v.isEmpty(o)||v.isEmpty(d))return void console.error("请传入指定格式的签章数据");if("2"==s&&v.isEmpty(l))return void console.error("请传入指定格式的签章数据2");if(!v.isEmpty(f)&&f.length>0){var m="";f.forEach((function(e){try{m+=document.getElementById(e).getAttribute("value")}catch(t){console.error("保护数据id不存在--"+e+"--",t)}})),d>=4&&(v.isEmpty(g)||(m+=g),m=this.base64.encode(m)),n.setAttribute("digest",m)}var k=n.getAttribute("width"),_="";Promise.resolve().then((function(){return new Promise((function(e,t){e({})}))})).then((function(e){return new Promise((function(t,n){if(v.isEmpty(g))t(e);else{var i=document.createElement("img");i.src="data:image/png;base64,"+g,i.onload=function(){var n={};n.width=i.width,n.height=i.height,n.img=i,e.txt=n,t(e)}}}))})).then((function(e){var i=document.createElement("img");i.src="data:image/png;base64,"+r,i.onload=function(){var a=0,r=30;v.isEmpty(k)?d>=2?(a=c,r=c==u?parseInt(a/150*r):parseInt(a/250*r),k=a+"px"):(a=i.width==i.height?150:250,k=a+"px"):d>=2?(a=parseInt(k.replace("px","")),r=c==u?parseInt(a/150*r):parseInt(a/250*r)):(a=parseInt(k.replace("px","")),r=i.width==i.height?parseInt(a/150*r):parseInt(a/250*r)),r<30&&(r=30,a<57&&(r=a/2-1));var f=0,g=0;d>=2?(f=u/c,g=parseInt(a)*f):(f=i.height/i.width,g=parseInt(a)*f);var m=g/i.height;i.width=a,i.height=g;var b=4*m,S=0;e.txt&&(S+=b+e.txt.height*m);var E=0+S+b;_=g+E+"px",n.style.width=k,n.style.height=g+r+"px";var x=document.createElement("div");x.style.width=k,x.style.height=r+"px",x.style.visibility="hidden",n.appendChild(x);var w=document.createElement("canvas");w.setAttribute("width",2*a),w.setAttribute("height",2*g+2*E),w.style.width=k,w.style.height=_,w.style.border="1px dotted transparent",w.style.opacity="0.8",w.style.display="none",n.appendChild(w);var I=document.createElement("img");I.style.width=k,I.style.height=_,I.style.border="1px dotted transparent",I.style.opacity="0.8",n.appendChild(I);var P=w.getContext("2d");P.drawImage(i,0,0,2*a,2*g),S>0&&P.drawImage(e.txt.img,0,2*(b+g)+0,2*a,2*S),I.setAttribute("src",w.toDataURL("image/png"));var T=document.createElement("img");T.src=t.path+"assets/img/del.png",T.style.cursor="pointer",T.style.float="right",T.style.display="none",T.style.marginRight="-2px",T.style.width=r+"px",T.style.height=r+"px",t.DelState&&x.appendChild(T);var C=document.createElement("img");C.src=t.path+"assets/img/yz.png",C.style.cursor="pointer",C.style.float="right",C.style.dispaly="none",C.style.marginRight="1px",C.style.width=r+"px",C.style.height=r+"px",t.verifyState&&x.appendChild(C),n.onmouseover=function(e){x.style.visibility="visible",w.style.border="1px dotted blue",I.style.border="1px dotted blue"},n.onmouseout=function(e){x.style.visibility="hidden",w.style.border="1px dotted transparent",I.style.border="1px dotted transparent"};var A=function(){var e=n.getAttribute("digest");v.isEmpty(e)?t.dialog.mes("原文摘要为空"):h.yzSeal(s,e,o,(function(e,n,i){e?t.dialog.yzMes(n):t.dialog.mes(n)}))};I.addEventListener("dblclick",(function(){A()})),C.addEventListener("click",(function(){A()})),T.addEventListener("click",(function(){t._mask_begin();var e=n.getAttribute("digest");if(2==s)y.login(l,!0,(function(i,a){if(i){t._mask_begin();var r=a,s={};s.sourceData=e,s.sourceDataType="0",s.signStamp=o,s.token=a,h.compareCert(s,(function(e,i){if(e){var a=t.md5.md5(o),s=t.base64.encode(a);h.sign(s,r,(function(e,i){t._mask_end(),e?v.isType(t.ywCall,"function")?t.ywCall(n,"2","成功",i,p):t.dialog.mes("删除没有回调"):t.dialog.mes(i)}))}else t._mask_end(),t.dialog.mes(i)}))}else t._mask_end(),t.dialog.mes(a)}));else if("1"==s){var i={};i.sourceData=e,i.sourceDataType="0",i.signStamp=o,h.keyCompareCert(i,(function(e,i){if(e){var a=t.md5.md5(o),r=t.base64.encode(a);h.keySign(r,(function(e,i){t._mask_end(),e?v.isType(t.ywCall,"function")?t.ywCall(n,"2","成功",i,p):t.dialog.mes("删除没有回调"):t.dialog.mes(i)}))}else t._mask_end(),t.dialog.mes(i)}))}else if("3"==s){var a=n.getAttribute("digest");v.isEmpty(a)?t.dialog.mes("原文摘要为空"):h.yzSeal(s,a,o,(function(e,i,a){if(e){var r=i.signcert;t.qrcodeServer.delQrcode(r,o,(function(e,i){e?v.isType(t.ywCall,"function")?t.ywCall(n,"2","成功",i,p):t.dialog.mes("无删除回调"):t.dialog.mes(i)}),(function(e,n){t._mask_end(),e?t.dialog.qrcode(n):t.dialog.mes(n)}))}else t._mask_end(),t.dialog.mes(i)}),"1")}}))}})).catch((function(e){kinsecLog.error(e),n.innerHTML="",n.style.width="",n.style.height=""}))}catch(e){kinsecLog.error(e),n.innerHTML="",n.style.width="",n.style.height=""}}},{key:"moreFresh",value:function(e){var t=this,n=e,i=[];try{var a=n.getAttribute("value"),r=n.getAttribute("width");if(v.isEmpty(a))return;var s=v.getChildren(n,"canvas");!v.isEmpty(s)&&s.length>0&&(n.innerHTML="",n.style.width="",n.style.height="");var o=JSON.parse(a),l=function(e){var a;a=v.isType(o[e],"string")?o[e]:JSON.stringify(o[e]);var s=JSON.parse(a);if(i.indexOf(s.sealId)>=0)return"continue";i.push(s.sealId);var l=v.getDomClass(n,"div","kinsec_child_class "+s.sealId);if(!v.isEmpty(l)&&l.length>0)return"continue";var c=document.createElement("div");v.isEmpty(r)||c.setAttribute("width",r),c.setAttribute("value",a),c.setAttribute("class","kinsec_child_class "+s.sealId),c.style.display="inline-block",c.style.marginRight="10px",t.fresh(c),n.appendChild(c),setTimeout((function(){var e=[];e.push(c),t._initCheck(e)}),100)};for(var c in o)l(c)}catch(e){kinsecLog.error(e)}}},{key:"logoutState",value:function(e,t){var n=this;"1"==e?(this._mask_begin(),h.keyLogout((function(e,i){n._mask_end(),e?n.callVal.data0000(t,null):n.callVal.data0001(t,i)}))):"2"==e?(y.delToken(),this.callVal.data0000(t,null)):this.callVal.data0001(t,"未知的类型："+e)}},{key:"html_call",value:function(e){this.ywCall=e}},{key:"stampFresh",value:function(e,t,n){if(v.isEmpty(n))t.setAttribute("value",n);else if("1"==e)t.setAttribute("value",n);else if("2"==e){var i=t.getAttribute("value"),a=[];if(v.isEmpty(i))a.push(n);else{var r=JSON.parse(i);if(r instanceof Array){a=r;var s=t.getAttribute("delValue");if(!v.isEmpty(s)&&JSON.parse(s).length>0)for(var o=JSON.parse(s),l=a.length-1;l>=0;l--){var c;c=v.isType(a[l],"string")?JSON.parse(a[l]):a[l];for(var u=o.length-1;u>=0;u--)if(c.sealId==o[u]){a.splice(l,1),o.splice(u,1);break}if(0==o.length)break}a.push(n)}else a.push(i),a.push(n)}t.setAttribute("value",JSON.stringify(a))}else kinsecLog.error("未知类型")}},{key:"delFresh",value:function(e){var t=e.getAttribute("class");if(!v.isEmpty(t)&&t.indexOf("kinsec_child_class")>=0){var n=e.getAttribute("value"),i=JSON.parse(n),a=e.parentNode,r=a.getAttribute("delValue"),s=[];v.isEmpty(r)||(s=JSON.parse(r)),s.push(i.sealId),a.setAttribute("delValue",JSON.stringify(s)),e.remove()}else e.setAttribute("value","")}},{key:"mask_begin",value:function(e){this.mask_begin_call=e,y.mask_begin(e),this.qrcodeServer.set_mask_begin(e),h.mask_begin(e)}},{key:"mask_end",value:function(e){this.mask_end_call=e,y.mask_end(e),this.qrcodeServer.set_mask_end(e),h.mask_end(e)}},{key:"_mask_begin",value:function(){v.isType(this.mask_begin_call,"function")&&this.mask_begin_call()}},{key:"_mask_end",value:function(){v.isType(this.mask_end_call,"function")&&this.mask_end_call()}},{key:"htjc_login",value:function(e,t,n){y.htjc_login(e,t,n)}},{key:"zjcloud_seal",value:function(e,t,n,i){var a=this;this._mask_begin(),y.login(e,n,(function(n,r){n?h.htmlSignSeal("2",t,r,(function(t,n){if(a._mask_end(),t){var r=JSON.parse(n),s=r.sealPic,o=r.signStamp,l=r.sealPicW,c=r.sealPicH,u=r.sealId,d=r.certSn,f={};f.img=s,f.type="2",f.seal=o,f.sealId=u,f.idCard=e,f.sealPicW=l,f.sealPicH=c,f.vs="4",f.certSn=d;var p=JSON.stringify(f);i(t,p)}else i(t,n)})):(a._mask_end(),i(n,r))}))}},{key:"qr_seal",value:function(e,t){var n=this;this._mask_begin();var i={};i.val=e,this.qrcodeServer.qrcode(i,t,(function(e,i){n._mask_end(),e?n.dialog.qrcode(i):t(e,i)}))}},{key:"key_seal",value:function(e,t){var n=this;this._mask_begin(),h.htmlSignSeal("1",e,null,(function(e,i){if(n._mask_end(),e){var a=JSON.parse(i),r=a.sealPic,s=a.signStamp,o=a.sealPicW,l=a.sealPicH,c=a.sealId,u=a.certSn,d=a.txt,f={};f.img=r,f.type="1",f.seal=s,f.sealId=c,f.sealPicW=o,f.sealPicH=l,f.vs="4",f.certSn=u,v.isEmpty(d)||(f.txt=d);var p=JSON.stringify(f);t(e,p)}else t(e,i)}))}},{key:"key_seal_more",value:function(e,t){var n=this;this._mask_begin();for(var i=null,a=null,r=Promise.resolve(),s=function(t){var s=e[t];r=r.then((function(e){return new Promise((function(t,r){if(null==a)h.htmlSignSeal("1",s,null,(function(e,n){if(e){var s=JSON.parse(n),o=s.sealPic,l=s.signStamp,c=s.sealPicW,u=s.sealPicH,d=s.sealId,f=s.certSn,p=s.dataJson,g=s.txt,h={};h.img=o,h.type="1",h.seal=l,h.sealId=d,h.sealPicW=c,h.sealPicH=u,h.vs="4",h.certSn=f,v.isEmpty(g)||(h.txt=g,p.txt=g);var y=JSON.stringify(h),m=[];m.push(y),i=p,a=p.sealData,t(m)}else r(n)}));else{var o={};o.sealData=a;var l=n.base64.decode(s),c=i.txt;v.isEmpty(c)||(l+=c),s=n.base64.encode(l),h.keySignSeal(s,"0","2",o,(function(n,a){if(n){var s=JSON.parse(a),o={};o.img=i.sealPic,o.type="1",o.seal=s.signStamp,o.sealId=s.GUID,o.sealPicW=parseInt(i.sealPicH/25.4*72),o.sealPicH=parseInt(i.sealPicW/25.4*72),o.vs="4",o.certSn=s.certSn,v.isEmpty(c)||(o.txt=c);var l=JSON.stringify(o);e.push(l),t(e)}else r(a)}))}}))}))},o=0;o<e.length;o++)s(o);r.then((function(e){n._mask_end(),t(!0,e)})).catch((function(e){n._mask_end(),n.pub.isType(e,"string")?t(!1,e):(console.error(e),t(!1,"批量盖章出现异常"))}))}},{key:"key_enc",value:function(e,t,n){var i=this;if(v.isEmpty(e))t(!1,"加密数据为空");else{var a={},r=this.base64.encode(e);a.value=r,a.alg=n||"0x00000401",this._mask_begin(),h.key_enc(a,(function(e,n){if(i._mask_end(),e){var a=JSON.parse(n);t(!0,a.strEncDataB64)}else t(e,n)}))}}},{key:"key_dec",value:function(e,t){var n=this;if(v.isEmpty(e))t(!1,"解密数据为空");else{this._mask_begin();var i={};i.value=e,h.key_dec(i,(function(e,i){if(n._mask_end(),e){var a=JSON.parse(i),r=n.base64.decode(a.strSrcDataB64);t(!0,r)}else t(e,i)}))}}},{key:"qr_enc",value:function(e,t){var n=this;v.isEmpty(e)?t(!1,"加密数据为空"):(this._mask_begin(),this.qrcodeServer.qrEnc(e,t,(function(e,i){n._mask_end(),e?n.dialog.qrcode(i):t(e,i)})))}},{key:"qr_dec",value:function(e,t){var n=this;v.isEmpty(e)?t(!1,"加密数据为空"):(this._mask_begin(),this.qrcodeServer.qrDec(e,t,(function(e,i){n._mask_end(),e?n.dialog.qrcode(i):t(e,i)})))}},{key:"key_cert",value:function(e){var t=this;this._mask_begin(),h.key_seal_list("0",(function(n,i){t._mask_end(),e(!!n||n,i)}))}},{key:"key_device_id",value:function(e){var t=this;this._mask_begin(),h.key_device_id((function(n,i){t._mask_end(),e(!!n||n,i)}))}},{key:"cm_pc_info",value:function(e){var t=this;this._mask_begin(),h.cm_pc_info((function(n,i){t._mask_end(),e(!!n||n,i)}))}},{key:"getVs",value:function(){return"3.0.0"}},{key:"loadSeals",value:function(e,t){var n=this,i=[];if(e instanceof Array)for(var a in e){var r=e[a],s=document.getElementById(r.signatureId);if(null!=s){this._initBind(s);var o,l=r.signatureData;o=v.isType(l,"string")?l:JSON.stringify(l),s.setAttribute("value",o),i.push(s)}}else for(var c in e){var u=document.getElementById(c);if(null!=u){this._initBind(u);var d,f=e[c];d=v.isType(f,"string")?f:JSON.stringify(f),u.setAttribute("value",d),i.push(u)}}setTimeout((function(){n._initCheck(i,null),t&&t()}),100)}},{key:"loadMoreSeals",value:function(e,t){var n=this,i=[];if(e instanceof Array)for(var a in e){var r=e[a],s=document.getElementById(r.signatureId);if(null!=s){this._initBind(s);var o,l=r.signatureData;o=v.isType(l,"string")?l:JSON.stringify(l),s.setAttribute("value",o),i.push(s)}}else for(var c in e){var u=document.getElementById(c);if(null!=u){this._initBind(u);var d,f=e[c];d=v.isType(f,"string")?f:JSON.stringify(f),u.setAttribute("value",d),i.push(u)}}setTimeout((function(){for(var e=[],a=0;a<i.length;a++){var r=i[a];r.setAttribute("delValue","");for(var s=r.getElementsByTagName("div"),o=0;o<s.length;o++)v.isEmpty(s[o].getAttribute("value"))||e.push(s[o])}n._initCheck(e,null),t&&t()}),100)}},{key:"zjCloudSeal",value:function(e,t,n,i,a){var r=this,s="";n.forEach((function(e){s+=document.getElementById(e).getAttribute("value")}));var o=document.getElementById(t),l=t;this._initBind(o),s=this.base64.encode(s),o.setAttribute("digest",s),this.zjcloud_seal(e,s,i,(function(e,t){if(e){var i={},s=JSON.parse(t);s.valArr=n,s.posId=l;var o=s.sealId,c=s.certSn;i.sealData=s,i.sealId=o,i.certSn=c,r.callVal.data0000(a,i)}else r.callVal.data0001(a,t)}))}},{key:"qrSeal",value:function(e,t,n){var i=this,a="";t.forEach((function(e){a+=document.getElementById(e).getAttribute("value")}));var r=document.getElementById(e),s=e;this._initBind(r),a=this.base64.encode(a),r.setAttribute("digest",a),this.qr_seal(a,(function(e,a){if(e){var r={},o=JSON.parse(a);o.valArr=t,o.posId=s;var l=o.sealId,c=o.certSn;r.sealData=o,r.sealId=l,r.certSn=c,i.callVal.data0000(n,r)}else i.callVal.data0001(n,a)}))}},{key:"keySeal",value:function(e,t,n){var i=this,a="";t.forEach((function(e){a+=document.getElementById(e).getAttribute("value")}));var r=document.getElementById(e),s=e;this._initBind(r),a=this.base64.encode(a),r.setAttribute("digest",a),this.key_seal(a,(function(e,a){if(e){var r={},o=JSON.parse(a);o.valArr=t,o.posId=s;var l=o.sealId,c=o.certSn;r.sealData=o,r.sealId=l,r.certSn=c,i.callVal.data0000(n,r)}else i.callVal.data0001(n,a)}))}},{key:"keySealMore",value:function(e,t){for(var n=this,i=[],a=[],r=[],s=0;s<e.length;s++){var o=e[s],l=o.posId,c=o.valArr;i.push(l),a.push(c);var u="";c.forEach((function(e){u+=document.getElementById(e).getAttribute("value")}));var d=document.getElementById(l);this._initBind(d),u=this.base64.encode(u),d.setAttribute("digest",u),r.push(u)}this.key_seal_more(r,(function(e,r){if(e){for(var s=[],o=0;o<r.length;o++){var l=r[o],c={},u=JSON.parse(l);u.valArr=a[o],u.posId=i[o];var d=u.sealId,f=u.certSn;c.sealData=u,c.sealId=d,c.certSn=f,s.push(c)}var p={};p.array=s,n.callVal.data0000(t,p)}else n.callVal.data0001(t,r)}))}},{key:"sealHtml",value:function(e,t){var n=this,i=v.convertJson(e);if(null!=i){var a=i.sealId,r=v.convertJson(i.valArr),s=i.idCard,o=v.convertJson(i.type);if(v.isEmpty(a)||null==r||null==o)this.callVal.data0001(t,"数据格式有误");else if(1!=o.length){var l="";r.forEach((function(e){l+=document.getElementById(e).getAttribute("value")}));var c=document.getElementById(a),u=a;this._initBind(c),l=this.base64.encode(l),c.setAttribute("digest",l),this._mask_begin(),i.val=l,i.loginType="1",this.loginDialog.allLogin(i,(function(e,i){if(e){var a=i.type;if("1"==a)h.htmlSignSeal("1",l,null,(function(e,i){if(n._mask_end(),e){var a=JSON.parse(i),s=a.sealPic,o=a.signStamp,l=a.sealPicW,c=a.sealPicH,d=a.sealId,f=a.certSn,p=a.txt,g={};g.img=s,g.type="1",g.seal=o,g.sealId=d,g.sealPicW=l,g.sealPicH=c,g.vs="4",g.posId=u,g.certSn=f,v.isEmpty(p)||(g.txt=p);var h={};g.valArr=r,h.sealData=g,h.sealId=d,h.certSn=f,n.callVal.data0000(t,h)}else t(e,i)}));else if("2"==a){var o=i.token;h.htmlSignSeal("2",l,o,(function(e,i){if(n._mask_end(),e){var a=JSON.parse(i),o=a.sealPic,l=a.signStamp,c=a.sealPicW,d=a.sealPicH,f=a.sealId,p=a.certSn,g={};g.img=o,g.type="2",g.seal=l,g.sealId=f,g.idCard=s,g.sealPicW=c,g.sealPicH=d,g.vs="4",g.posId=u,g.certSn=p;var v={};g.valArr=r,v.sealData=g,v.sealId=f,v.certSn=p,n.callVal.data0000(t,v)}else n.callVal.data0001(t,i)}))}else if("3"==a){n._mask_end();var c={},d=i.data;d.valArr=r,d.posId=u;var f=d.sealId,p=d.certSn;c.sealData=d,c.sealId=f,c.certSn=p,n.callVal.data0000(t,c)}else n._mask_end(),n.callVal.data0001(t,"未知的类型")}else n._mask_end(),n.callVal.data0001(t,i)}))}else{var d=o[0];"1"==d?this.keySeal(a,r,t):"2"==d?this.zjCloudSeal(s,a,r,!1,t):"3"==d?this.qrSeal(a,r,t):this.callVal.data0001(t,"未知的类型")}}else this.callVal.data0001(t,"数据格式有误")}},{key:"encHtml",value:function(e,t){var n=this,i=v.convertJson(e);if(null!=i){var a=i.val,r=v.convertJson(i.type);if(v.isEmpty(a)||null==r)this.callVal.data0001(t,"数据格式有误");else if(1!=r.length)r.indexOf("2")>=0||r.indexOf(2)>=0?this.callVal.data0001(t,"人脸认证不支持加密"):(this._mask_begin(),i.val=a,i.loginType="2",this.loginDialog.allLogin(i,(function(e,i){if(e){var r=i.type;if("1"==r){var s={},o=n.base64.encode(a);s.value=o,s.alg="0x00000401",h.key_enc(s,(function(e,i){if(n._mask_end(),e){var a=JSON.parse(i),r={};r.encData=a.strEncDataB64,n.callVal.data0000(t,r)}else n.callVal.data0001(t,i)}))}else if("3"==r){n._mask_end();var l=i.data,c={};c.encData=l,n.callVal.data0000(t,c)}else n._mask_end(),n.callVal.data0001(t,"未知的类型")}else n._mask_end(),n.callVal.data0001(t,i)})));else{var s=r[0];"1"==s?this.keyEnc(a,t):"2"==s?this.callVal.data0001(t,"人脸认证不支持加密"):"3"==s?this.qrEnc(a,t):this.callVal.data0001(t,"未知的类型")}}else this.callVal.data0001(t,"数据格式有误")}},{key:"snHtml",value:function(e,t){var n=this,i=v.convertJson(e);if(null!=i){var a=v.convertJson(i.type);if(null!=a)if(1!=a.length)a.indexOf("2")>=0||a.indexOf(2)>=0?this.callVal.data0001(t,"该方式不支持人脸认证"):(this._mask_begin(),i.val="111",i.loginType="3",this.loginDialog.allLogin(i,(function(e,i){if(e){var a=i.type;if("1"==a){var r=n.base64.encode("111");h.keySign(r,(function(e,i){if(e){var a=JSON.parse(i);h.cmCertInfo("|2|",a.cert,(function(e,i){n._mask_end(),e?(a.certSn=i.certSN,n.callVal.data0000(t,a)):n.callVal.data0001(t,i)}))}else n._mask_end(),n.callVal.data0001(t,i)}))}else if("3"==a){n._mask_end();var s=i.data;n.callVal.data0000(t,s)}else n._mask_end(),n.callVal.data0001(t,"未知的类型")}else n._mask_end(),n.callVal.data0001(t,i)})));else{var r=a[0];"1"==r?this.keySign("111",t):"2"==r?this.callVal.data0001(t,"该方式不支持人脸认证"):"3"==r?this.qrSign("111",t):this.callVal.data0001(t,"未知的类型")}else this.callVal.data0001(t,"数据格式有误")}else this.callVal.data0001(t,"数据格式有误")}},{key:"keyEnc",value:function(e,t,n){var i=this;if(v.isEmpty(e))this.callVal.data0001(t,"加密数据为空");else{var a={},r=this.base64.encode(e);a.value=r,a.alg=n||"0x00000401",this._mask_begin(),h.key_enc(a,(function(e,n){if(i._mask_end(),e){var a=JSON.parse(n),r={};r.encRsKey=a.strEncDataB64,i.callVal.data0000(t,r)}else i.callVal.data0001(t,n)}))}}},{key:"keyEncMore",value:function(e,t){var n=this,i=v.convertJson(e);if(null!=i){var a=i.value,r=i.alg,s=i.certArr;if(v.isEmpty(a))this.callVal.dataParamError(t);else{var o={},l=this.base64.encode(a);o.value=l,o.alg=r||"0x00000401";try{var c="";!v.isEmpty(s)&&s.length>0&&(s.forEach((function(e){c+=e+"|"})),c=c.substring(0,c.length-1),o.cert=c)}catch(e){return kinsecLog.error(e),void this.callVal.data0001(t,"证书数据格式有误")}this._mask_begin(),h.key_enc_more(o,(function(e,i){if(n._mask_end(),e){var a=JSON.parse(i),r={};r.encRsKey=a.strEncDataB64,n.callVal.data0000(t,r)}else n.callVal.data0001(t,i)}))}}else this.callVal.dataParamFormatError(t)}},{key:"keyDec",value:function(e,t){var n=this;if(v.isEmpty(e))this.callVal.data0001(t,"解密数据为空");else{this._mask_begin();var i={};i.value=e,h.key_dec(i,(function(e,i){if(n._mask_end(),e){var a=JSON.parse(i),r=n.base64.decode(a.strSrcDataB64),s={};s.rsKey=r,n.callVal.data0000(t,s)}else n.callVal.data0001(t,i)}))}}},{key:"qrEnc",value:function(e,t){var n=this;v.isEmpty(e)?this.callVal.data0001(t,"加密数据为空"):(this._mask_begin(),this.qrcodeServer.qrEnc(e,(function(e,i){if(e){var a={};a.encReachKey=i,n.callVal.data0000(t,a)}else n.callVal.data0001(t,i)}),(function(e,i){n._mask_end(),e?n.dialog.qrcode(i):n.callVal.data0001(t,i)})))}},{key:"qrDec",value:function(e,t){var n=this;v.isEmpty(e)?this.callVal.data0001(t,"解密数据为空"):(this._mask_begin(),this.qrcodeServer.qrDec(e,(function(e,i){if(e){var a={};a.symKey=i,n.callVal.data0000(t,a)}else n.callVal.data0001(t,i)}),(function(e,i){n._mask_end(),e?n.dialog.qrcode(i):n.callVal.data0001(t,i)})))}},{key:"keyCert",value:function(e){var t=this;this._mask_begin(),h.key_seal_list("0",(function(n,i){if(t._mask_end(),n){var a=JSON.parse(i),r={};r.keySn=a.certSN,r.certBase64=a.certData,t.callVal.data0000(e,r)}else t.callVal.data0001(e,i)}))}},{key:"getCertInfos",value:function(e,t,n){var i=this;this._mask_begin(),h.cmCertInfo(e,t,(function(e,t){if(i._mask_end(),e){var a=t;i.callVal.data0000(n,a)}else i.callVal.data0001(n,t)}))}},{key:"keyDeviceId",value:function(e){var t=this;this._mask_begin(),h.key_device_id((function(n,i){if(t._mask_end(),n){var a={};a.deviceId=i,t.callVal.data0000(e,a)}else t.callVal.data0001(e,i)}))}},{key:"cmPcInfo",value:function(e){var t=this;this._mask_begin(),h.cm_pc_info((function(n,i){t._mask_end(),n?t.callVal.data0000(e,JSON.parse(i)):t.callVal.data0001(e,i)}))}},{key:"getVersion",value:function(e){var t=this;this._mask_begin(),h.getVersions((function(n,i){t._mask_end(),n?t.callVal.data0000(e,JSON.parse(i)):t.callVal.data0001(e,i)}))}},{key:"getKeyCert",value:function(e,t){var n=this,i=v.convertJson(e);if(null!=i){var a=i.certType;v.isEmpty(a)?this.callVal.dataParamError(t):(this._mask_begin(),h.getKeyCert(i,(function(e,i){n._mask_end(),e?n.callVal.data0000(t,JSON.parse(i)):n.callVal.data0001(t,i)})))}else this.callVal.dataParamFormatError(t)}},{key:"keyLoginPwd",value:function(e,t){var n=this,i=v.convertJson(e);if(null!=i){var a=i.certData,r=i.pwd;v.isEmpty(a)||v.isEmpty(r)?this.callVal.dataParamError(t):(i.certType="sign",this._mask_begin(),h.keyLoginPwd(i,(function(e,i){n._mask_end(),e?n.callVal.data0000(t,i):n.callVal.data0001(t,i)})))}else this.callVal.dataParamFormatError(t)}},{key:"zjCloudSign",value:function(e,t,n){var i=this,a=this.base64.encode(t);y.htjc_login(e,a,(function(e,t){if(e){var a=JSON.parse(t);i._mask_begin(),h.cmCertInfo("|2|",a.cert,(function(e,t){i._mask_end(),e?(a.certSn=t.certSN,i.callVal.data0000(n,a)):i.callVal.data0001(n,t)}))}else t.indexOf("认证异常")>=0&&(t="认证错误过多，无法继续认证"),i.callVal.data0001(n,t)}))}},{key:"keySign",value:function(e,t){var n=this;this._mask_begin();var i=this.base64.encode(e);h.keySign(i,(function(e,i){if(e){var a=JSON.parse(i);h.cmCertInfo("|2|",a.cert,(function(e,i){n._mask_end(),e?(a.certSn=i.certSN,n.callVal.data0000(t,a)):n.callVal.data0001(t,i)}))}else n._mask_end(),n.callVal.data0001(t,i)}))}},{key:"qrSign",value:function(e,t){var n=this;this._mask_begin(),this.qrcodeServer.qrSign(e,(function(e,i){e?n.callVal.data0000(t,JSON.parse(i)):n.callVal.data0001(t,i)}),(function(e,i){n._mask_end(),e?n.dialog.qrcode(i):n.callVal.data0001(t,i)}))}},{key:"keySn",value:function(e){var t=this;this._mask_begin(),h.getKeySn((function(n,i){if(t._mask_end(),n){var a=i;t.callVal.data0000(e,a)}else t.callVal.data0001(e,i)}))}},{key:"verify",value:function(){for(var e=[],t=this.seals.length,n=0;n<t;n++){var i=this.seals[n];if(""!=i.innerHTML){var a=i.getAttribute("value");if(!this.pub.isEmpty(a)){var r={},s=[],o=this.pub.convertJson(a);o instanceof Array?s=o:s.push(JSON.stringify(o));for(var l=0;l<s.length;l++){var c=s[l],u=this.pub.convertJson(c),d=(u.type,u.seal,u.valArr),f=u.sealId,p=u.posId;if(this.pub.isEmpty(p)||document.getElementById(p)){if(!this.pub.isEmpty(d)&&d.length>0){var g=!1;if(d.forEach((function(e){try{document.getElementById(e).getAttribute("value")}catch(t){console.error("保护数据id不存在--"+e+"--",t),g=!0}})),g){r.signatureid=f,r.signatureData=c,r.modifiedItems=d,e.push(r);continue}}var v=i.getElementsByTagName("div");o instanceof Array==0&&(v=[i]);for(var h=0;h<v.length;h++){var y=v[h],m=y.getAttribute("value"),k=y.getElementsByTagName("canvas")[0];if(k&&m){if(JSON.parse(m).sealId!=f)continue;if("2"==k.getAttribute("state")){for(var _=!1,b=0;b<e.length;b++)if(e[b].signatureid==f){_=!0;break}if(_)continue;r.signatureid=f,r.signatureData=c,r.modifiedItems=d,e.push(r)}}}}}}}}return e}},{key:"show",value:function(){var e=this;this.seals.forEach((function(t){e.pub.isEmpty(t)||(t.style.visibility="visible")}))}},{key:"hide",value:function(){var e=this;this.seals.forEach((function(t){e.pub.isEmpty(t)||(t.style.visibility="hidden")}))}},{key:"getSealName",value:function(e){var t=this;this._mask_begin(),h.getSealName((function(n,i){if(t._mask_end(),n){var a=i;t.callVal.data0000(e,a)}else t.callVal.data0001(e,i)}))}}])&&g(t.prototype,n),e}();t.htmlSeal=m},3279:function(e,t){"use strict";function n(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}Object.defineProperty(t,"__esModule",{value:!0}),t.syncApi=void 0;var i=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.pub=t}var t,i;return t=e,(i=[{key:"cb0000",value:function(e,t){var n={code:"0000",msg:"操作成功"};return t&&(n.msg=t),n.data=e,JSON.stringify(n)}},{key:"cb0001",value:function(e){var t={code:"0001"};return t.msg=e,JSON.stringify(t)}},{key:"ajax",value:function(e,t,n){$.ajax({url:"http://127.0.0.1:31220",data:e,type:"post",dataType:"json",async:t,success:function(e){n(e)},error:function(e){n({PluginResponse:"请求失败，请确认是否有安装引擎并正确启动"})}})}},{key:"keyCert",value:function(){var e=this,t={};t.PluginRequestID=this.pub.randomString(),t.PluginRequest="NoLoginGetFirstCert";var n,i=JSON.stringify(t);return this.ajax(i,!1,(function(t){if("SUCCESS"==t.PluginResponse){var i=JSON.parse(t.PluginResponseValue),a={};a.certBase64=i.certData,a.keySn=i.certSN,n=e.cb0000(a)}else n=e.cb0001(t.PluginResponse)})),n}},{key:"getCertInfos",value:function(e,t){var n=this,i={};i.PluginRequestID=this.pub.randomString(),i.PluginRequest="GetCertInfo",i.certData=t,this.pub.isEmpty(e)||(i.strDataType=e);var a,r=JSON.stringify(i);return this.ajax(r,!1,(function(e){if("SUCCESS"==e.PluginResponse){var t=JSON.parse(e.PluginResponseValue);a=n.cb0000(t)}else a=n.cb0001(e.PluginResponse)})),a}}])&&n(t.prototype,i),e}();t.syncApi=i},1468:function(e,t,n){"use strict";function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}n(4917),n(3299),n(1636),Object.defineProperty(t,"__esModule",{value:!0}),t.base64=void 0;var a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._keyStr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}var t,n;return t=e,(n=[{key:"encode",value:function(e){var t,n,i,a,r,s,o,l="",c=0;for(e=this._utf8_encode(e);c<e.length;)a=(t=e.charCodeAt(c++))>>2,r=(3&t)<<4|(n=e.charCodeAt(c++))>>4,s=(15&n)<<2|(i=e.charCodeAt(c++))>>6,o=63&i,isNaN(n)?s=o=64:isNaN(i)&&(o=64),l=l+this._keyStr.charAt(a)+this._keyStr.charAt(r)+this._keyStr.charAt(s)+this._keyStr.charAt(o);return l}},{key:"decode",value:function(e){var t,n,i,a,r,s,o="",l=0;for(e=e.replace(/[^A-Za-z0-9+/=]/g,"");l<e.length;)t=this._keyStr.indexOf(e.charAt(l++))<<2|(a=this._keyStr.indexOf(e.charAt(l++)))>>4,n=(15&a)<<4|(r=this._keyStr.indexOf(e.charAt(l++)))>>2,i=(3&r)<<6|(s=this._keyStr.indexOf(e.charAt(l++))),o+=String.fromCharCode(t),64!=r&&(o+=String.fromCharCode(n)),64!=s&&(o+=String.fromCharCode(i));return this._utf8_decode(o)}},{key:"_utf8_encode",value:function(e){e=e.replace(/rn/g,"n");for(var t="",n=0;n<e.length;n++){var i=e.charCodeAt(n);i<128?t+=String.fromCharCode(i):i>127&&i<2048?(t+=String.fromCharCode(i>>6|192),t+=String.fromCharCode(63&i|128)):(t+=String.fromCharCode(i>>12|224),t+=String.fromCharCode(i>>6&63|128),t+=String.fromCharCode(63&i|128))}return t}},{key:"_utf8_decode",value:function(e){for(var t="",n=0,i=0,a=0,r=0;n<e.length;)(i=e.charCodeAt(n))<128?(t+=String.fromCharCode(i),n++):i>191&&i<224?(a=e.charCodeAt(n+1),t+=String.fromCharCode((31&i)<<6|63&a),n+=2):(a=e.charCodeAt(n+1),r=e.charCodeAt(n+2),t+=String.fromCharCode((15&i)<<12|(63&a)<<6|63&r),n+=3);return t}}])&&i(t.prototype,n),e}();t.base64=a},2935:function(e,t){"use strict";function n(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}Object.defineProperty(t,"__esModule",{value:!0}),t.callVal=void 0;var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,i;return t=e,(i=[{key:"code0000",value:function(e,t){e("0000","操作成功",t)}},{key:"codeErr",value:function(e,t,n){e(t,n,null)}},{key:"code0001",value:function(e,t){e("0001",t,null)}},{key:"code0002",value:function(e){e("0002","系统异常",null)}},{key:"code0003",value:function(e){e("0003","请先登录",null)}},{key:"codeParamError",value:function(e){e("0001","参数有误",null)}},{key:"data0000",value:function(e,t){var n={code:"0000",msg:"操作成功"};n.data=t,e(JSON.stringify(n))}},{key:"data0001",value:function(e,t){var n={code:"0001"};n.msg=t,e(JSON.stringify(n))}},{key:"data0002",value:function(e){e(JSON.stringify({code:"0002",msg:"系统异常"}))}},{key:"data0003",value:function(e){e(JSON.stringify({code:"0003",msg:"请先登录"}))}},{key:"dataParamError",value:function(e){e(JSON.stringify({code:"0001",msg:"参数有误"}))}},{key:"dataParamFormatError",value:function(e){e(JSON.stringify({code:"0001",msg:"参数格式有误"}))}},{key:"str0000",value:function(e){var t={code:"0000",msg:"操作成功"};return t.data=e,JSON.stringify(t)}},{key:"str0001",value:function(e){var t={code:"0001"};return t.msg=e,JSON.stringify(t)}},{key:"str0001Err",value:function(){return JSON.stringify({code:"0001",msg:"参数有误"})}},{key:"str0000Succ",value:function(){return JSON.stringify({code:"0000",msg:"操作成功"})}}])&&n(t.prototype,i),e}();t.callVal=i},7603:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.constants=void 0,t.constants=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.cloudSignPushWs="ws://seal.fjdzyz.com:2022/",this.cloudSignPushWss="wss://seal.fjdzyz.com:2122/"}},7013:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.dataUtils=void 0;var i=n(8543);function a(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.pub=new i.pubClass}var t,n;return t=e,(n=[{key:"getSignTypeName",value:function(e){var t="未知类型";return"1"==(e+="")?t="介质签章":"2"==e?t="人脸云签章":"3"==e?t="扫码云签章":"4"==e?t="短信云签章":"5"==e?t="服务云签章":"6"==e&&(t="手机盾签章"),t}},{key:"getYzMgs",value:function(e,t){var n=[],i=this.getSignTypeName(t);return n.push(["签章类型：",i]),e.signer_alg&&n.push(["签名算法：",e.signer_alg]),n.push(["签章时间：",e.signtime]),n.push(["证书名称：",e.signername]),e.signer_sn&&n.push(["证书SN：",e.signer_sn]),e.signer_notbefore&&n.push(["证书起始：",e.signer_notbefore]),e.signer_notafter&&n.push(["证书结束：",e.signer_notafter]),e.stamp_name&&n.push(["印章名称：",e.stamp_name]),e.stamp_id&&n.push(["印章ID：",e.stamp_id]),n.push(["印章起始：",e.stamp_starttime]),n.push(["印章结束：",e.stamp_endtime]),this.pub.isEmpty(e.timestamp)||n.push(["签章时间戳：",e.timestamp]),n}}])&&a(t.prototype,n),e}();t.dataUtils=r},833:function(e,t,n){"use strict";function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}n(6209),n(3299),n(1206),n(1636),Object.defineProperty(t,"__esModule",{value:!0}),t.dateUtils=void 0;var a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n;return t=e,(n=[{key:"currentTime2String",value:function(e){var t=new Date,n={"M+":t.getMonth()+1,"d+":t.getDate(),"H+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds(),"q+":Math.floor((t.getMonth()+3)/3),S:t.getMilliseconds()};for(var i in/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(t.getFullYear()+"").substr(4-RegExp.$1.length))),n)new RegExp("("+i+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?n[i]:("00"+n[i]).substr((""+n[i]).length)));return e}}])&&i(t.prototype,n),e}();t.dateUtils=a},1813:function(e,t,n){"use strict";n(8847),n(9251),n(3299),n(7741),n(1491),n(8304),Object.defineProperty(t,"__esModule",{value:!0}),t.dialog=void 0;var i=n(833),a=n(7135);function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var s=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.pub=t,this.loginDialog=null,this.path="",this.dateUtils=new i.dateUtils,this.imageUtils=new a.imageUtils,this.isShow=!1,this.isCall=!1,this.bodyDiv=null,this.titleSpan=null}var t,n;return t=e,(n=[{key:"setLoginDialog",value:function(e){this.loginDialog=e}},{key:"setPath",value:function(e){this.path=e}},{key:"open",value:function(e,t,n,i){var a=this;this.isShow&&this.close(!1),this.isShow=!0,this.isCall=!1;var r=document.createElement("div");r.setAttribute("id","kinsec_msg__wrap_id"),r.setAttribute("class","kinsec_dialog");var s=document.createElement("div");s.setAttribute("class","kinsec_dialog_header kinsec-flex-r");var o=document.createElement("div");o.setAttribute("class","kinsec_dialog_header-title"),o.innerHTML=e,this.titleSpan=o;var l=document.createElement("div");l.setAttribute("class","kinsec-flex-r kinsec_dialog_header-close");var c=document.createElement("img");c.setAttribute("class","kinsec-img-close"),c.src=this.path+"assets/img/guanbi.png",l.appendChild(c),s.appendChild(o),s.appendChild(l);var u=document.createElement("div");this.bodyDiv=u,u.setAttribute("class","kinsec_dialog_content"),"请选择印章"==e&&(u.style.padding="0px"),u.innerHTML=t;var d=document.createElement("div");d.setAttribute("class","kinsec_msg__overlay"),this.wrap=r,this.overlay=d,c.addEventListener("click",(function(e){a.close(!1),a.pub.isType(n,"function")&&n(!1,"取消操作")})),r.appendChild(s),r.appendChild(u),document.body.appendChild(r),document.body.appendChild(d),setTimeout((function(){var e=1;if(i)for(var t=i,n=document.documentElement.clientHeight;n&&n<i+20;)i=t*(e-=.1);r.style.transform="translate(-50%,-50%) scale("+e+","+e+")",d.style.opacity="1"}),100)}},{key:"close",value:function(e){this.wrap.remove(),this.overlay.remove(),this.isShow=!1,this.isCall=e,this.pub.isEmpty(this.kinsec_sett)||window.clearInterval(this.kinsec_sett),this.pub.isEmpty(this.recorder)||"recording"!=this.recorder.state||this.recorder.stop(),this.pub.isEmpty(this.stream)||this.stream.getTracks().forEach((function(e){e.stop()}))}},{key:"closeAll",value:function(){try{this.isShow&&this.close(),null!=this.loginDialog&&this.loginDialog.isShow&&this.loginDialog.close()}catch(e){kinsecLog.error(e)}}},{key:"video",value:function(e,t){var n=this;try{navigator.mediaDevices.getUserMedia||navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia?this.getUserMedia({audio:!1,video:!0},(function(i){n.pub.isEmpty(n.stream)||n.stream.getTracks().forEach((function(e){e.stop()})),n.stream=i;var a=2,r=document.getElementById("kinsec_video");r.srcObject=i,r.play(),e&&(n.recorder=new MediaRecorder(i,{videoBitsPerSecond:8e5,mimeType:"video/webm;codecs=vp8"}),n.recorder.ondataavailable=function(e){var i=e.data,a=new FileReader;a.onload=function(e){null==n.kinsec_sett&&t(a.result)},a.readAsDataURL(i)},n.recorder.start(),e.disabled=!0,e.innerHTML="停止录制倒计时3",n.kinsec_sett=window.setInterval((function(){e.innerHTML="停止录制倒计时"+a,0==a&&(e.disabled=!1,e.innerHTML="开始录制",a=2,window.clearInterval(n.kinsec_sett),n.kinsec_sett=null,r.pause(),n.recorder.stop(),i.getTracks().forEach((function(e){e.stop()}))),a--}),1e3))}),(function(e){console.error(e),alert("访问媒体设备失败："+e.message+",请使用谷歌浏览器或者火狐浏览器,并允许打开摄像头")})):(alert("不支持访问用户媒体,请使用谷歌浏览器或者火狐浏览器"),this.close(!0))}catch(e){kinsecLog.error(e),alert("不支持访问用户媒体"),this.close(!0)}}},{key:"getUserMedia",value:function(e,t,n){navigator.mediaDevices.getUserMedia?navigator.mediaDevices.getUserMedia(e).then(t).catch(n):navigator.webkitGetUserMedia?navigator.webkitGetUserMedia(e,t,n):navigator.mozGetUserMedia?navigator.mozGetUserMedia(e,t,n):navigator.getUserMedia&&navigator.getUserMedia(e,t,n)}},{key:"htjc",value:function(e){var t=this;this.open("实人认证",'<div class="kinsec-flex-r"><div class="kinse-content-text1">请在对应框中开始录制</div></div><div class="kinsec_video_content"><div class="prompt"><div style="width: 200px; height: 200px; border-radius: 50%; margin: auto; overflow: hidden;"><video  width="270" height="200"  class="kinsec_video_videoel1" id="kinsec_video"></video></div><div style="padding: 30px 30px;"><button id="kinsec_video_lz" class="kinse-btn-confirm" style="width:200px;" >开始录制</button></div></div></div>');var n=document.getElementById("kinsec_video_lz");n.addEventListener("click",(function(i){t.video(n,(function(n){t.close(!0),e(n.split("base64,")[1])}))})),this.video()}},{key:"pwd",value:function(e){var t=this;this.open("请输入口令",'<div class="kinsec-flex-r"><div class="kinse-pwd-text">口令:</div><input type="password" id="kinsec_pwd_val" placeholder="请输入口令"  class="kinsec-pwd-input"/></div><div id="kinsec_msg_error" class="kinsec-msg-error"></div><div class="kinse-footer kinsec-flex-r"><button id="kinsec_pwd_cancel" class="kinse-btn-cancel">取 消</button><button id="kinsec_pwd_sub" class="kinse-btn-confirm" style="margin-left:50px">确 定</button></div>');var n=document.getElementById("kinsec_pwd_sub");kinsecLog.log(n);var i=document.getElementById("kinsec_pwd_cancel");n.addEventListener("click",(function(n){var i=document.getElementById("kinsec_pwd_val").value;t.pub.isEmpty(i)?document.getElementById("kinsec_msg_error").innerHTML="请输入口令":(document.getElementById("kinsec_msg_error").innerHTML="",t.close(!0),e(i))})),i.addEventListener("click",(function(e){t.close(!1)})),document.getElementById("kinsec_pwd_val").focus()}},{key:"yzMes",value:function(e){kinsecLog.log(e);var t='<div class="kinsec-flex-c" style="padding-bottom:20px;">';e.forEach((function(e){t+='<div class="kinsec-flex-r" style="margin-bottom:10px; align-items: flex-start;"><div class="kinsec_msg_mes_text">'+e[0]+'</div><div class="kinsec_msg_mes_text2">'+e[1]+"</div></div>"})),t+="</div>",this.open("验证信息",t)}},{key:"mes",value:function(e,t){var n=this,i="错误信息",a=this.path+"assets/img/icon-red-close.png",r="";"2"==t?(i="正确信息",a=this.path+"assets/img/icon-z-mes.png"):"3"==t?(i="警告信息",a=this.path+"assets/img/icon-j-mes.png"):"4"==t&&(i="提示信息",a="",r='style="display:none"');var s='<div class="kinsec-flex-r" ><img '+r+' src="'+a+'" class="kinse-error-img" /><div class="kinse-content-bg-text"><div class="kinse-content-text">'+e+'</div></div></div><div class="kinse-footer kinsec-flex-r"><button id="kinsec_mes_bb" class="kinse-btn-confirm">确  定</button></div>';this.open(i,s),document.getElementById("kinsec_mes_bb").addEventListener("click",(function(e){n.close(!1)}))}},{key:"qrcode",value:function(e){this.open("请扫描二维码",'<div class="kinsec-flex-r kinsec-qrscan" ><div id="kinsec_dialog_qrcode" style="width:200px; height:200px;"><div></div>');var t=document.getElementById("kinsec_dialog_qrcode");new QRCode(t,{width:200,height:200}).makeCode(e)}},{key:"keyLogin",value:function(e,t){var n=this;this.open("请输入口令",'</div><div class="kinsec-flex-r"><div class="kinse-pwd-text">证书名称:</div><select id="kinsec_key_login_select" ></select></div><div class="kinsec-flex-r" style="margin-top:20px;"><div class="kinse-pwd-text">证书口令:</div><input type="password" id="kinsec_key_login_pwd" placeholder="请输入证书口令"  class="kinsec-pwd-input"/></div><div id="kinsec_key_login_msg_error" class="kinsec-msg-error"></div><div class="kinse-footer kinsec-flex-r"><button id="kinsec_key_login_cancel" class="kinse-btn-cancel">取 消</button><button id="kinsec_key_login_sub" class="kinse-btn-confirm" style="margin-left:50px">确 定</button></div>');var i=document.getElementById("kinsec_key_login_sub"),a=document.getElementById("kinsec_key_login_cancel"),r=document.getElementById("kinsec_key_login_select"),s=document.getElementById("kinsec_key_login_pwd");e.forEach((function(e){var t=document.createElement("option");t.setAttribute("value",e.id),t.innerHTML=e.name,r.appendChild(t)})),r.onmouseover=function(){s.blur()},r.onmouseout=function(){s.focus()},i.addEventListener("click",(function(e){var i=document.getElementById("kinsec_key_login_pwd").value,a=r.value;n.pub.isEmpty(i)?document.getElementById("kinsec_key_login_msg_error").innerHTML="请输入口令":i.length<4||i.length>16?document.getElementById("kinsec_key_login_msg_error").innerHTML="请输入4到16位的口令":(document.getElementById("kinsec_key_login_msg_error").innerHTML="",n.close(!0),t(a,i))})),a.addEventListener("click",(function(e){n.close(!1)})),s.focus()}},{key:"keySealList",value:function(e,t,n,i){var a=this,r=0;n&&(r=n.inx);var s="",o="",l="";i&&(i.addTxt&&i.addQf?s='style="display: none;"':(i.addTxt&&(o='style="display: none;"'),i.addQf&&(l='style="display: none;"')));for(var c=e[r].sealPic,u=(e[r].issuename,e[r].stamp_starttime),d=e[r].stamp_endtime,f=e[r].sealName,p='<div class="kinsec-flex-c"><div class="kinsec_dialog_header1"><div class="kkinsec_dialog_header-title1">印章列表</div></div><div class="kinsec-flex-r" style="justify-content: flex-start;"><div class="kinsec-flex-c" style="max-width:450px;"><div class="kinse-seal-list kinsec-flex-r">',g=0;g<e.length;g++){var v=e[g];p+='<div class="kinsec_seal_img-text-bgView" ><div inx="'+g+'" class="kinsec-seal-bgView kinsec-flex-c kinsec-no-active" style="justify-content: center;align-items: center;"><img src="data:image/png;base64,'+v.sealPic+'" class="kinsec-seal-yz-img" /><div title="'+v.sealName+'" class="kinsec-seal-div">'+v.sealName+"</div></div></div>"}p+='</div><div class="kinsec-flex-r kinsec_seal_detail"><img class="kinsec-seal-img" src="data:image/png;base64,'+c+'" /><div class="kinsec-seal-des-view kinsec-flex-c" id="kinsec-seal-des-view"><div class="kinse-content-text2" >印章名称:</div><div class="kinse-content-text2" id="kinsec-seal-name">'+f+'</div><div class="kinse-content-text2" style="margin-top:10px">签发日期</div><div class="kinse-content-text2" id="kinsec-seal-starttime">'+u+'</div><div class="kinse-content-text2" style="margin-top:10px">有效时间</div><div class="kinse-content-text2" id="kinsec-seal-endtime">'+d+'</div></div></div></div><div class="kinsec-right-btn-view kinsec-flex-c"><button id="kinsec_key_seal_cancel" class="kinse-btn-cancel1">取 消</button><button id="kinsec_key_seal_sub" class="kinse-btn-confirm1" style="margin-top:20px">确 定</button></div></div><div '+s+' class="kinsec_seal_fujia" ><input '+o+' type="checkbox" id="kinsec_add_txt" /><span '+o+" >附加文字</span><input "+l+' type="checkbox" id="kinsec_add_qf" /><span '+l+" >骑缝章</span></div></div>",this.open("请选择印章",p,null,503);for(var h=0,y=this.pub.getClass("div","kinsec-seal-bgView"),m=function(t){var i=y[t],s=parseInt(i.getAttribute("inx"));t==r&&(i.style.border="1px dotted #000000",h=r,i.className="kinsec-flex-c kinsec-active kinsec-seal-bgView"),i.addEventListener("click",(function(t){for(var o=a.pub.getClass("div","kinsec-seal-bgView"),l=0;l<o.length;l++)o[l].className="kinsec-flex-c kinsec-no-active kinsec-seal-bgView";i.className="kinsec-flex-c kinsec-active kinsec-seal-bgView";var c=a.pub.getClass("img","kinsec-seal-img")[0];i.getElementsByTagName("div")[1],c.setAttribute("src","data:image/png;base64,"+e[s].sealPic),document.getElementById("kinsec-seal-name").innerHTML=e[s].sealName,document.getElementById("kinsec-seal-starttime").innerHTML=e[s].stamp_starttime,document.getElementById("kinsec-seal-endtime").innerHTML=e[s].stamp_endtime,h=s;var u=document.getElementById("kinsec_add_txt");n&&s==r?"1"==n.state&&(u.checked=!0):u.checked=!1}))},k=0;k<y.length;k++)m(k);var _=document.getElementById("kinsec_key_seal_sub"),b=document.getElementById("kinsec_key_seal_cancel"),S=document.getElementById("kinsec_add_txt"),E=document.getElementById("kinsec_add_qf");_.addEventListener("click",(function(i){if(n&&h==r&&S.checked){if(!a.pub.isEmpty(n.txt))return e[h].txt=n.txt,void a.imageUtils.twoImg2ImgDown(e[h].sealPic,e[h].txt).then((function(n){a.close(!0),e[h].realSealPic=n.img;var i=parseInt(e[h].sealPicH);e[h].realSealPicW=parseInt(i*n.heightOp),t(e[h])}))}else E.checked&&(e[h].sealType="2");a.close(!0),t(e[h])})),b.addEventListener("click",(function(e){a.close(!1)})),n&&h==r&&"1"==n.state&&(S.checked=!0),S.addEventListener("click",(function(n){S.checked&&(E.checked=!1,a.close(!1),a.keySealAddTxt(e[h],(function(n){n.inx=h,a.keySealList(e,t,n,i)})))})),E.addEventListener("click",(function(e){E.checked&&(S.checked=!1)}))}},{key:"keySealAddTxt",value:function(e,t){var n=this,i=e.sealPic,a=parseInt(e.sealPicW),r=(parseInt(e.sealPicH),{state:"2"}),s='<div class="kinsec_add_txt_content" style="padding-bottom: 50px;height: 80%;"><div><div class="kinsec_w46 kinsec_float_left"><p class="kinsec_w100">附加时间</p><div class="kinsec_w100 kinsec_border1 kinsec_pd_10 kinsec_mgf_10"><table><tr><td class="td1"><span>时间字号:</span></td><td><select id="kinsec_time_font_size" /></td></tr><tr><td><pan>时间位置:</pan></td><td><select id="kinsec_time_location" /></td></tr><tr><td><pan>时间字体:</pan></td><td><select id="kinsec_time_font" /></td></tr><tr><td><pan>时间格式:</pan></td><td><select id="kinsec_time_format" /></td></tr></table></div><p class="kinsec_w100">附加文字</p><div class="kinsec_w100 kinsec_border1 kinsec_pd_10 kinsec_mgf_10"><table><tr><td class="td1"><span>文字字号:</span></td><td><select id="kinsec_txt_font_size" /></td></tr><tr><td><pan>文字位置:</pan></td><td><select id="kinsec_txt_location" /></td></tr><tr><td><pan>文字字体:</pan></td><td><select id="kinsec_txt_font" /></td></tr><tr><td><pan>文字内容:</pan></td><td><textarea id="kinsec_txt"></textarea></td></tr></table></div></div><div class="kinsec_w53 kinsec_float_left" style="width: 44%"><div class="kinsec_yz_img"><div><img id="kinsec_img" src="data:image/png;base64,'+i+'" /></div><div><img id="kinsec_txt_img" /></div></div></div></div><div class="msg-footer" style="position: absolute;bottom: 6px;left: 30%;" ><button id="kinsec_add_txt_sub" class="kinse-btn-confirm1" style="width: 120px;">确认</button><button id="kinsec_add_txt_cancel" class="kinse-btn-cancel1" style="width: 120px; margin-left: 20px">取消</button></div></div>';this.open("附加文字",s,(function(){r.state="2",t(r)}),586);for(var o=14;o<=54;o++){var l=document.createElement("option");l.setAttribute("value",o+""),l.innerHTML=o+"";var c=document.createElement("option");c.setAttribute("value",o+""),c.innerHTML=o+"",33==o&&(l.setAttribute("selected","selected"),c.setAttribute("selected","selected"));var u=document.getElementById("kinsec_time_font_size"),d=document.getElementById("kinsec_txt_font_size");u.appendChild(l),d.appendChild(c)}var f={left:"左边",center:"中间",right:"右边"};for(var p in f){var g=document.createElement("option");g.setAttribute("value",p),g.innerHTML=f[p];var v=document.createElement("option");v.setAttribute("value",p),v.innerHTML=f[p],"center"==p&&(g.setAttribute("selected","selected"),v.setAttribute("selected","selected")),document.getElementById("kinsec_time_location").appendChild(g),document.getElementById("kinsec_txt_location").appendChild(v)}var h={SimSun:"宋体",FangSong:"仿宋",SimHei:"黑体",KaiTi:"楷体"};for(var y in h){var m=document.createElement("option");m.setAttribute("value",y),m.innerHTML=h[y];var k=document.createElement("option");k.setAttribute("value",y),k.innerHTML=h[y],"宋体"==y&&(m.setAttribute("selected","selected"),k.setAttribute("selected","selected")),document.getElementById("kinsec_time_font").appendChild(m),document.getElementById("kinsec_txt_font").appendChild(k)}var _={"yyyy年MM月dd日":"yyyy年MM月dd日","yyyy-MM-dd":"yyyy-MM-dd","yyyy年MM月dd日 HH时mm分ss秒":"yyyy年MM月dd日 HH时mm分ss秒","yyyy-MM-dd HH:mm:ss":"yyyy-MM-dd HH:mm:ss"};for(var b in _){var S=document.createElement("option");S.setAttribute("value",b),S.innerHTML=_[b],"yyyy年MM月dd日"==b&&S.setAttribute("selected","selected"),document.getElementById("kinsec_time_format").appendChild(S)}var E=document.getElementById("kinsec_img"),x=document.getElementById("kinsec_txt_img");E.onload=function(){E.width;var e=document.createElement("img");e.src="data:image/png;base64,"+i,e.onload=function(){var i=e.width,s=function(){var e=document.getElementById("kinsec_time_format").value,t=n.dateUtils.currentTime2String(e),r=document.getElementById("kinsec_txt").value,s="";if(n.pub.isEmpty(r)){if(!n.pub.isEmpty(t)){var p=o.value/(500/120)*(i/(72*a/25.4));s=n.imageUtils.txt2Img(t,i,p,d.value,c.value)}}else{var g=l.value/(500/120)*(i/(72*a/25.4));s=n.imageUtils.txt2Img(r,i,g,f.value,u.value)}x.setAttribute("src",s)},o=document.getElementById("kinsec_time_font_size");o.addEventListener("change",(function(){s()}));var l=document.getElementById("kinsec_txt_font_size");l.addEventListener("change",(function(){s()}));var c=document.getElementById("kinsec_time_location");c.addEventListener("change",(function(){s()}));var u=document.getElementById("kinsec_txt_location");u.addEventListener("change",(function(){s()}));var d=document.getElementById("kinsec_time_font");d.addEventListener("change",(function(){s()}));var f=document.getElementById("kinsec_txt_font");f.addEventListener("change",(function(){s()})),n.dateUtils;var p=n.pub,g=document.getElementById("kinsec_time_format"),v=document.getElementById("kinsec_txt");g.addEventListener("change",(function(){p.isEmpty(v.value)&&s()})),v.style.resize="none",v.addEventListener("input",(function(){s()})),s();var h=document.getElementById("kinsec_add_txt_sub"),y=document.getElementById("kinsec_add_txt_cancel");h.addEventListener("click",(function(e){n.close(!1);var s=n.dateUtils.currentTime2String(g.value),p=v.value;if(n.pub.isEmpty(p)){if(!n.pub.isEmpty(s)){var h=o.value/(500/120)*(i/(72*a/25.4)),y=n.imageUtils.txt2Img(s,i,h,d.value,c.value);r.txt=y.split("base64,")[1]}}else{var m=l.value/(500/120)*(i/(72*a/25.4)),k=n.imageUtils.txt2Img(p,i,m,f.value,u.value);r.txt=k.split("base64,")[1]}r.state="1",t(r)})),y.addEventListener("click",(function(e){n.close(!1),r.state="2",t(r)}))}}}}])&&r(t.prototype,n),e}();t.dialog=s},4251:function(e,t,n){"use strict";n(8847),n(7699),n(9087),n(8228),n(3299),n(7741),n(1491),Object.defineProperty(t,"__esModule",{value:!0}),t.httpClass=void 0;var i=n(9011),a=n(7013),r=n(1468);function s(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var o=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.pub=t,this.keyLogin=new i.keyLogin(t,this,n),this.dataUtils=new a.dataUtils,this.base64=new r.base64,this.keyShield="",this.areaCode="",this.timeout=6e4}var t,n;return t=e,(n=[{key:"mask_begin",value:function(e){this.mask_begin_call=e,this.keyLogin.mask_begin(e)}},{key:"mask_end",value:function(e){this.mask_end_call=e,this.keyLogin.mask_end(e)}},{key:"delToken",value:function(){localStorage.removeItem("kinsec_token")}},{key:"setShield",value:function(e){this.keyShield=e}},{key:"setAreaCode",value:function(e){this.pub.isEmpty(e)||"BSGCY"==e&&(e=""),this.areaCode=e}},{key:"setTimeout",value:function(e){this.pub.isType(e,"number")&&e>0&&(this.timeout=e)}},{key:"setHiddenSealAddJson",value:function(e){this.keyLogin.setHiddenSealAddJson(e)}},{key:"post",value:function(e,t,n){var i=this,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"1";n||(n=this.timeout);var r="http://127.0.0.1:31220",s={timeout:n,withCredentials:!1,headers:{"Content-Type":"text/plain"}};try{kinsecLog.log("post--"+e.PluginRequest)}catch(e){}var o=axios.create();o.post(r,e,s).then((function(r){var s=r.data;kinsecLog.log(JSON.stringify(s)),"NotLoggedIn"==s.PluginResponse&&"1"==a?i.keyLogin.login((function(a,r){a?i.post(e,t,n,"2"):(s.PluginResponse=r,t(!0,s,"1"))})):t(!0,s,"1")}),(function(e){kinsecLog.error(e),t(!1,"请求失败，请确认是否有安装引擎并正确启动","2")})).catch((function(e){kinsecLog.error(e),t(!1,"执行异常："+e.message,"3")}))}},{key:"tran",value:function(e,t){var n=this;e.PluginRequestID=this.pub.randomString(),e.PluginRequest="Experts_Forwarding",this.post(e,(function(e,i,a){e?"SUCCESS"==i.PluginResponse?t(e,i.PluginResponseValue):("0003"==i.ServerResponseCode&&n.delToken(),t(!1,i.PluginResponse)):t(e,i)}))}},{key:"getType",value:function(e,t,n){var i={};i.idCard=e,i.appId=t,i.joinAdr="L3BjL2ZzL2dldFR5cGU=",this.tran(i,(function(e,t){n(e,t)}))}},{key:"htjc",value:function(e,t,n,i,a){var r={};r.idCard=e,r.joinAdr="L3BjL2ZzL2h0amM=",r.video=t,r.time=n+"",r.appId=i,this.tran(r,(function(e,t){a(e,t)}))}},{key:"pwd",value:function(e,t,n,i,a){var r={};r.idCard=e,r.joinAdr="L3BjL2ZzL3B3ZA==",r.pwd=t,r.time=n+"",r.appId=i,this.tran(r,(function(e,t){a(e,t)}))}},{key:"sign",value:function(e,t,n){var i={};i.token=t,i.joinAdr="L3BjL2ZzL3NpZ24=",i.tsaType="1",i.signType="1";var a=[];a.push(e),i.data=JSON.stringify(a),this.tran(i,(function(e,t){if(e){var i=JSON.parse(t),a={};a.cert=i.cert,a.sign=i.sign[0],n(e,JSON.stringify(a))}else n(e,t)}))}},{key:"keySign",value:function(e,t,n){var i={};i.PluginRequestID=this.pub.randomString(),i.PluginRequest="Experts_LocalDataSign",i.sourceData=e,this.post(i,(function(e,n,i){if(e)if("SUCCESS"==n.PluginResponse){var a=JSON.parse(n.PluginResponseValue);t(e,JSON.stringify(a))}else t(!1,n.PluginResponse);else t(e,n)}),null,n)}},{key:"getSealPic",value:function(e,t,n){var i=this;if("1"==e)this.keyLogin.sealList((function(e,t){n(e,e?JSON.stringify(t):t)}));else{var a="1"!=e?"1":"2",r={};r.PluginRequestID=this.pub.randomString(),r.PluginRequest="Experts_GetSealPic",r.getPicMode=a,"1"!=e&&(r.token=t),this.post(r,(function(e,t,a){e?"SUCCESS"==t.PluginResponse?n(e,t.PluginResponseValue):("0003"==t.ServerResponseCode&&i.delToken(),n(!1,t.PluginResponse)):n(e,t)}))}}},{key:"signSeal",value:function(e,t,n,i,a,r){var s=this,o={};o.PluginRequestID=this.pub.randomString(),o.PluginRequest="Experts_SignStamp",o.token=t,o.sourceData=e,o.tsaType="2",o.hashMode=i,o.sourceDataType=n,o.sealData=a.sealData,o.certData=a.certData,"1"==n&&(o.stampIndex="0",o.posX=a.x+"",o.posY=a.y+"",o.pageRange=a.page+"");var l={signType:"2"};l.signContentType=n,o.extData=JSON.stringify(l),this.post(o,(function(e,t,n){e?"SUCCESS"==t.PluginResponse?r(e,t.PluginResponseValue):("0003"==t.ServerResponseCode&&s.delToken(),r(!1,t.PluginResponse)):r(e,t)}))}},{key:"keySignSeal",value:function(e,t,n,i,a){var r={};r.PluginRequestID=this.pub.randomString(),r.PluginRequest="Experts_LocalSignStamp",r.sourceData=e,r.hashMode=n,r.sourceDataType=t,r.sealData=i.sealData,"1"==t&&(r.stampIndex="0",r.posX=i.x+"",r.posY=i.y+"",r.pageRange=i.page+"");var s={signType:"1"};s.signContentType=t,r.extData=JSON.stringify(s),this.pub.isEmpty(this.areaCode)||(r.areaCode=this.areaCode),this.post(r,(function(e,t,n){e?"SUCCESS"==t.PluginResponse?a(e,t.PluginResponseValue):a(!1,t.PluginResponse):a(e,t)}))}},{key:"keyHashSignSeal",value:function(e,t,n,i,a){var r={};r.PluginRequestID=this.pub.randomString(),r.PluginRequest="Experts_NoSrcLocalSignStamp",r.hashData=e,r.hashMode=n,r.sourceDataType=t,r.sealData=i.sealData,"1"==t&&(r.posX=i.x+"",r.posY=i.y+"",r.pageRange=i.page+"");var s={signType:"1"};s.signContentType=t,r.extData=JSON.stringify(s),this.pub.isEmpty(this.areaCode)||(r.areaCode=this.areaCode),this.post(r,(function(e,t,n){e?"SUCCESS"==t.PluginResponse?a(e,t.PluginResponseValue):a(!1,t.PluginResponse):a(e,t)}))}},{key:"htmlSignSeal",value:function(e,t,n,i){var a=this;this.getSealPic(e,n,(function(r,s){if(r)if("2"==e){var o=JSON.parse(s),l={};l.sealData=o.sealData,l.certData=o.certData,new Promise((function(e,i){a.signSeal(t,n,"0","2",l,(function(t,n){if(t){var a=JSON.parse(n),r={};r.sealPic=o.sealPic,r.signStamp=a.signStamp,r.sealId=a.GUID,r.sealPicH=parseInt(o.sealPicH/25.4*72),r.sealPicW=parseInt(o.sealPicW/25.4*72),e(r)}else i(n)}))})).then((function(e){var t={};t.signStamp=e.signStamp,a.getSealInfo(t,(function(t,n){e.certSn=n.certSN,t?i(!0,JSON.stringify(e)):i(t,n)}))})).catch((function(e){i(!1,e)}))}else if("1"==e){var c=JSON.parse(s),u={};u.sealData=c.sealData,new Promise((function(e,n){var i=a.base64.decode(t),r=c.time,s=c.txt;a.pub.isEmpty(r)||(i+=r),a.pub.isEmpty(s)||(i+=s),t=a.base64.encode(i),a.keySignSeal(t,"0","2",u,(function(t,i){if(t){var a=JSON.parse(i),o={};o.sealPic=c.sealPic,o.signStamp=a.signStamp,o.sealId=a.GUID,o.sealPicH=parseInt(c.sealPicH/25.4*72),o.sealPicW=parseInt(c.sealPicW/25.4*72),o.time=r,o.txt=s,e(o)}else n(i)}))})).then((function(e){var t={};t.signStamp=e.signStamp,a.getSealInfo(t,(function(t,n){e.certSn=n.certSN,e.dataJson=c,t?i(!0,JSON.stringify(e)):i(t,n)}))})).catch((function(e){i(!1,e)}))}else i(!1,"未知类型");else i(r,s)}))}},{key:"pdfSignSeal",value:function(e,t,n,i,a){"2"==e?this.signSeal(t,n,"1","2",i,(function(e,t){if(e){var n=JSON.parse(t);a(e,n.signStamp)}else a(e,t)})):"1"==e?this.keySignSeal(t,"1","2",i,(function(e,t){if(e){var n=JSON.parse(t);a(e,n.signStamp)}else a(e,t)})):"3"==e?this.keyHashSignSeal(t,"1","2",i,(function(e,t){if(e){var n=JSON.parse(t);a(e,n.signStamp)}else a(e,t)})):a(!1,"未知类型")}},{key:"pdfSignSealMore",value:function(e,t,n,i,a,r){var s=this;this.pdfSignSeal(e,t,n,i[0],(function(o,l){o?(a.push(l),i.splice(0,1),i.length<=0?r(!0,a):s.pdfSignSealMore(e,t,n,i,a,r)):r(o,l)}))}},{key:"yzSeal",value:function(e,t,n,i,a){var r=this,s={};s.PluginRequestID=this.pub.randomString(),s.PluginRequest="Experts_VerifySign",s.sourceData=t,s.signStamp=n,s.sourceDataType="0",this.post(s,(function(t,n,s){if(t)if("SUCCESS"==n.PluginResponse){var o=JSON.parse(n.PluginResponseValue),l=r.dataUtils.getYzMgs(o,e);if("1"==a)return void i(t,o,s);i(t,l,s)}else i(!1,n.PluginResponse,s);else i(t,n,s)}))}},{key:"compareCert",value:function(e,t){var n=this;e.PluginRequestID=this.pub.randomString(),e.PluginRequest="Experts_CompareCert",this.post(e,(function(e,i,a){e?"SUCCESS"==i.PluginResponse?t(e,i.PluginResponseValue):("0003"==i.ServerResponseCode&&n.delToken(),t(!1,"操作失败："+i.PluginResponse)):t(e,i)}))}},{key:"comparePureCert",value:function(e,t){var n=this;e.PluginRequestID=this.pub.randomString(),e.PluginRequest="Experts_PureCompareCert",this.post(e,(function(e,i,a){e?"SUCCESS"==i.PluginResponse?t(e,i.PluginResponseValue):("0003"==i.ServerResponseCode&&n.delToken(),t(!1,"操作失败："+i.PluginResponse)):t(e,i)}))}},{key:"keyCompareCert",value:function(e,t){var n=this;this.keyLogin.login((function(i,a){i?(e.keyId=a.id,e.pwd=a.pwd,n.compareCert(e,t)):t(!1,a)}),"2")}},{key:"keyPureCompareCert",value:function(e,t){var n=this;this.keyLogin.login((function(i,a){i?n.comparePureCert(e,t):t(!1,a)}),"1")}},{key:"yzPdfOneSeal",value:function(e,t,n,i){var a=this,r={};r.PluginRequestID=this.pub.randomString(),r.PluginRequest="Experts_VerifySign",r.sourceData=e,r.signStamp=t,r.sourceDataType="1",r.stampIndex="0",this.post(r,(function(e,t,r){if(e)if("SUCCESS"==t.PluginResponse){var s=JSON.parse(t.PluginResponseValue),o=s.signtype;o.length>1&&(o=JSON.parse(o).signType);var l="-1";"2"==o?l="2":"1"==o||"0"==o?l="1":"3"==o&&(l="3");var c=a.dataUtils.getYzMgs(s,l);if("1"==i)return void n(e,s,l);n(e,c,l)}else n(!1,t.PluginResponse);else n(e,t)}))}},{key:"yzPdfOneSealN",value:function(e,t,n,i){var a=this,r={};r.PluginRequestID=this.pub.randomString(),r.PluginRequest="Experts_VerifyPdfStamp",r.sourceData=e,r.stampIndex=t+"",this.post(r,(function(e,t,r){if(e)if("SUCCESS"==t.PluginResponse){var s=JSON.parse(t.PluginResponseValue),o=s.signtype;o.length>1&&(o=JSON.parse(o).signType);var l="-1";"2"==o?l="2":"1"==o||"0"==o?l="1":"3"==o&&(l="3");var c=a.dataUtils.getYzMgs(s,l);if("1"==i)return void n(e,s,l);n(e,c,l)}else n(!1,t.PluginResponse);else n(e,t)}))}},{key:"yzPdfAllSeal",value:function(e,t){var n={};n.PluginRequestID=this.pub.randomString(),n.PluginRequest="Experts_VerifySign",n.sourceData=e,n.sourceDataType="1",this.post(n,(function(e,n,i){e?"SUCCESS"==n.PluginResponse?t(e,i,n.PluginResponseValue):t(!1,i,"验证失败："+n.PluginResponse):t(e,i,n)}))}},{key:"prepareSignData",value:function(e,t,n,i){var a={};a.PluginRequestID=this.pub.randomString(),a.PluginRequest="Experts_PrepareSignData",a.sourceData=n.sourceData,a.hashMode="2",a.sourceDataType=e,a.sealData=n.sealData,a.certData=n.certData,"1"==e&&(a.stampIndex="0",a.posX=n.x+"",a.posY=n.y+"",a.pageRange=n.page+"");var r={};r.signType=t,r.signContentType=e,a.extData=JSON.stringify(r),this.post(a,(function(e,t,n){e?"SUCCESS"==t.PluginResponse?i(e,t.PluginResponseValue):i(!1,t.PluginResponse):i(e,t)}))}},{key:"createSignStamp",value:function(e,t,n){var i={};i.PluginRequestID=this.pub.randomString(),i.PluginRequest="Experts_CreateSignStamp",i.dataSrc=t.dataSrc,i.sourceDataType=e,i.sign=t.sign,i.tsa=t.tsa,i.certData=t.certData,this.post(i,(function(e,t,i){if(e)if("SUCCESS"==t.PluginResponse){var a=JSON.parse(t.PluginResponseValue);n(e,a.signStamp)}else n(!1,t.PluginResponse);else n(e,t)}))}},{key:"parseSealData",value:function(e,t){var n={};n.PluginRequestID=this.pub.randomString(),n.PluginRequest="Experts_ParseSealData",n.sealData=e,this.post(n,(function(e,n,i){e?"SUCCESS"==n.PluginResponse?t(e,n.PluginResponseValue):t(!1,n.PluginResponse):t(e,n)}))}},{key:"localPdfSealComplex",value:function(e,t){var n=this;e.PluginRequestID=this.pub.randomString(),e.PluginRequest="Experts_CombinationPdfx",this.post(e,(function(e,i,a){e?"SUCCESS"==i.PluginResponse?t(e,n.pub.convertJson(i.PluginResponseValue)):t(!1,i.PluginResponse):t(e,i)}))}},{key:"localSignData",value:function(e,t){var n=this;e.PluginRequestID=this.pub.randomString(),e.PluginRequest="Experts_GeDelStampTrandom",this.post(e,(function(e,i,a){e?"SUCCESS"==i.PluginResponse?t(e,n.pub.convertJson(i.PluginResponseValue)):t(!1,i.PluginResponse):t(e,i)}))}},{key:"localDelPdfSeal",value:function(e,t){var n=this;e.PluginRequestID=this.pub.randomString(),e.PluginRequest="Experts_PdfxDeleteLastStamp",this.post(e,(function(e,i,a){e?"SUCCESS"==i.PluginResponse?t(e,n.pub.convertJson(i.PluginResponseValue)):t(!1,i.PluginResponse):t(e,i)}))}},{key:"key_enc",value:function(e,t){var n={};n.PluginRequestID=this.pub.randomString(),n.PluginRequest="Tender_EnvelopeDataByP7",n.strAlgID=e.alg,n.strEncCertsB64="",n.strSrcDataB64=e.value,this.post(n,(function(e,n,i){e?"SUCCESS"==n.PluginResponse?t(e,n.PluginResponseValue):t(!1,n.PluginResponse):t(e,n)}))}},{key:"key_enc_more",value:function(e,t){var n={};n.PluginRequestID=this.pub.randomString(),n.PluginRequest="Tender_EnvelopeDataByP7",n.strAlgID=e.alg,n.strEncCertsB64=e.cert,n.strSrcDataB64=e.value,this.post(n,(function(e,n,i){e?"SUCCESS"==n.PluginResponse?t(e,n.PluginResponseValue):t(!1,n.PluginResponse):t(e,n)}))}},{key:"key_dec",value:function(e,t){var n={};n.PluginRequestID=this.pub.randomString(),n.PluginRequest="Tender_UnEnvelopeDataByP7",n.strEncDataB64=e.value,this.post(n,(function(e,n,i){e?"SUCCESS"==n.PluginResponse?t(e,n.PluginResponseValue):t(!1,n.PluginResponse):t(e,n)}))}},{key:"key_list",value:function(e){var t=this,n={};n.PluginRequestID=this.pub.randomString(),n.PluginRequest="GetKeyUserInfoList",this.post(n,(function(n,i,a){if(n)if("SUCCESS"==i.PluginResponse){var r=JSON.parse(i.PluginResponseValue);if(t.pub.isEmpty(r.data)||t.pub.isEmpty(r.data.userlist))e(!1,"获取证书设备列表为空");else{var s=r.data.userlist.split("&&"),o=[];s.forEach((function(e){var t=e.split("||"),n={};n.name=t[0],n.id=t[1],o.push(n)})),e(!0,o)}}else e(!1,i.PluginResponse);else e(n,i)}))}},{key:"key_login",value:function(e,t){var n={};n.PluginRequestID=this.pub.randomString(),n.PluginRequest="PwdLogin",n.keyId=e.id,n.pwd=e.pwd,this.pub.isEmpty(this.areaCode)||(n.areaCode=this.areaCode),this.post(n,(function(e,n,i){e?"SUCCESS"==n.PluginResponse?t(!0,"登录成功"):t(!1,n.PluginResponse):t(e,n)}))}},{key:"key_seal_list",value:function(e,t){var n={};n.PluginRequestID=this.pub.randomString(),n.PluginRequest="Experts_GetLocalSealInfos",n.retSealInfos=e,this.pub.isEmpty(this.keyShield)||(n.shieldSealName=this.keyShield),n.shieldSealFlag="1",this.pub.isEmpty(this.areaCode)||(n.areaCode=this.areaCode),this.post(n,(function(e,n,i){e?"SUCCESS"==n.PluginResponse?t(!0,n.PluginResponseValue):t(!1,n.PluginResponse):t(e,n)}))}},{key:"keyInfo",value:function(e){var t={};t.PluginRequestID=this.pub.randomString(),t.PluginRequest="GetKeySn",this.post(t,(function(t,n,i){if(t)if("SUCCESS"==n.PluginResponse){var a=JSON.parse(n.PluginResponseValue);e(!0,a)}else e(!1,n.PluginResponse);else e(t,n)}))}},{key:"key_device_id",value:function(e){this.keyInfo((function(t,n){if(t){for(var i=[],a=0;a<n.length;a++)i.push(n[a].keySn);e(!0,i)}else e(t,n)}))}},{key:"cm_pc_info",value:function(e){var t={};t.PluginRequestID=this.pub.randomString(),t.PluginRequest="GetPCSystemInfo",this.post(t,(function(t,n,i){if(t)if("SUCCESS"==n.PluginResponse){var a=JSON.parse(n.PluginResponseValue);e(!0,JSON.stringify(a.data))}else e(!1,n.PluginResponse);else e(t,n)}))}},{key:"cmCertInfo",value:function(e,t,n){var i={};i.PluginRequestID=this.pub.randomString(),i.PluginRequest="GetCertInfo",i.certData=t,this.pub.isEmpty(e)||(i.strDataType=e),this.post(i,(function(e,t,i){if(e)if("SUCCESS"==t.PluginResponse){var a=JSON.parse(t.PluginResponseValue);n(!0,a)}else n(!1,t.PluginResponse);else n(e,t)}))}},{key:"getVersions",value:function(e){var t={};t.PluginRequestID=this.pub.randomString(),t.PluginRequest="GetVersions",this.post(t,(function(t,n,i){if(t)if("SUCCESS"==n.PluginResponse){var a=JSON.parse(n.PluginResponseValue);e(!0,JSON.stringify(a.data))}else e(!1,n.PluginResponse);else e(t,n)}))}},{key:"getKeyCert",value:function(e,t){var n={};n.PluginRequestID=this.pub.randomString(),n.PluginRequest="GetLocalCertData",n.certType=e.certType,this.post(n,(function(e,n,i){if(e)if("SUCCESS"==n.PluginResponse){var a=JSON.parse(n.PluginResponseValue);t(!0,JSON.stringify(a))}else t(!1,n.PluginResponse);else t(e,n)}))}},{key:"keyLoginPwd",value:function(e,t){var n={};n.PluginRequestID=this.pub.randomString(),n.PluginRequest="CertPwdLogin",n.certType=e.certType,n.certData=e.certData,n.pwd=e.pwd,this.post(n,(function(e,n,i){e?"SUCCESS"==n.PluginResponse?t(!0,n.PluginResponseValue):t(!1,n.PluginResponse):t(e,n)}))}},{key:"keyLogout",value:function(e){var t={};t.PluginRequestID=this.pub.randomString(),t.PluginRequest="ActiveLogout",this.post(t,(function(t,n,i){t?"SUCCESS"==n.PluginResponse?e(!0,n.PluginResponseValue):e(!1,n.PluginResponse):e(t,n)}))}},{key:"getSealInfo",value:function(e,t){var n={};n.PluginRequestID=this.pub.randomString(),n.PluginRequest="Experts_GetSignStampInfo",n.signStamp=e.signStamp,this.post(n,(function(e,n,i){e?"SUCCESS"==n.PluginResponse?t(!0,JSON.parse(n.PluginResponseValue)):t(!1,n.PluginResponse):t(e,n)}))}},{key:"getKeySn",value:function(e){var t={};t.PluginRequestID=this.pub.randomString(),t.PluginRequest="NoLoginReadCertSNGroup",this.post(t,(function(t,n,i){if(t)if("SUCCESS"==n.PluginResponse){var a=n.PluginResponseValue;e(!0,JSON.parse(a))}else e(!1,n.PluginResponse);else e(t,n)}))}},{key:"getSystemLinux",value:function(e){var t={};t.PluginRequestID=this.pub.randomString(),t.PluginRequest="GetSystemFlag",this.post(t,(function(t,n,i){if(t)if("SUCCESS"==n.PluginResponse){var a=n.PluginResponseValue,r=JSON.parse(a);"linux"==r.systemFlag?e(!0,r.systemFlag):e(!1,r.systemFlag)}else e(!1,n.PluginResponse);else e(t,n)}))}},{key:"hashVerify",value:function(e,t){e.PluginRequestID=this.pub.randomString(),e.PluginRequest="Experts_NoSrcVerifySign",this.post(e,(function(e,n,i){if(e)if("SUCCESS"==n.PluginResponse){var a=JSON.parse(n.PluginResponseValue);t(e,a,i)}else t(!1,n.PluginResponse,i);else t(e,n,i)}))}},{key:"hashVerifyMessage",value:function(e,t){var n=this;this.hashVerify(e,(function(e,i){if(e){var a=i,r=a.signtype;r.length>1&&(r=JSON.parse(r).signType);var s="-1";"2"==r?s="2":"1"==r||"0"==r?s="1":"3"==r&&(s="3");var o=n.dataUtils.getYzMgs(a,s);t(e,o,s)}else t(e,i)}))}},{key:"getSealName",value:function(e){var t={};t.PluginRequestID=this.pub.randomString(),t.PluginRequest="Experts_GetLocalSealName",this.post(t,(function(t,n,i){if(t)if("SUCCESS"==n.PluginResponse){var a=JSON.parse(n.PluginResponseValue);e(t,a)}else e(!1,n.PluginResponse);else e(t,n)}))}},{key:"perforationSealPdfFile",value:function(e,t,n){t.PluginRequestID=this.pub.randomString(),t.PluginRequest="Experts_InterlockSignStamp",t.stampIndex="0",t.hashMode="2";var i={};i.signType=e,i.signContentType="1",t.extData=JSON.stringify(i),this.pub.isEmpty(this.areaCode)||(t.areaCode=this.areaCode),this.post(t,(function(e,t,i){if(e)if("SUCCESS"==t.PluginResponse){var a=JSON.parse(t.PluginResponseValue);n(e,a)}else n(!1,t.PluginResponse);else n(e,t)}))}},{key:"perforationSealPdfAbs",value:function(e,t,n){t.PluginRequestID=this.pub.randomString(),t.PluginRequest="Experts_NoSrcInterlockSignStamp",t.hashMode="2";var i={};i.signType=e,i.signContentType="1",t.extData=JSON.stringify(i),this.pub.isEmpty(this.areaCode)||(t.areaCode=this.areaCode),this.post(t,(function(e,t,i){if(e)if("SUCCESS"==t.PluginResponse){var a=JSON.parse(t.PluginResponseValue);n(e,a)}else n(!1,t.PluginResponse);else n(e,t)}))}},{key:"getRealPdfWhSeal",value:function(e,t){e.PluginRequestID=this.pub.randomString(),e.PluginRequest="Experts_GetPdfSignStampRect",this.post(e,(function(e,n,i){if(e)if("SUCCESS"==n.PluginResponse){var a=JSON.parse(n.PluginResponseValue);t(e,a)}else t(!1,n.PluginResponse);else t(e,n)}))}}])&&s(t.prototype,n),e}();t.httpClass=o},7135:function(e,t,n){"use strict";function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}n(9087),n(8228),n(3299),n(7741),Object.defineProperty(t,"__esModule",{value:!0}),t.imageUtils=void 0;var a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n;return t=e,(n=[{key:"txt2Img",value:function(e,t,n,i,a){var r=document.createElement("canvas"),s=r.getContext("2d");s.font=n+"px "+i;var o=[],l=0;o.push(0);for(var c=0;c<e.length;c++)s.measureText(e.substring(l,c+1)).width>t&&(o.push(c),l=c);r.width=t,r.height=o.length*n+4*o.length,s.clearRect(0,0,r.width,r.height),s.textBaseline="middle",s.fillStyle="#000000",s.font=n+"px "+i;for(var u=0;u<o.length;u++){var d=n/2+u*n+4*u,f=u+1>=o.length?e.length:o[u+1],p=e.substring(o[u],f),g=0,v=t-s.measureText(p).width;"center"==a?g=v/2:"right"==a&&(g=v,o>1&&(g-=t-s.measureText(o[e.length-1],e.length).width)),s.fillText(p,g,d)}return r.toDataURL("image/png")}},{key:"twoImg2ImgDown",value:function(e,t){return Promise.resolve().then((function(){return new Promise((function(t,n){var i={},a=document.createElement("img");a.src="data:image/png;base64,"+e,a.onload=function(){var e={};e.width=a.width,e.height=a.height,e.img=a,i.img1=e,t(i)}}))})).then((function(e){return new Promise((function(n,i){var a=document.createElement("img");a.src="data:image/png;base64,"+t,a.onload=function(){var t={};t.width=a.width,t.height=a.height,t.img=a,e.img2=t,n(e)}}))})).then((function(e){return new Promise((function(t,n){var i=e.img1.width,a=e.img1.height,r=e.img1.img,s=e.img2.width,o=e.img2.height,l=e.img2.img,c=document.createElement("canvas"),u=c.getContext("2d");c.setAttribute("width",i),c.setAttribute("height",a+o+4),u.drawImage(r,0,0,i,a),u.drawImage(l,0,a+4,s,o);var d=c.toDataURL("image/png");d=d.split("base64,")[1];var f={};f.img=d,f.heightOp=(a+o+4)/a,t(f)}))}))}},{key:"imgAddTxt2Img",value:function(e,t,n,i,a,r){var s=this.txt2Img(t,n,i,a,r).split("base64,")[1];return this.twoImg2ImgDown(e,s)}}])&&i(t.prototype,n),e}();t.imageUtils=a},6395:function(e,t,n){"use strict";function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}n(8304),Object.defineProperty(t,"__esModule",{value:!0}),t.loading=void 0;var a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.isShow=!1}var t,n;return t=e,(n=[{key:"open",value:function(){try{this.isShow&&this.close(!1),this.isShow=!0;var e=document.createElement("div");e.setAttribute("class","kinsec_loading_wrap"),e.style.background="transparent";var t=document.createElement("div");t.setAttribute("class","kinsec_loading");var n=document.createElement("div");n.setAttribute("class","kinsec_msg__overlay"),this.wrap=e,this.overlay=n,e.appendChild(t),document.body.appendChild(e),document.body.appendChild(n),setTimeout((function(){e.style.transform="translate(-50%,-50%) scale(1,1)",n.style.opacity="1"}),100)}catch(e){console.error(e)}}},{key:"close",value:function(){try{this.wrap.remove(),this.overlay.remove(),this.isShow=!1}catch(e){console.error(e)}}}])&&i(t.prototype,n),e}();t.loading=a},13:function(e,t){"use strict";function n(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}Object.defineProperty(t,"__esModule",{value:!0}),t.log=void 0;var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.open=!1}var t,i;return t=e,(i=[{key:"init",value:function(e){void 0!==e&&(this.open=e)}},{key:"log",value:function(e){this.open&&console.log("kinsec_seal",e)}},{key:"logTag",value:function(e,t){this.open&&console.log("kinsec_seal---"+e,t)}},{key:"error",value:function(e){console.error("kinsec_seal",e)}}])&&n(t.prototype,i),e}();t.log=i},3796:function(e,t,n){"use strict";function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}n(9087),n(3299),n(1206),n(1636),Object.defineProperty(t,"__esModule",{value:!0}),t.md5=void 0;var a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n;return t=e,(n=[{key:"rotateLeft",value:function(e,t){return e<<t|e>>>32-t}},{key:"addUnsigned",value:function(e,t){var n,i,a,r,s;return a=2147483648&e,r=2147483648&t,s=(1073741823&e)+(1073741823&t),(n=1073741824&e)&(i=1073741824&t)?2147483648^s^a^r:n|i?1073741824&s?3221225472^s^a^r:1073741824^s^a^r:s^a^r}},{key:"F",value:function(e,t,n){return e&t|~e&n}},{key:"G",value:function(e,t,n){return e&n|t&~n}},{key:"H",value:function(e,t,n){return e^t^n}},{key:"I",value:function(e,t,n){return t^(e|~n)}},{key:"FF",value:function(e,t,n,i,a,r,s){return e=this.addUnsigned(e,this.addUnsigned(this.addUnsigned(this.F(t,n,i),a),s)),this.addUnsigned(this.rotateLeft(e,r),t)}},{key:"GG",value:function(e,t,n,i,a,r,s){return e=this.addUnsigned(e,this.addUnsigned(this.addUnsigned(this.G(t,n,i),a),s)),this.addUnsigned(this.rotateLeft(e,r),t)}},{key:"HH",value:function(e,t,n,i,a,r,s){return e=this.addUnsigned(e,this.addUnsigned(this.addUnsigned(this.H(t,n,i),a),s)),this.addUnsigned(this.rotateLeft(e,r),t)}},{key:"II",value:function(e,t,n,i,a,r,s){return e=this.addUnsigned(e,this.addUnsigned(this.addUnsigned(this.I(t,n,i),a),s)),this.addUnsigned(this.rotateLeft(e,r),t)}},{key:"convertToWordArray",value:function(e){for(var t,n=e.length,i=n+8,a=16*((i-i%64)/64+1),r=Array(a-1),s=0,o=0;o<n;)s=o%4*8,r[t=(o-o%4)/4]=r[t]|e.charCodeAt(o)<<s,o++;return s=o%4*8,r[t=(o-o%4)/4]=r[t]|128<<s,r[a-2]=n<<3,r[a-1]=n>>>29,r}},{key:"wordToHex",value:function(e){var t,n="",i="";for(t=0;t<=3;t++)n+=(i="0"+(e>>>8*t&255).toString(16)).substr(i.length-2,2);return n}},{key:"uTF8Encode",value:function(e){e=e.replace(/\x0d\x0a/g,"\n");for(var t="",n=0;n<e.length;n++){var i=e.charCodeAt(n);i<128?t+=String.fromCharCode(i):i>127&&i<2048?(t+=String.fromCharCode(i>>6|192),t+=String.fromCharCode(63&i|128)):(t+=String.fromCharCode(i>>12|224),t+=String.fromCharCode(i>>6&63|128),t+=String.fromCharCode(63&i|128))}return t}},{key:"md5",value:function(e){var t,n,i,a,r,s,o,l,c,u=Array();for(e=this.uTF8Encode(e),u=this.convertToWordArray(e),s=1732584193,o=4023233417,l=2562383102,c=271733878,t=0;t<u.length;t+=16)n=s,i=o,a=l,r=c,s=this.FF(s,o,l,c,u[t+0],7,3614090360),c=this.FF(c,s,o,l,u[t+1],12,3905402710),l=this.FF(l,c,s,o,u[t+2],17,606105819),o=this.FF(o,l,c,s,u[t+3],22,3250441966),s=this.FF(s,o,l,c,u[t+4],7,4118548399),c=this.FF(c,s,o,l,u[t+5],12,1200080426),l=this.FF(l,c,s,o,u[t+6],17,2821735955),o=this.FF(o,l,c,s,u[t+7],22,4249261313),s=this.FF(s,o,l,c,u[t+8],7,1770035416),c=this.FF(c,s,o,l,u[t+9],12,2336552879),l=this.FF(l,c,s,o,u[t+10],17,4294925233),o=this.FF(o,l,c,s,u[t+11],22,2304563134),s=this.FF(s,o,l,c,u[t+12],7,1804603682),c=this.FF(c,s,o,l,u[t+13],12,4254626195),l=this.FF(l,c,s,o,u[t+14],17,2792965006),o=this.FF(o,l,c,s,u[t+15],22,1236535329),s=this.GG(s,o,l,c,u[t+1],5,4129170786),c=this.GG(c,s,o,l,u[t+6],9,3225465664),l=this.GG(l,c,s,o,u[t+11],14,643717713),o=this.GG(o,l,c,s,u[t+0],20,3921069994),s=this.GG(s,o,l,c,u[t+5],5,3593408605),c=this.GG(c,s,o,l,u[t+10],9,38016083),l=this.GG(l,c,s,o,u[t+15],14,3634488961),o=this.GG(o,l,c,s,u[t+4],20,3889429448),s=this.GG(s,o,l,c,u[t+9],5,568446438),c=this.GG(c,s,o,l,u[t+14],9,3275163606),l=this.GG(l,c,s,o,u[t+3],14,4107603335),o=this.GG(o,l,c,s,u[t+8],20,1163531501),s=this.GG(s,o,l,c,u[t+13],5,2850285829),c=this.GG(c,s,o,l,u[t+2],9,4243563512),l=this.GG(l,c,s,o,u[t+7],14,1735328473),o=this.GG(o,l,c,s,u[t+12],20,2368359562),s=this.HH(s,o,l,c,u[t+5],4,4294588738),c=this.HH(c,s,o,l,u[t+8],11,2272392833),l=this.HH(l,c,s,o,u[t+11],16,1839030562),o=this.HH(o,l,c,s,u[t+14],23,4259657740),s=this.HH(s,o,l,c,u[t+1],4,2763975236),c=this.HH(c,s,o,l,u[t+4],11,1272893353),l=this.HH(l,c,s,o,u[t+7],16,4139469664),o=this.HH(o,l,c,s,u[t+10],23,3200236656),s=this.HH(s,o,l,c,u[t+13],4,681279174),c=this.HH(c,s,o,l,u[t+0],11,3936430074),l=this.HH(l,c,s,o,u[t+3],16,3572445317),o=this.HH(o,l,c,s,u[t+6],23,76029189),s=this.HH(s,o,l,c,u[t+9],4,3654602809),c=this.HH(c,s,o,l,u[t+12],11,3873151461),l=this.HH(l,c,s,o,u[t+15],16,530742520),o=this.HH(o,l,c,s,u[t+2],23,3299628645),s=this.II(s,o,l,c,u[t+0],6,4096336452),c=this.II(c,s,o,l,u[t+7],10,1126891415),l=this.II(l,c,s,o,u[t+14],15,2878612391),o=this.II(o,l,c,s,u[t+5],21,4237533241),s=this.II(s,o,l,c,u[t+12],6,1700485571),c=this.II(c,s,o,l,u[t+3],10,2399980690),l=this.II(l,c,s,o,u[t+10],15,4293915773),o=this.II(o,l,c,s,u[t+1],21,2240044497),s=this.II(s,o,l,c,u[t+8],6,1873313359),c=this.II(c,s,o,l,u[t+15],10,4264355552),l=this.II(l,c,s,o,u[t+6],15,2734768916),o=this.II(o,l,c,s,u[t+13],21,1309151649),s=this.II(s,o,l,c,u[t+4],6,4149444226),c=this.II(c,s,o,l,u[t+11],10,3174756917),l=this.II(l,c,s,o,u[t+2],15,718787259),o=this.II(o,l,c,s,u[t+9],21,3951481745),s=this.addUnsigned(s,n),o=this.addUnsigned(o,i),l=this.addUnsigned(l,a),c=this.addUnsigned(c,r);return(this.wordToHex(s)+this.wordToHex(o)+this.wordToHex(l)+this.wordToHex(c)).toUpperCase()}}])&&i(t.prototype,n),e}();t.md5=a},8543:function(e,t,n){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}n(4917),n(1631),n(3019),n(9087),n(3299),n(9676),n(1636),n(7741),n(5443),n(7681),n(5756),n(4375),n(8076),n(9596),n(8723),n(781),n(365),n(3632),n(7454),n(5129),n(3496),n(3158),n(2526),n(362),n(5677),n(8689),n(1926),n(2072),n(3175),n(9129),n(3809),n(7842),Object.defineProperty(t,"__esModule",{value:!0}),t.pubClass=void 0;var r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n;return t=e,(n=[{key:"getClass",value:function(e,t){if(document.getElementsByClassName)return document.getElementsByClassName(t);for(var n=document.getElementsByTagName(e),i=[],a=0;a<n.length;a++)n[a].className==t&&(i[i.length]=n[a]);return i}},{key:"getDomClass",value:function(e,t,n){if(e.getElementsByClassName)return e.getElementsByClassName(n);for(var i=e.getElementsByTagName(t),a=[],r=0;r<i.length;r++)i[r].className==n&&(a[a.length]=i[r]);return a}},{key:"getChildren",value:function(e,t){for(var n=[],i=e.getElementsByTagName(t),a=0,r=i.length;a<r;++a)if(1==i[a].nodeType){var s=i[a].parentNode;1==s.nodeType?s==e&&(n[n.length]=i[a]):s.parentNode==e&&(n[n.length]=i[a])}else alert(i[a].nodeType);return n}},{key:"isEmpty",value:function(e){return void 0===e||null==e||0==e.length}},{key:"isType",value:function(e,t){var n=i(e).toLowerCase();return kinsecLog.log(t),kinsecLog.log(n),n==t}},{key:"getScriptUrl",value:function(e){for(var t=document.getElementsByTagName("script"),n=0;n<t.length;n++){var i=t[n].getAttribute("src");if(!this.isEmpty(i)&&i.endsWith(e))return i.replace(e,"")}return""}},{key:"linkExist",value:function(e){for(var t=document.getElementsByTagName("link"),n=0;n<t.length;n++){var i=t[n].getAttribute("href");if(!this.isEmpty(i)&&i.endsWith(e))return!0}return!1}},{key:"randomString",value:function(e){e=e||32;for(var t="ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz2345678",n=t.length,i="",a=0;a<e;a++)i+=t.charAt(Math.floor(Math.random()*n));return i}},{key:"convertJson",value:function(e){try{return this.isType(e,"string")?JSON.parse(e):e}catch(e){kinsecLog.error(e)}return null}},{key:"judgeArrSame",value:function(e){for(var t=0;t<e.length;t++)for(var n=e[t],i=t+1;i<e.length;i++)if(n==e[i])return!0;return!1}},{key:"judgeTwoArrContain",value:function(e,t){for(var n=0;n<t.length;n++){var i=t[n];if(e.indexOf(i)<0)return!1}return!0}},{key:"base642Byte",value:function(e){for(var t=window.atob(e),n=t.length,i=new Uint8Array(n);n--;)i[n]=t.charCodeAt(n);return i}},{key:"val2m",value:function(e,t){return this.isEmpty(e)&&!this.isEmpty(t)?t:e}},{key:"jsonLen",value:function(e){var t=0;for(var n in e)t++;return t}},{key:"numMinus",value:function(e,t){kinsecLog.log("numMinus"),kinsecLog.log(e);var n=1;if(t&&(n=t),this.isType(e,"number"))return e-n;for(var i=e.split(","),a="",r=0;r<i.length;r++){for(var s=i[r].split("-"),o=0;o<s.length;o++){var l=parseInt(s[o]);a+=0==o?l-n:"-"+(l-n)}r<i.length-1&&(a+=",")}return kinsecLog.log(a),a}},{key:"numAdd",value:function(e,t){kinsecLog.log("numAdd"),kinsecLog.log(e);var n=1;if(t&&(n=t),this.isType(e,"number"))return e+n;for(var i=e.split(","),a="",r=0;r<i.length;r++){for(var s=i[r].split("-"),o=0;o<s.length;o++){var l=parseInt(s[o]);a+=0==o?l+n:"-"+(l+n)}r<i.length-1&&(a+=",")}return kinsecLog.log(a),a}},{key:"numToArray",value:function(e){kinsecLog.log("numToArray"),kinsecLog.log(e);var t=[];if(this.isType(e,"number"))t.push(e);else for(var n=e.split(","),i=0;i<n.length;i++){var a=n[i].split("-");if(2==a.length)for(var r=parseInt(a[0]);r<=parseInt(a[1]);r++)t.push(r);else t.push(parseInt(a[0]))}return kinsecLog.log(t),t}},{key:"checkWindow",value:function(){var e=navigator.platform;return"Win32"==e||e.indexOf("Win")>=0||e.indexOf("win")>=0}}])&&a(t.prototype,n),e}();t.pubClass=r},4540:function(e,t,n){"use strict";n(7699),n(9087),n(8228),n(8304),Object.defineProperty(t,"__esModule",{value:!0}),t.qrcodeServer=void 0;var i=n(7603);function a(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var r=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.pub=t,this.http=n,this.constants=new i.constants,this.ws=null,this.wsUrl="",this.timeOut=6e4,this.mesIndex=0,this.dataList={},this.val={},this.ywCall=null,this.token="",this.hurl="",this.curDate=0,this.delCall=null}var t,n;return t=e,(n=[{key:"init",value:function(e,t,n,i){if(this.appId=e,this.type=t,this.dialog=n,"2"==i)this.wsUrl=this.constants.cloudSignPushWss;else{var a=document.location.protocol;this.wsUrl="http:"==a?this.constants.cloudSignPushWs:this.constants.cloudSignPushWss}}},{key:"set_mask_begin",value:function(e){this.mask_begin_call=e}},{key:"set_mask_end",value:function(e){this.mask_end_call=e}},{key:"mask_begin",value:function(){this.pub.isType(this.mask_begin_call,"function")&&this.mask_begin_call()}},{key:"mask_end",value:function(){this.pub.isType(this.mask_end_call,"function")&&this.mask_end_call()}},{key:"setTimeout",value:function(e){this.pub.isType(e,"number")&&e>0&&(this.timeOut=e)}},{key:"_open",value:function(e){var t=this;if(null==this.ws){try{this.ws=new WebSocket(this.wsUrl)}catch(t){kinsecLog.error(t),e(!1,"建立连接异常")}this.ws.onopen=function(n){t.token="",t.curDate=0,kinsecLog.log("Connection open ..."),e(!0)},this.ws.onclose=function(e){t.token="",t.curDate=0,t.ws=null,kinsecLog.log("Connect closed.")},this.ws.onerror=function(n){t.token="",t.curDate=0,t.ws=null,kinsecLog.log("连接出错"),kinsecLog.log(n),e(!1,"连接出错")}}else e(!0)}},{key:"_message",value:function(e){var t=this;this.ws.onmessage=function(n){var i=n.data;kinsecLog.logTag("Received Message: ",i);var a=JSON.parse(i);if(kinsecLog.logTag("Received Message: ",a.action),"s.sign.push"==a.action)if(kinsecLog.logTag("Received Message: ",a.content),"0000"==a.content.code){var r=a.content.info;if(t.token==r.token)if(t.dialog.closeAll(),"1"==t.type)t.signSeal("0",t.val.val,r);else{var s=t.val.type,o={};o.sealData=r.seal,o.certData=r.cert,t.mask_begin(),t.http.parseSealData(r.seal,(function(e,n){if(t.mask_end(),e){var i=JSON.parse(n);o.sealPic=i.sealPic,o.sealPicW=i.sealPicW,o.sealPicH=i.sealPicH,"1"==s?t.ywCall(!0,o):"2"==s||t.dialog.mes("未知的操作类型")}else t.dialog.mes(n)}))}else kinsecLog.log("token不一致跳过")}else t.dialog.mes(a.content.msg);else if("s.sign.pushDel"==a.action)if("0000"==a.content.code){var l=a.content.info;if(t.token==l.token){t.dialog.closeAll();var c={};c.cert=l.cert,c.sign=l.sign,t.type,t.delCall(!0,JSON.stringify(c))}else kinsecLog.log("token不一致跳过")}else t.dialog.mes(a.content.msg);else if("s.sign.pushLogin"==a.action)if("0000"==a.content.code){var u=a.content.info;if(t.token==u.token){t.dialog.closeAll();var d={};d.cert=u.cert,d.sign=u.sign,d.certSn=u.certSn,d.certAuthSn=u.certAuthSn,t.ywCall(!0,JSON.stringify(d))}else kinsecLog.log("token不一致跳过")}else t.dialog.mes(a.content.msg);else if("s.sign.pushEnc"==a.action)if("0000"==a.content.code){var f=a.content.info;t.token==f.token?(t.dialog.closeAll(),t.ywCall(!0,f.data)):kinsecLog.log("token不一致跳过")}else t.dialog.mes(a.content.msg);else if("s.sign.pushDec"==a.action)if("0000"==a.content.code){var p=a.content.info;t.token==p.token?(t.dialog.closeAll(),t.ywCall(!0,p.data)):kinsecLog.log("token不一致跳过")}else t.dialog.mes(a.content.msg);else e(a)}}},{key:"signSeal",value:function(e,t,n,i){var a=this;this.mask_begin();var r={};r.sourceData=t,r.sealData=n.seal,r.certData=n.cert,"1"==e&&(r.x=n.x,r.y=n.y,r.page=n.page),this.http.prepareSignData(e,"3",r,(function(t,r){if(t){var s=JSON.parse(r),o=s.data,l=s.dataSrc,c=++a.mesIndex+"",u=setTimeout((function(){delete a.dataList[c],a.mask_end(),a.dialog.mes("请求签章超时")}),a.timeOut);a._message((function(t){if("c.sign.seal"==t.action){var r=a.dataList[t.remark];if(kinsecLog.log("remark---"+r),kinsecLog.log("index---"+c),!a.pub.isEmpty(r)&&r==c)if(clearTimeout(u),delete a.dataList[c],"0000"==t.content.code){var s=t.content.info,o={};o.certData=n.cert,o.dataSrc=l,o.sign=s.sign[0],o.tsa=s.tsa[0],a.http.createSignStamp(e,o,(function(t,r){t?a.genData(e,n.seal,r,i):(a.mask_end(),a.dialog.mes(r))}))}else a.mask_end(),a.dialog.mes(t.content.msg)}})),a.dataList[c]=c;var d={type:"c",action:"c.sign.seal"},f={},p=[];p.push(o),f.data=p,f.token=a.token,f.fileId="222222",f.signType="2",d.content=f,d.remark=c,a.ws.send(JSON.stringify(d))}else a.mask_end(),a.dialog.mes(r)}))}},{key:"signSealMore",value:function(e,t,n,i,a){var r=this;this.signSeal(e,t,n[0],(function(s,o){s?(i.push(o),n.splice(0,1),n.length<=0?a(!0,i):r.signSealMore(e,t,n,i,a)):a(s,o)}))}},{key:"genData",value:function(e,t,n,i){var a=this;if("0"==e){var r={};new Promise((function(e,t){var i={};i.signStamp=n,a.http.getSealInfo(i,(function(n,i){r.certSn=i.certSN,n?e(!0,i):t(n,i)}))})).then((function(e){a.http.parseSealData(t,(function(e,t){if(a.mask_end(),e){var i=JSON.parse(t),s=i.sealPic,o=parseInt(i.sealPicW/25.4*72),l=parseInt(i.sealPicH/25.4*72),c=i.GUID;r.img=s,r.type="3",r.seal=n,r.sealId=c,r.sealPicW=o,r.sealPicH=l,r.vs="4";var u=JSON.stringify(r);a.ywCall(e,u)}else a.dialog.mes(t)}))})).catch((function(e){a.mask_end(),a.ywCall(!1,e)}))}else this.mask_end(),i(!0,n)}},{key:"qrcode",value:function(e,t,n){var i=this;this.val=e,this.ywCall=t,this._open((function(e,t){if(e){var a=++i.mesIndex+"",r=setTimeout((function(){delete i.dataList[a],n(!1,"请求超时")}),i.timeOut);i._message((function(e){if("c.sign.token"==e.action){var t=i.dataList[e.remark];if(kinsecLog.log("remark---"+t),kinsecLog.log("index---"+a),!i.pub.isEmpty(t)&&t==a)if(clearTimeout(r),delete i.dataList[a],"0000"==e.content.code){i.token=e.content.info.token;var s=e.content.info.qrcode;n(!0,s)}else n(!1,e.content.msg)}})),i.dataList[a]=a;var s={type:"c",action:"c.sign.token"},o={};o.appId=i.appId,o.fileId="222222",o.type="2",s.content=o,s.remark=a,i.ws.send(JSON.stringify(s))}else n(e,t)}))}},{key:"delQrcode",value:function(e,t,n,i){var a=this;this.delCall=n,this._open((function(n,r){if(n){var s=++a.mesIndex+"",o=setTimeout((function(){delete a.dataList[s],i(!1,"请求超时")}),a.timeOut);a._message((function(e){if("c.sign.token"==e.action){var t=a.dataList[e.remark];if(kinsecLog.log("remark---"+t),kinsecLog.log("index---"+s),!a.pub.isEmpty(t)&&t==s)if(clearTimeout(o),delete a.dataList[s],"0000"==e.content.code){a.token=e.content.info.token;var n=e.content.info.qrcode;i(!0,n)}else i(!1,e.content.msg)}})),a.dataList[s]=s;var l={type:"c",action:"c.sign.token"},c={};c.appId=a.appId,c.sealIndex=t,c.sealCert=e,c.type="3",l.content=c,l.remark=s,a.ws.send(JSON.stringify(l))}else i(n,r)}))}},{key:"qrSign",value:function(e,t,n){var i=this;this.ywCall=t,this._open((function(t,a){if(t){var r=++i.mesIndex+"",s=setTimeout((function(){delete i.dataList[r],n(!1,"请求超时")}),i.timeOut);i._message((function(e){if("c.sign.token"==e.action){var t=i.dataList[e.remark];if(kinsecLog.log("remark---"+t),kinsecLog.log("index---"+r),!i.pub.isEmpty(t)&&t==r)if(clearTimeout(s),delete i.dataList[r],"0000"==e.content.code){i.token=e.content.info.token;var a=e.content.info.qrcode;n(!0,a)}else n(!1,e.content.msg)}})),i.dataList[r]=r;var o={type:"c",action:"c.sign.token"},l={};l.appId=i.appId,l.data=e,l.type="1",o.content=l,o.remark=r,i.ws.send(JSON.stringify(o))}else n(t,a)}))}},{key:"qrEnc",value:function(e,t,n){var i=this;this.ywCall=t,this._open((function(t,a){if(t){var r=++i.mesIndex+"",s=setTimeout((function(){delete i.dataList[r],n(!1,"请求超时")}),i.timeOut);i._message((function(e){if("c.sign.token"==e.action){var t=i.dataList[e.remark];if(kinsecLog.log("remark---"+t),kinsecLog.log("index---"+r),!i.pub.isEmpty(t)&&t==r)if(clearTimeout(s),delete i.dataList[r],"0000"==e.content.code){i.token=e.content.info.token;var a=e.content.info.qrcode;n(!0,a)}else n(!1,e.content.msg)}})),i.dataList[r]=r;var o={type:"c",action:"c.sign.token"},l={};l.appId=i.appId,l.data=e,l.type="4",o.content=l,o.remark=r,i.ws.send(JSON.stringify(o))}else n(t,a)}))}},{key:"qrDec",value:function(e,t,n){var i=this;this.ywCall=t,this._open((function(t,a){if(t){var r=++i.mesIndex+"",s=setTimeout((function(){delete i.dataList[r],n(!1,"请求超时")}),i.timeOut);i._message((function(e){if("c.sign.token"==e.action){var t=i.dataList[e.remark];if(kinsecLog.log("remark---"+t),kinsecLog.log("index---"+r),!i.pub.isEmpty(t)&&t==r)if(clearTimeout(s),delete i.dataList[r],"0000"==e.content.code){i.token=e.content.info.token;var a=e.content.info.qrcode;n(!0,a)}else n(!1,e.content.msg)}})),i.dataList[r]=r;var o={type:"c",action:"c.sign.token"},l={};l.appId=i.appId,l.data=e,l.type="5",o.content=l,o.remark=r,i.ws.send(JSON.stringify(o))}else n(t,a)}))}}])&&a(t.prototype,n),e}();t.qrcodeServer=r}},t={};function n(i){if(t[i])return t[i].exports;var a=t[i]={exports:{}};return e[i](a,a.exports,n),a.exports}!function(){"use strict";var e=n(3750),t=n(8543),i=n(13);"remove"in Element.prototype||(Element.prototype.remove=function(){this.parentNode&&this.parentNode.removeChild(this)});var a=new t.pubClass,r=a.getScriptUrl("kinsec_html_seal.js");if(!a.linkExist("/seal.css")){var s=document.createElement("link");s.setAttribute("rel","stylesheet"),s.setAttribute("href",r+"assets/css/seal.css"),document.head.appendChild(s)}window.kinsecLog=new i.log,window.kinsecHtmlSeal=new e.htmlSeal(r)}()}();
